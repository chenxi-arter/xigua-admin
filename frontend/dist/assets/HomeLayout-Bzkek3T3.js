import{d as S,r as d,c as u,m as H,l as O,n as U,p as $,q as j,b as h,F as N,f as B,w as R,s as q,e as M,o as i,j as k,x as z,K as G,k as J,_ as F}from"./index-BUt-9d1d.js";import{S as Q,a as W}from"./index-Dgq7X-t3.js";import{T as X,a as Y}from"./index-CqX3qSc-.js";import"./index-DBGvqUvw.js";import{F as Z,f as P}from"./index-YrmyBDnz.js";import ee from"./NavHomeView-DBPaX-jn.js";import{u as ae,s as oe}from"./request-CJrpamSW.js";import{u as te}from"./use-id-DYAqg3Jf.js";import{e as D,c as ne,p as E,t as se,f as A,h as ce,w as le}from"./index-CiRnDQBv.js";import"./use-route-CUL3gVxm.js";import"./index-CtvN6bhi.js";import"./index-22Lr7j6y.js";import"./index-DgOa4PE7.js";import"./index-N2QlJerl.js";import"./CoverComp-BjIvQbsH.js";const[re,_,ie]=ne("search"),ue=D({},P,{label:String,shape:A("square"),leftIcon:A("search"),clearable:se,actionText:String,background:String,showAction:Boolean});var de=S({name:re,props:ue,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(s,{emit:t,slots:c,attrs:l}){const g=te(),r=d(),p=()=>{c.action||(t("update:modelValue",""),t("cancel"))},b=e=>{e.keyCode===13&&(ce(e),t("search",s.modelValue))},m=()=>s.id||`${g}-input`,w=()=>{if(c.label||s.label)return u("label",{class:_("label"),for:m(),"data-allow-mismatch":"attribute"},[c.label?c.label():s.label])},C=()=>{if(s.showAction){const e=s.actionText||ie("cancel");return u("div",{class:_("action"),role:"button",tabindex:0,onClick:p},[c.action?c.action():e])}},f=()=>{var e;return(e=r.value)==null?void 0:e.blur()},I=()=>{var e;return(e=r.value)==null?void 0:e.focus()},a=e=>t("blur",e),o=e=>t("focus",e),v=e=>t("clear",e),y=e=>t("clickInput",e),x=e=>t("clickLeftIcon",e),V=e=>t("clickRightIcon",e),T=Object.keys(P),n=()=>{const e=D({},l,E(s,T),{id:m()}),L=K=>t("update:modelValue",K);return u(Z,H({ref:r,type:"search",class:_("field",{"with-message":e.errorMessage}),border:!1,onBlur:a,onFocus:o,onClear:v,onKeypress:b,onClickInput:y,onClickLeftIcon:x,onClickRightIcon:V,"onUpdate:modelValue":L},e),E(c,["left-icon","right-icon"]))};return ae({focus:I,blur:f}),()=>{var e;return u("div",{class:_({"show-action":s.showAction}),style:{background:s.background}},[(e=c.left)==null?void 0:e.call(c),u("div",{class:_("content",s.shape)},[w(),n()]),C()])}}});const pe=le(de),me="/xiguaLogo.png",fe={class:"home-search"},ve={key:0,class:"load-box"},_e=S({__name:"VanBarComp",setup(s){const t=q(),c=$(),l=d([]);d(!1);const g=d(!1),r=d(0),p=d(),b=async()=>{try{const a=await oe.get("/api/home/categories");l.value=a.data.sort((o,v)=>o.id-v.id).map(o=>({...o,isMounted:!1}))}catch(a){console.error(a)}};function m(a){l.value[a].isMounted=!0,a>0&&(l.value[a-1].isMounted=!0),a<l.value.length-1&&(l.value[a+1].isMounted=!0)}O(()=>{p.value?.swipeTo(0)}),U(async()=>{await b();let a=l.value.findIndex(o=>o.categoryId===c.name);a==-1&&(a=0),m(a),r.value=a,p.value?.swipeTo(a),j(()=>{setTimeout(()=>{g.value=!0},500)})});function w(a){m(a),r.value=a,p.value?.swipeTo(a);const o=l.value[a].routeName;t.push({name:o})}function C(a){m(a),r.value=a;const o=l.value[a].routeName;t.push({name:o})}const f=d(""),I=()=>{t.push({name:"search",params:{id:f.value}})};return(a,o)=>{const v=pe,y=Y,x=X,V=W,T=Q;return i(),h(N,null,[B("div",fe,[u(v,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=n=>f.value=n),background:"rgba(255, 255, 255, 0)",placeholder:"请输入搜索关键词",onSearch:I,style:{"font-size":"4.2vw",flex:"1"}},null,8,["modelValue"]),o[2]||(o[2]=B("img",{src:me,alt:"Logo",class:"icon"},null,-1))]),u(x,{shrink:"",active:r.value,"onUpdate:active":o[1]||(o[1]=n=>r.value=n),background:"transparent",onChange:w,ellipsis:!1,animated:!1},{default:R(()=>[(i(!0),h(N,null,M(l.value,(n,e)=>(i(),k(y,{key:n.name,title:n.name,name:e},null,8,["title","name"]))),128))]),_:1},8,["active"]),u(T,{loop:!1,duration:g.value?200:0,ref_key:"swipeRef",ref:p,class:"home-outer-swipe flex_auto","show-indicators":!1,onChange:C,"lazy-render":!1},{default:R(()=>[(i(!0),h(N,null,M(l.value,n=>(i(),k(V,{key:n.name},{default:R(()=>[n.isMounted?(i(),h("div",ve,[(i(),k(G,null,[(i(),k(J(ee),{key:n.name,catInfo:n},null,8,["catInfo"]))],1024))])):z("",!0)]),_:2},1024))),128))]),_:1},8,["duration"])],64)}}}),he=F(_e,[["__scopeId","data-v-cc5624dc"]]),ge={class:"home flex_direction-column relative"},ke=S({__name:"HomeLayout",setup(s){return(t,c)=>(i(),h("div",ge,[u(he)]))}}),Ae=F(ke,[["__scopeId","data-v-03e15f6c"]]);export{Ae as default};
