import{j as e}from"./index-dZ-ab8fY.js";import{j as pt,r as s}from"./react-vendor-BZ8KDC-J.js";import{F as d,d as Ee,s as o,T as ht,a as I,B as x,b as U,e as ut,f as r,I as f,g as Te,h as xt,i as h,j as P,k as De,U as gt,R as Y,C as w,l as jt,m as yt,n as mt}from"./antd-vendor-BWliGsmx.js";import{C as At,S as ft,a as v,E as wt}from"./admin-DxX4aGPR.js";import{f as G}from"./format-0Cj3JWJt.js";import{R as vt}from"./EyeOutlined-CHLTBpXo.js";import{R as Ct}from"./CopyOutlined-Dil6vWtD.js";import{R as bt}from"./DownloadOutlined-CO20BKGR.js";import"./client-yVgCOTGo.js";import"./utils-vendor-NIGUFBhG.js";function Lt(){const q=t=>!!t&&/^(https?:)?\/\//i.test(t),O=pt(),[Ue,oe]=s.useState(!1),[Re,H]=s.useState([]),[Oe,V]=s.useState(0),[B,N]=s.useState(1),[k,K]=s.useState(10),[Be,C]=s.useState(!1),[a,ce]=s.useState(null),[Le,$]=s.useState(!1),[L,J]=s.useState(null),[Me,W]=s.useState(!1),[M,X]=s.useState(null),[b]=d.useForm(),[Qe,Z]=s.useState(!1),[m,Fe]=s.useState(null),[E,ze]=s.useState("active"),[_,de]=s.useState(!1),[ee,te]=s.useState(0),[Pe,pe]=s.useState(!1),[Q,he]=s.useState(""),[ue,A]=s.useState(null),[Ye,F]=s.useState(!1),[xe,ge]=s.useState(null),[je,ye]=s.useState(0),[Ge,me]=s.useState(!1),[se,qe]=s.useState(null),[He,Ae]=s.useState(!1),[Ve,Ne]=s.useState([]),[Ke,$e]=s.useState(0),[le,Je]=s.useState(1),[R,We]=s.useState(10),[T,Xe]=s.useState(""),[D,Ze]=s.useState(void 0),ne=s.useRef(void 0),[fe,_e]=s.useState({}),[we,et]=s.useState([]),ve=s.useCallback(async()=>{try{const t=await At.list(1,200),l=(t.items||[]).map(i=>({value:i.id,label:i.name||String(i.categoryId||i.id)}));et(l);const c={};(t.items||[]).forEach(i=>{const n=i.name||String(i.categoryId||i.id);c[String(i.id)]=n,i.categoryId!==void 0&&i.categoryId!==null&&(c[String(i.categoryId)]=n)}),_e(c)}catch{}},[]),p=s.useCallback(async(t=B,l=k,c=T,i=D)=>{oe(!0);try{if(c&&c.trim()){const n={keyword:c.trim(),page:t,size:l};i!==void 0&&(n.categoryId=i);const j=await ft.fuzzy(n),y=typeof j=="object"&&j&&"data"in j?j.data:j,z=y?.list||y?.items||[];H(z),V(y?.total||z.length),N(y?.page||t),K(y?.size||l)}else{const n={};if(i!==void 0&&(n.categoryId=i),E==="deleted"){const g=await v.listDeleted(t,l);H(g.items||[]),V(g.total||0),N(g.page||t),K(g.size||l)}else{const g=await v.list(t,l,n);H(g.items),V(g.total),N(g.page),K(g.size)}}}finally{oe(!1)}},[T,E,D]);s.useEffect(()=>{p(1,k,T,D)},[p,T,E,D]),s.useEffect(()=>{ve()},[ve]);const ie=s.useCallback(async(t,l=le,c=R)=>{Ae(!0);try{const i=await wt.list(l,c,{seriesId:t}),n=i.items||[];Ne(n),$e(i.total),Je(i.page),We(i.size)}finally{Ae(!1)}},[le,R]),tt=()=>{ce(null),b.resetFields(),A(null),C(!0)},Ce=s.useCallback(t=>{qe(t),me(!0),ie(t.id,1,R)},[ie,R]),be=s.useCallback(t=>{O(`/episodes?seriesId=${t.id}`)},[O]),Se=s.useCallback(t=>{ce(t);const l={...t};l.releaseDate&&typeof l.releaseDate=="string"&&(l.releaseDate=Ee(l.releaseDate)),b.setFieldsValue(l),t.coverUrl&&q(t.coverUrl)&&A(t.coverUrl),C(!0)},[b]),Ie=s.useCallback(t=>{J(t),$(!0)},[]),st=s.useCallback(async()=>{if(L)try{await v.remove(L.id),o.success("å·²åˆ é™¤"),p()}catch{o.error("åˆ é™¤å¤±è´¥")}finally{$(!1),J(null)}},[L,p]),lt=s.useCallback(()=>{$(!1),J(null)},[]),nt=s.useCallback(async()=>{if(!(!a||!M))try{await v.update(a.id,M),o.success("å·²æ›´æ–°"),C(!1),A(null),p()}catch{o.error("ä¿®æ”¹å¤±è´¥")}finally{W(!1),X(null)}},[a,M,p]),it=s.useCallback(()=>{W(!1),X(null)},[]),ae=s.useCallback(t=>{t.coverUrl?(Fe({url:t.coverUrl,title:t.title}),Z(!0)):o.warning("è¯¥ç³»åˆ—æš‚æ— å°é¢")},[]),at=s.useCallback(async(t,l)=>{try{o.loading("æ­£åœ¨ä¸‹è½½å°é¢...",0);const c=l.replace(/[<>:"/\\|?*]/g,"_");try{const i=await fetch(t,{mode:"cors",credentials:"omit"});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const n=await i.blob();if(n.size===0)throw new Error("ä¸‹è½½çš„æ–‡ä»¶ä¸ºç©º");const g=window.URL.createObjectURL(n),j=document.createElement("a");j.href=g,j.download=c,j.style.display="none",document.body.appendChild(j),j.click(),setTimeout(()=>{document.body.removeChild(j),window.URL.revokeObjectURL(g)},100),o.destroy(),o.success(`å°é¢å·²ä¿å­˜ä¸º: ${c}`);return}catch(i){console.warn("Fetchæ–¹æ³•å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ³•:",i);const n=document.createElement("a");n.href=t,n.download=c,n.target="_blank",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),o.destroy(),o.success("å·²æ‰“å¼€ä¸‹è½½é“¾æ¥ï¼Œè¯·æ‰‹åŠ¨ä¿å­˜")}}catch(c){o.destroy(),console.error("ä¸‹è½½å°é¢å¤±è´¥:",c),o.error(`ä¿å­˜å¤±è´¥: ${c instanceof Error?c.message:"æœªçŸ¥é”™è¯¯"}`)}},[]),rt=async t=>{const{file:l,onSuccess:c,onError:i}=t;if(!a){o.warning("æ–°å»ºç³»åˆ—æ—¶è¯·ç›´æ¥å¡«å†™å°é¢URLï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹å°é¢"),i?.(new Error("æ–°å»ºæ¨¡å¼ä¸æ”¯æŒæ–‡ä»¶ä¸Šä¼ "));return}try{de(!0),te(0);const n=l;if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(n.type))throw new Error("ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œè¯·ä¸Šä¼  JPEGã€PNGã€WebP æˆ– GIF å›¾ç‰‡");const j=10*1024*1024;if(n.size>j)throw new Error("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 10MB");console.log("[ä¸Šä¼ ] å¼€å§‹è·å–é¢„ç­¾å URL",{seriesId:a.id,filename:n.name,contentType:n.type,fileSize:n.size});const y=await v.getPresignedUploadUrl(a.id,{filename:n.name,contentType:n.type||"image/jpeg"});console.log("[ä¸Šä¼ ] è·å–é¢„ç­¾å URL æˆåŠŸ",y),await new Promise((z,re)=>{const u=new XMLHttpRequest;u.upload.addEventListener("progress",S=>{if(S.lengthComputable){const ke=Math.round(S.loaded/S.total*100);te(ke),console.log("[ä¸Šä¼ ] è¿›åº¦:",ke+"%")}}),u.addEventListener("load",()=>{if(console.log("[ä¸Šä¼ ] è¯·æ±‚å®Œæˆ",{status:u.status,statusText:u.statusText,responseText:u.responseText}),u.status===200||u.status===204)console.log("[ä¸Šä¼ ] ä¸Šä¼ åˆ° R2 æˆåŠŸ"),z();else{const S=`ä¸Šä¼ å¤±è´¥ (çŠ¶æ€ç : ${u.status})${u.responseText?": "+u.responseText:""}`;console.error("[ä¸Šä¼ ] å¤±è´¥:",S),re(new Error(S))}}),u.addEventListener("error",S=>{console.error("[ä¸Šä¼ ] ç½‘ç»œé”™è¯¯:",S),console.error("[ä¸Šä¼ ] å¯èƒ½çš„åŸå› : CORS é…ç½®é—®é¢˜ã€ç½‘ç»œä¸­æ–­ã€æˆ– R2 è®¿é—®æƒé™é—®é¢˜"),re(new Error("ä¸Šä¼ å¤±è´¥ï¼šç½‘ç»œé”™è¯¯æˆ– CORS é…ç½®é—®é¢˜"))}),u.addEventListener("abort",()=>{console.warn("[ä¸Šä¼ ] ä¸Šä¼ å·²å–æ¶ˆ"),re(new Error("ä¸Šä¼ å·²å–æ¶ˆ"))}),console.log("[ä¸Šä¼ ] å¼€å§‹ä¸Šä¼ åˆ° R2",{url:y.uploadUrl.substring(0,100)+"...",contentType:n.type||"image/jpeg"}),u.open("PUT",y.uploadUrl),u.setRequestHeader("Content-Type",n.type||"image/jpeg"),u.send(n)}),await v.notifyUploadComplete(a.id,{fileKey:y.fileKey,publicUrl:y.publicUrl,fileSize:n.size}),b.setFieldsValue({coverUrl:y.publicUrl}),A(y.publicUrl),o.success("å°é¢å·²ä¸Šä¼ åˆ° R2 å­˜å‚¨"),p(B,k),c?.({})}catch(n){i?.(n instanceof Error?n:new Error(String(n))),o.error(`å°é¢ä¸Šä¼ å¤±è´¥: ${n instanceof Error?n.message:String(n)}`)}finally{de(!1),te(0)}},ot=async()=>{if(!a){o.warning("æ–°å»ºç³»åˆ—æ—¶è¯·ç›´æ¥å¡«å†™å°é¢URLï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹å°é¢");return}if(!Q||!/^https?:\/\//i.test(Q)){o.warning("è¯·è¾“å…¥æœ‰æ•ˆçš„å°é¢ URL");return}try{pe(!0),await v.coverFromUrl(a.id,Q.trim());const t=await v.get(a.id);b.setFieldsValue({coverUrl:t.coverUrl}),A(t.coverUrl),o.success("å·²é€šè¿‡ URL æ›´æ–°å°é¢"),he(""),p(B,k)}catch{o.error("é€šè¿‡ URL ä¸Šä¼ å°é¢å¤±è´¥")}finally{pe(!1)}},ct=s.useMemo(()=>[{title:"ID",dataIndex:"id",width:80},{title:"æ ‡é¢˜",dataIndex:"title",width:200},{title:"æè¿°",dataIndex:"description",width:300,ellipsis:{showTitle:!1},render:t=>e.jsx(ht,{placement:"topLeft",title:t||"æ— æè¿°",children:e.jsx("span",{style:{cursor:"pointer"},children:t||e.jsx("span",{style:{color:"#ccc"},children:"æ— æè¿°"})})})},{title:"å°é¢",dataIndex:"coverUrl",width:100,render:(t,l)=>t?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:t,alt:"cover",style:{width:56,height:56,objectFit:"cover",borderRadius:6,cursor:"pointer",transition:"opacity 0.2s"},onClick:()=>ae(l),onMouseEnter:c=>{c.currentTarget.style.opacity="0.8"},onMouseLeave:c=>{c.currentTarget.style.opacity="1"}}),e.jsx("div",{style:{position:"absolute",top:2,right:2,background:"rgba(0,0,0,0.6)",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>ae(l),children:e.jsx(vt,{style:{color:"white",fontSize:10}})})]}):"-"},{title:"åˆ†ç±»",dataIndex:"categoryId",width:120,render:t=>t==null?e.jsx("span",{style:{color:"#999"},children:"æœªåˆ†ç±»"}):fe[String(t)]||`ID:${t}`},{title:"åˆ›å»ºæ—¶é—´",dataIndex:"createdAt",width:150,render:t=>G(t)},{title:"æ›´æ–°æ—¶é—´",dataIndex:"updatedAt",width:150,render:t=>G(t)},{title:"æ“ä½œ",width:420,render:(t,l)=>e.jsx(I,{children:E==="deleted"?e.jsx(x,{type:"link",onClick:async()=>{try{await v.restore(l.id),o.success("å·²æ¢å¤"),p()}catch{o.error("æ¢å¤å¤±è´¥")}},children:"æ¢å¤"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:()=>Se(l),type:"link",children:"ç¼–è¾‘"}),e.jsx(x,{onClick:()=>Ie(l),danger:!0,type:"link",children:"åˆ é™¤"}),e.jsx(x,{type:"link",onClick:()=>Ce(l),children:"æŸ¥çœ‹å‰§é›†"}),e.jsx(x,{type:"link",onClick:()=>be(l),children:"ç®¡ç†å‰§é›†"})]})})}],[Ie,Se,be,Ce,ae,E,p,fe]),dt=s.useCallback(async()=>{try{const t=await b.validateFields();if(t.releaseDate&&Ee.isDayjs(t.releaseDate)&&(t.releaseDate=t.releaseDate.format("YYYY-MM-DD")),a)X(t),W(!0);else{const l=await v.create(t);o.success("ç³»åˆ—åˆ›å»ºæˆåŠŸï¼"),U.confirm({title:"åˆ›å»ºæˆåŠŸ",content:"æ˜¯å¦ç°åœ¨æ‰¹é‡ä¸Šä¼ å‰§é›†ï¼Ÿ",okText:"æ‰¹é‡ä¸Šä¼ ",cancelText:"ç¨åä¸Šä¼ ",onOk:()=>{ge(l.id||l.data?.id),F(!0),ye(0)},onCancel:()=>{C(!1),A(null),p()}})}}catch(t){console.error("Form validation failed:",t),o.error("æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥è¡¨å•")}},[a,b,p]);return e.jsxs("div",{className:"page",children:[e.jsxs(I,{className:"page-toolbar",wrap:!0,children:[e.jsx(x,{type:"primary",onClick:tt,children:"æ–°å»ºç³»åˆ—"}),e.jsx(ut,{options:[{label:"æ­£å¸¸",value:"active"},{label:"å›æ”¶ç«™",value:"deleted"}],value:E,onChange:t=>ze(t)}),e.jsx(r,{placeholder:"é€‰æ‹©ç±»å‹",style:{width:150},allowClear:!0,value:D,onChange:t=>{Ze(t),p(1,k,T,t)},options:we}),e.jsx(f,{placeholder:"æœç´¢ç³»åˆ—ï¼ˆæ ‡é¢˜å…³é”®å­—ï¼‰",style:{width:280},allowClear:!0,onChange:t=>{const l=t.target.value||"";Xe(l),ne.current&&window.clearTimeout(ne.current),ne.current=window.setTimeout(()=>{p(1,k,l,D)},300)}}),e.jsx(x,{onClick:()=>p(),children:"åˆ·æ–°"})]}),e.jsx(Te,{rowKey:"id",loading:Ue,dataSource:Re,columns:ct,scroll:{x:1400},pagination:{current:B,pageSize:k,total:Oe,position:["bottomCenter"],onChange:(t,l)=>p(t,l,T)}}),e.jsx(xt,{title:se?`ç³»åˆ—ã€Œ${se.title}ã€çš„å‰§é›†`:"å‰§é›†",open:Ge,onClose:()=>me(!1),width:720,children:e.jsx(Te,{rowKey:"id",loading:He,dataSource:Ve,columns:[{title:"ID",dataIndex:"id",width:100},{title:"é›†æ•°",dataIndex:"episodeNumber",width:80},{title:"æ ‡é¢˜",dataIndex:"title"},{title:"æ—¶é•¿(ç§’)",dataIndex:"duration",width:100},{title:"çŠ¶æ€",dataIndex:"status",width:100}],pagination:{current:le,pageSize:R,total:Ke,position:["bottomCenter"],onChange:(t,l)=>{ie(se.id,t,l)}}})}),e.jsx(U,{title:a?"ç¼–è¾‘ç³»åˆ—":"æ–°å»ºç³»åˆ—",open:Be,onCancel:()=>C(!1),onOk:dt,okText:"ä¿å­˜",cancelText:"å–æ¶ˆ",width:900,style:{top:20},children:e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",paddingRight:8},children:[a&&e.jsxs("div",{style:{background:"#f5f5f5",padding:"16px",borderRadius:"8px",marginBottom:"20px"},children:[e.jsx(h.Title,{level:5,style:{marginTop:0,marginBottom:12},children:"ğŸ“Š åªè¯»ä¿¡æ¯"}),e.jsxs(I,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"ID:"}),e.jsx(h.Text,{strong:!0,children:a.id})]}),a.shortId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(h.Text,{type:"secondary",children:"Short ID:"}),e.jsxs(I,{children:[e.jsx(h.Text,{code:!0,children:a.shortId}),e.jsx(x,{size:"small",icon:e.jsx(Ct,{}),onClick:()=>{navigator.clipboard.writeText(a.shortId||""),o.success("Short ID å·²å¤åˆ¶")}})]})]}),a.externalId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"External ID:"}),e.jsx(h.Text,{code:!0,children:a.externalId})]}),a.playCount!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"æ’­æ”¾æ¬¡æ•°:"}),e.jsx(h.Text,{strong:!0,children:a.playCount.toLocaleString()})]}),a.totalEpisodes!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"æ€»é›†æ•°:"}),e.jsx(h.Text,{strong:!0,children:a.totalEpisodes})]}),a.createdAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"åˆ›å»ºæ—¶é—´:"}),e.jsx(h.Text,{children:G(a.createdAt)})]}),a.updatedAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"æ›´æ–°æ—¶é—´:"}),e.jsx(h.Text,{children:G(a.updatedAt)})]})]})]}),e.jsxs(d,{form:b,layout:"vertical",children:[e.jsx(P,{orientation:"left",children:"ğŸ“„ åŸºæœ¬ä¿¡æ¯"}),e.jsx(d.Item,{name:"title",label:"æ ‡é¢˜",rules:[{required:!0,message:"è¯·è¾“å…¥æ ‡é¢˜"}],children:e.jsx(f,{placeholder:"è¯·è¾“å…¥ç³»åˆ—æ ‡é¢˜"})}),e.jsx(d.Item,{name:"description",label:"æè¿°",children:e.jsx(f.TextArea,{rows:3,placeholder:"è¯·è¾“å…¥ç³»åˆ—æè¿°"})}),e.jsx(d.Item,{name:"coverUrl",label:"å°é¢åœ°å€",children:e.jsx(f,{placeholder:"å¯ç›´æ¥å¡«å†™å°é¢ URLï¼Œæˆ–åœ¨ä¸‹æ–¹é€‰æ‹©å›¾ç‰‡æ–‡ä»¶",onChange:t=>{const l=t.target.value;l&&q(l)?A(l):l||A(null)}})}),(ue||a?.coverUrl&&q(a.coverUrl))&&e.jsxs("div",{style:{marginBottom:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:14,color:"#666",marginBottom:8},children:"å°é¢é¢„è§ˆï¼š"}),e.jsx(De,{src:ue||a?.coverUrl,alt:"cover preview",style:{maxWidth:"100%",maxHeight:200,objectFit:"contain"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN"})]}),a&&e.jsx("div",{style:{marginBottom:16},children:e.jsxs(I,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(I,{align:"start",style:{width:"100%",justifyContent:"space-between"},children:[e.jsx(gt,{accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",showUploadList:!1,customRequest:rt,disabled:_,children:e.jsx(x,{loading:_,children:"ä¸Šä¼ å°é¢æ–‡ä»¶"})}),e.jsxs(I,{children:[e.jsx(f,{placeholder:"é€šè¿‡å°é¢ URL æ›´æ–°",style:{width:320},value:Q,onChange:t=>he(t.target.value)}),e.jsx(x,{loading:Pe,onClick:ot,children:"æ›´æ–°å°é¢"})]})]}),_&&ee>0&&e.jsx("div",{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:8,background:"#f0f0f0",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",background:"#1890ff",width:`${ee}%`,transition:"width 0.3s ease"}})}),e.jsxs("span",{style:{fontSize:12,color:"#666",minWidth:40},children:[ee,"%"]})]})})]})}),!a&&e.jsx("div",{style:{marginBottom:16,padding:"12px 16px",background:"#f6f8fa",borderRadius:6,border:"1px solid #e1e4e8"},children:e.jsx("div",{style:{fontSize:14,color:"#586069",marginBottom:8},children:"ğŸ’¡ æç¤ºï¼šæ–°å»ºç³»åˆ—æ—¶è¯·ç›´æ¥å¡«å†™å°é¢URLï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹å°é¢"})}),e.jsx(P,{orientation:"left",children:"ğŸ‘¥ äººå‘˜ä¿¡æ¯"}),e.jsx(d.Item,{name:"starring",label:"ä¸»æ¼”",tooltip:"å¤šä¸ªä¸»æ¼”ç”¨é€—å·åˆ†éš”",children:e.jsx(f,{placeholder:"å¦‚ï¼šå¼ ä¸‰,æå››,ç‹äº”"})}),e.jsx(d.Item,{name:"actor",label:"æ¼”å‘˜",tooltip:"å¤šä¸ªæ¼”å‘˜ç”¨é€—å·åˆ†éš”",children:e.jsx(f,{placeholder:"å¦‚ï¼šå¼ ä¸‰,æå››,ç‹äº”,èµµå…­"})}),e.jsx(d.Item,{name:"director",label:"å¯¼æ¼”",tooltip:"å¤šä¸ªå¯¼æ¼”ç”¨é€—å·åˆ†éš”",children:e.jsx(f,{placeholder:"å¦‚ï¼šé™ˆå¯¼,åˆ˜å¯¼"})}),e.jsx(P,{orientation:"left",children:"ğŸ·ï¸ åˆ†ç±»ä¿¡æ¯"}),e.jsx(d.Item,{name:"categoryId",label:"åˆ†ç±»",children:e.jsx(r,{placeholder:"è¯·é€‰æ‹©åˆ†ç±»",allowClear:!0,options:we,showSearch:!0,filterOption:(t,l)=>(l?.label??"").toLowerCase().includes(t.toLowerCase())})}),e.jsxs(Y,{gutter:16,children:[e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"region",label:"åœ°åŒº",children:e.jsxs(r,{placeholder:"è¯·é€‰æ‹©åœ°åŒº",allowClear:!0,children:[e.jsx(r.Option,{value:"å¤§é™†",children:"å¤§é™†"}),e.jsx(r.Option,{value:"é¦™æ¸¯",children:"é¦™æ¸¯"}),e.jsx(r.Option,{value:"å°æ¹¾",children:"å°æ¹¾"}),e.jsx(r.Option,{value:"ç¾å›½",children:"ç¾å›½"}),e.jsx(r.Option,{value:"éŸ©å›½",children:"éŸ©å›½"}),e.jsx(r.Option,{value:"æ—¥æœ¬",children:"æ—¥æœ¬"}),e.jsx(r.Option,{value:"æ³°å›½",children:"æ³°å›½"}),e.jsx(r.Option,{value:"å…¶ä»–",children:"å…¶ä»–"})]})})}),e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"language",label:"è¯­è¨€",children:e.jsxs(r,{placeholder:"è¯·é€‰æ‹©è¯­è¨€",allowClear:!0,children:[e.jsx(r.Option,{value:"å›½è¯­",children:"å›½è¯­"}),e.jsx(r.Option,{value:"ç²¤è¯­",children:"ç²¤è¯­"}),e.jsx(r.Option,{value:"è‹±è¯­",children:"è‹±è¯­"}),e.jsx(r.Option,{value:"éŸ©è¯­",children:"éŸ©è¯­"}),e.jsx(r.Option,{value:"æ—¥è¯­",children:"æ—¥è¯­"}),e.jsx(r.Option,{value:"æ³°è¯­",children:"æ³°è¯­"})]})})})]}),e.jsxs(Y,{gutter:16,children:[e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"status",label:"çŠ¶æ€",children:e.jsxs(r,{placeholder:"è¯·é€‰æ‹©çŠ¶æ€",allowClear:!0,children:[e.jsx(r.Option,{value:"å®Œç»“",children:"å®Œç»“"}),e.jsx(r.Option,{value:"è¿è½½",children:"è¿è½½"})]})})}),e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"year",label:"å¹´ä»½",children:e.jsx(r,{placeholder:"è¯·é€‰æ‹©å¹´ä»½",allowClear:!0,children:Array.from({length:10},(t,l)=>new Date().getFullYear()-l).map(t=>e.jsx(r.Option,{value:String(t),children:t},t))})})})]}),e.jsx(P,{orientation:"left",children:"ğŸ“… çŠ¶æ€ä¿¡æ¯"}),e.jsxs(Y,{gutter:16,children:[e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"score",label:"è¯„åˆ†",tooltip:"0-10åˆ†",children:e.jsx(f,{type:"number",step:"0.1",min:0,max:10,placeholder:"å¦‚ï¼š8.5"})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"upStatus",label:"æ›´æ–°çŠ¶æ€",children:e.jsxs(r,{placeholder:"è¯·é€‰æ‹©",allowClear:!0,children:[e.jsx(r.Option,{value:"æ›´æ–°ä¸­",children:"æ›´æ–°ä¸­"}),e.jsx(r.Option,{value:"å·²å®Œç»“",children:"å·²å®Œç»“"})]})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"upCount",label:"æ›´æ–°æ¬¡æ•°",children:e.jsx(f,{type:"number",min:0,placeholder:"æ›´æ–°æ¬¡æ•°"})})})]}),e.jsxs(Y,{gutter:16,children:[e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"releaseDate",label:"å‘å¸ƒæ—¥æœŸ",children:e.jsx(jt,{style:{width:"100%"},placeholder:"é€‰æ‹©å‘å¸ƒæ—¥æœŸ",format:"YYYY-MM-DD"})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"isCompleted",label:"æ˜¯å¦å®Œç»“",children:e.jsxs(r,{placeholder:"è¯·é€‰æ‹©",allowClear:!0,children:[e.jsx(r.Option,{value:!0,children:"æ˜¯"}),e.jsx(r.Option,{value:!1,children:"å¦"})]})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"isActive",label:"æ˜¯å¦æ´»è·ƒ",children:e.jsxs(r,{placeholder:"è¯·é€‰æ‹©",allowClear:!0,children:[e.jsx(r.Option,{value:1,children:"æ­£å¸¸"}),e.jsx(r.Option,{value:0,children:"å·²åˆ é™¤"})]})})})]})]})]})}),e.jsx(U,{title:"ç¡®è®¤åˆ é™¤",open:Le,onOk:st,onCancel:lt,okText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",okType:"danger",children:e.jsxs("p",{children:["ç¡®å®šè¦åˆ é™¤ç³»åˆ—ã€Œ",L?.title,"ã€å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"]})}),e.jsx(U,{title:"ç¡®è®¤ä¿®æ”¹",open:Me,onOk:nt,onCancel:it,okText:"ç¡®è®¤ä¿®æ”¹",cancelText:"å–æ¶ˆ",children:e.jsxs("p",{children:["ç¡®å®šè¦ä¿®æ”¹ç³»åˆ—ã€Œ",M?.title,"ã€å—ï¼Ÿ"]})}),e.jsx(U,{title:`å°é¢é¢„è§ˆ - ${m?.title}`,open:Qe,onCancel:()=>Z(!1),footer:[e.jsx(x,{onClick:()=>Z(!1),children:"å…³é—­"},"close"),e.jsx(x,{onClick:()=>{m&&navigator.clipboard.writeText(m.url).then(()=>{o.success("å°é¢åœ°å€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(()=>{o.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")})},children:"å¤åˆ¶åœ°å€"},"copy"),e.jsx(x,{type:"primary",icon:e.jsx(bt,{}),onClick:()=>{if(m){const t=m.url.split("."),l=t.length>1?t[t.length-1].split("?")[0]:"jpg",i=`${m.title.replace(/[<>:"/\\|?*]/g,"_")}_cover.${l}`;at(m.url,i)}},children:"ä¿å­˜å°é¢"},"download")],width:600,centered:!0,children:m&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(De,{src:m.url,alt:m.title,style:{maxWidth:"100%",maxHeight:"400px"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN"}),e.jsxs("div",{style:{marginTop:16,fontSize:14,color:"#666"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ç³»åˆ—æ ‡é¢˜ï¼š"}),m.title]}),e.jsx("p",{children:e.jsx("strong",{children:"å°é¢åœ°å€ï¼š"})}),e.jsx("div",{style:{background:"#f5f5f5",padding:"8px 12px",borderRadius:4,wordBreak:"break-all",fontSize:12,fontFamily:"Monaco, Menlo, monospace"},children:m.url})]})]})}),e.jsx(U,{title:"æ‰¹é‡ä¸Šä¼ å‰§é›†",open:Ye,onCancel:()=>{F(!1),ge(null),ye(0),C(!1),A(null),p()},footer:null,width:800,children:e.jsxs(yt,{children:[e.jsx(mt,{current:je,items:[{title:"é€‰æ‹©æ–¹å¼",description:"é€‰æ‹©ä¸Šä¼ æ–¹å¼"},{title:"ä¸Šä¼ å‰§é›†",description:"æ‰¹é‡ä¸Šä¼ å‰§é›†ä¿¡æ¯"},{title:"å®Œæˆ",description:"ä¸Šä¼ å®Œæˆ"}],style:{marginBottom:24}}),je===0&&e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px"},children:[e.jsx(h.Title,{level:4,children:"é€‰æ‹©å‰§é›†ä¸Šä¼ æ–¹å¼"}),e.jsxs(I,{direction:"vertical",size:"large",style:{marginTop:32},children:[e.jsx(x,{type:"primary",size:"large",onClick:()=>{o.info("è·³è½¬åˆ°å‰§é›†ç®¡ç†é¡µé¢"),O(`/episodes?seriesId=${xe}`),F(!1),C(!1),A(null)},style:{width:300,height:60},children:"å‰å¾€å‰§é›†ç®¡ç†é¡µé¢é€ä¸ªæ·»åŠ "}),e.jsx(x,{size:"large",onClick:()=>{o.info("æ‰¹é‡å¯¼å…¥åŠŸèƒ½å¼€å‘ä¸­ï¼Œè¯·ä½¿ç”¨å‰§é›†ç®¡ç†é¡µé¢"),O(`/episodes?seriesId=${xe}`),F(!1),C(!1),A(null)},style:{width:300,height:60},children:"æ‰¹é‡å¯¼å…¥ï¼ˆå¼€å‘ä¸­ï¼‰"})]}),e.jsx("div",{style:{marginTop:32,padding:16,background:"#f6f8fa",borderRadius:8},children:e.jsx(h.Text,{type:"secondary",children:"ğŸ’¡ æç¤ºï¼šåˆ›å»ºç³»åˆ—åï¼Œæ‚¨å¯ä»¥åœ¨å‰§é›†ç®¡ç†é¡µé¢æ·»åŠ å’Œç®¡ç†è¯¥ç³»åˆ—çš„æ‰€æœ‰å‰§é›†"})})]})]})})]})}export{Lt as default};
