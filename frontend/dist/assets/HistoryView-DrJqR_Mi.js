import{d as H,r as d,l as L,b as u,c as n,f as s,w as a,F as h,e as B,i as y,x as X,h as N,t as g,o as l,R as k,_ as O}from"./index-BQbrX0z1.js";import{S as Y,a as F}from"./index-BRFuJgmd.js";import{P as G}from"./index-DPVNirl3.js";import{L as P}from"./index-CaOxaCLw.js";import{C as K}from"./index-CsXdeD3I.js";import{T,a as V}from"./index-CNV0hqDs.js";import{N as j}from"./index-DmUNZml2.js";import{s as z}from"./request-4vVFd-gk.js";import"./index-Bg4L8zOy.js";import"./use-route-YVm2SLx8.js";import"./use-id-FTPuvNfh.js";import"./use-placeholder-alxJclYt.js";const W={class:"flex h_100_vh flex_direction-column"},q={class:"tabs flex_none"},Z={class:"flex_auto overflow-hidden page_content"},$={class:"load-box"},ee={class:"scroll-box"},te={class:"left flex_none"},se={class:"my-image"},ae={class:"van-image"},oe=["src"],le={class:"right flex_auto overflow-hidden"},ne={key:0},re={key:1},ie=H({__name:"HistoryView",setup(Ae){const C=d(0),r=d(!1),f=d(!1),v=d(!1),m=d(!1);let p=1;const _=d([]),E=async(i=1,e=20)=>{try{const o=await z.get("/api/video/browse-history",{params:{page:i,size:e}}),A=o.data.data.list.length??0;f.value=A===0||A<e,_.value.push(...o.data.data.list??[])}catch(o){console.error(o),v.value=!0,p--}},R=i=>{const e=Math.floor(i/3600),o=Math.floor(i%3600/60),A=i%60,S=e>0?String(e).padStart(2,"0")+":":"",w=String(o).padStart(2,"0"),b=String(A).padStart(2,"0");return S+w+":"+b};L(async()=>{r.value=!0,await E(),r.value=!1});const U=async()=>{f.value=!1,p=1,_.value=[],m.value=!0,await E(),m.value=!1},Q=async()=>{p++,r.value=!0,await E(p),r.value=!1},x=()=>{window.history.state?.back?k.back():k.push("/")};return(i,e)=>{const o=j,A=V,S=T,w=N("RouterLink"),b=K,D=P,I=G,J=F,M=Y;return l(),u("div",W,[n(o,{title:"历史记录","left-arrow":"",class:"relative nav-bar",style:{color:"aliceblue"},onClickLeft:x},{left:a(()=>e[4]||(e[4]=[s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),right:a(()=>e[5]||(e[5]=[])),_:1}),s("div",q,[n(S,{active:C.value,"onUpdate:active":e[0]||(e[0]=c=>C.value=c),"line-width":"3vw","line-height":"0.8vw",background:"transparent","title-active-color":"#e3e3e5"},{default:a(()=>[(l(),u(h,null,B(["剧集"],c=>n(A,{title:c,key:c},null,8,["title"])),64))]),_:1},8,["active"])]),s("div",Z,[n(M,null,{default:a(()=>[(l(),u(h,null,B(["剧集"],c=>n(J,{key:c},{default:a(()=>[s("div",$,[s("div",ee,[n(I,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),onRefresh:U,"success-text":"刷新成功"},{default:a(()=>[n(D,{"immediate-check":!1,loading:r.value,"onUpdate:loading":e[1]||(e[1]=t=>r.value=t),finished:f.value,"finished-text":"没有更多了",onLoad:Q,class:"series_list",error:v.value,"onUpdate:error":e[2]||(e[2]=t=>v.value=t),"error-text":"请求失败，点击重新加载"},{default:a(()=>[(l(!0),u(h,null,B(_.value,t=>(l(),y(b,{key:t.seriesShortId,style:{background:"#101012",padding:"0"},border:!1},{default:a(()=>[t.seriesShortId?(l(),y(w,{key:0,class:"flex",to:{name:"play",params:{id:t.seriesShortId}}},{default:a(()=>[e[6]||(e[6]=s("div",{class:"select flex_none",style:{display:"none"}},[s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAX9JREFUaEPtmb1KA0EUhb8JBEQDIsRSLazS7BsIi1aWVrGx9jX0BezzCFrYWgk+Qwq1sFBTmlLSBIwMEpzC2RnmZzeLd8vduXfPd87MLOwoWn6plutHAJpOUBKQBCIdqJ5CD4tjYATsRL4ntHwCnFOqO1sDF8B7g+KXmieUajcUYBFqXdK6UlmNdiUgAEmSkASS2BjRRBKIMC9JqSSQxMaIJpJAhHm20pM+DLfh7Bnmrs/lqiWgxV8PoNuB4SPcfDgcWiUAU/zFK1y+ecSbE6DYgKt9OH2C6bxaTJB43TInwH0Bh1sw/oSjsR0iWHxugH4XNETRs0NEic8NoPtXQUSLrwPABnGw+bvbeC/Yv5ZRzjVgvs9M4mUGe2s/W2WU+LoSWIKYEPpetPi6AczpdDv13Oddn4K6ppCpY70Dsy+XMs/nTQB4SvMbJgB+PuUbJQnk89avsyTg51O+Uf85gdb/Xm/5AUe+WZ2ss5xSJrMysJEkEGhcsjJJIJmVgY2+AQFptjFm78WRAAAAAElFTkSuQmCC",alt:"",style:{display:"none"}}),s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAQ1JREFUaEPtmcENwkAMBG36gEagASrhGUfUgeI8qYQGoBHog0N55EfCaiMRnbR5e2/t2fPn4lb555X3bxpg7QSVgBJYSGD2CkWcj2bvaym2XehDyd3tZbY5ZV5uUwf8GKB9rtX82PAwRGa3owZomrYMQvdyyMwHhZEURcS+FL8P8r7vJkHPJjAOMHcA2R8kQ/w1AISSLFICCAESLiRD/LUDEEqySAkgBEi4kAzx1w5AKMkiJYAQIOFCMsRfOwChJIuUAEKAhAvJEH/tAISSLFICCAESLiRD/LUDEEqySAkgBEi4kAzx1w5AKMkiJVD9425E5c/r1f/gIHfvrzL9pfwr7i9mSkAJLCRQ/RX6AOwKGEBPows1AAAAAElFTkSuQmCC",alt:""})],-1)),s("div",te,[s("div",se,[s("div",ae,[s("img",{class:"van-image__img",src:t.seriesCoverUrl,lazy:"loaded",style:{"object-fit":"fill"}},null,8,oe)])])]),s("div",le,[s("h2",null,g(t.seriesTitle),1),t.lastEpisodeNumber?(l(),u("p",ne," 观看至"+g(t.lastEpisodeNumber<10?"0"+t.lastEpisodeNumber:t.lastEpisodeNumber)+"集 ",1)):(l(),u("p",re,"未观看")),s("p",null,g(t.lastVisitTime),1),s("p",null," 播放进度"+g(R(t.durationSeconds)),1)])]),_:2,__:[6]},1032,["to"])):X("",!0)]),_:2},1024))),128))]),_:1},8,["loading","finished","error"])]),_:1},8,["modelValue"])])])]),_:2},1024)),64))]),_:1})])])}}}),be=O(ie,[["__scopeId","data-v-b142fbcb"]]);export{be as default};
