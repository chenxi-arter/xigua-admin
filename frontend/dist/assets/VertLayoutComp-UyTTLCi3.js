import{d as V,c as e,a as ee,m as le,u as ne,p as re,r as b,J as de,k as ce,l as Z,n as ue,L as pe,E as ve,b as S,o as g,y as N,f as p,i as M,x as T,q as O,t as z,z as me,F as A,e as j,w as D,_ as J,A as he,D as fe}from"./index-V2mQOXEr.js";import{C as oe}from"./index-DW2_JbVY.js";import{S as ge,a as ye}from"./swiper-vue-MJ59XXuh.js";import{N as we,H as xe,P as be}from"./index.min-LysdIuF2.js";import{s as G,a as L,L as ke,P as _e}from"./request-BggL3h3p.js";import{v as Ce,c as Y,D as Fe,w as Q,m as Se,n as K,t as te,u as Ee,k as W,E as Ie,e as Be,b as De,G as Pe,d as $e,I as X}from"./index-CMZZgkkz.js";import{L as ze}from"./index-DNBLbism.js";import{u as Ge}from"./use-id-C3Qyt5Qs.js";import{u as Me,r as Ve}from"./use-route-CF4S8z_B.js";const[Re,q]=Y("empty"),Ue={image:Ce("default"),imageSize:[Number,String,Array],description:String};var Ne=V({name:Re,props:Ue,setup(d,{slots:v}){const h=()=>{const i=v.description?v.description():d.description;if(i)return e("p",{class:q("description")},[i])},w=()=>{if(v.default)return e("div",{class:q("bottom")},[v.default()])},m=Ge(),l=i=>`${m}-${i}`,s=i=>`url(#${l(i)})`,n=(i,r,I)=>e("stop",{"stop-color":i,offset:`${r}%`,"stop-opacity":I},null),o=(i,r)=>[n(i,0),n(r,100)],c=i=>[e("defs",null,[e("radialGradient",{id:l(i),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)","data-allow-mismatch":"attribute"},[n("#EBEDF0",0),n("#F2F3F5",100,.3)])]),e("ellipse",{fill:s(i),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8","data-allow-mismatch":"attribute"},null)],x=()=>[e("defs",null,[e("linearGradient",{id:l("a"),x1:"64%",y1:"100%",x2:"64%","data-allow-mismatch":"attribute"},[n("#FFF",0,.5),n("#F2F3F5",100)])]),e("g",{opacity:".8","data-allow-mismatch":"children"},[e("path",{d:"M36 131V53H16v20H2v58h34z",fill:s("a")},null),e("path",{d:"M123 15h22v14h9v77h-31V15z",fill:s("a")},null)])],f=()=>[e("defs",null,[e("linearGradient",{id:l("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%","data-allow-mismatch":"attribute"},[n("#F2F3F5",0,.3),n("#F2F3F5",100)])]),e("g",{opacity:".8","data-allow-mismatch":"children"},[e("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:s("b")},null),e("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:s("b")},null)])],a=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",{"data-allow-mismatch":"children"},[e("linearGradient",{id:l(1),x1:"64%",y1:"100%",x2:"64%"},[n("#FFF",0,.5),n("#F2F3F5",100)]),e("linearGradient",{id:l(2),x1:"50%",x2:"50%",y2:"84%"},[n("#EBEDF0",0),n("#DCDEE0",100,0)]),e("linearGradient",{id:l(3),x1:"100%",x2:"100%",y2:"100%"},[o("#EAEDF0","#DCDEE0")]),e("radialGradient",{id:l(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[n("#EBEDF0",0),n("#FFF",100,0)])]),e("g",{fill:"none"},[x(),e("path",{fill:s(4),d:"M0 139h160v21H0z","data-allow-mismatch":"attribute"},null),e("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:s(2),"data-allow-mismatch":"attribute"},null),e("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7","data-allow-mismatch":"children"},[e("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:s(3)},null),e("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:s(3)},null),e("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:s(3)},null),e("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:s(3)},null)]),e("g",{transform:"translate(31 105)"},[e("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),e("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),e("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),k=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",{"data-allow-mismatch":"children"},[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(5)},[o("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:l(6)},[o("#EAEDF1","#DCDEE0")]),e("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:l(7)},[o("#EAEDF1","#DCDEE0")])]),x(),f(),e("g",{transform:"translate(36 50)",fill:"none"},[e("g",{transform:"translate(8)"},[e("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),e("rect",{fill:s(5),width:"64",height:"66",rx:"2","data-allow-mismatch":"attribute"},null),e("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),e("g",{transform:"translate(15 17)",fill:s(6),"data-allow-mismatch":"attribute"},[e("rect",{width:"34",height:"6",rx:"1"},null),e("path",{d:"M0 14h34v6H0z"},null),e("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),e("rect",{fill:s(7),y:"61",width:"88",height:"28",rx:"1","data-allow-mismatch":"attribute"},null),e("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),y=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(8),"data-allow-mismatch":"attribute"},[o("#EAEDF1","#DCDEE0")])]),x(),f(),c("c"),e("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:s(8),"data-allow-mismatch":"attribute"},null)]),E=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",{"data-allow-mismatch":"children"},[e("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:l(9)},[o("#EEE","#D8D8D8")]),e("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:l(10)},[o("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(11)},[o("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(12)},[o("#FFF","#F7F8FA")])]),x(),f(),c("d"),e("g",{transform:"rotate(-45 113 -4)",fill:"none","data-allow-mismatch":"children"},[e("rect",{fill:s(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),e("rect",{fill:s(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),e("circle",{stroke:s(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),e("circle",{fill:s(12),cx:"27",cy:"27",r:"16"},null),e("path",{d:"M37 7c-8 0-15 5-16 12",stroke:s(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),$=()=>{var i;if(v.image)return v.image();const r={error:y,search:E,network:a,default:k};return((i=r[d.image])==null?void 0:i.call(r))||e("img",{src:d.image},null)};return()=>e("div",{class:q()},[e("div",{class:q("image"),style:Fe(d.imageSize)},[$()]),h(),w()])}});const Te=Q(Ne),[ae,Ae]=Y("grid"),Le={square:Boolean,center:te,border:te,gutter:K,reverse:Boolean,iconSize:K,direction:String,clickable:Boolean,columnNum:Se(4)},ie=Symbol(ae);var qe=V({name:ae,props:Le,setup(d,{slots:v}){const{linkChildren:h}=Ee(ie);return h({props:d}),()=>{var w;return e("div",{style:{paddingLeft:W(d.gutter)},class:[Ae(),{[Ie]:d.border&&!d.gutter}]},[(w=v.default)==null?void 0:w.call(v)])}}});const He=Q(qe),[Oe,H]=Y("grid-item"),je=Be({},Ve,{dot:Boolean,text:String,icon:String,badge:K,iconColor:String,iconPrefix:String,badgeProps:Object});var Ke=V({name:Oe,props:je,setup(d,{slots:v}){const{parent:h,index:w}=De(ie),m=Me();if(!h)return;const l=ee(()=>{const{square:x,gutter:f,columnNum:a}=h.props,k=`${100/+a}%`,y={flexBasis:k};if(x)y.paddingTop=k;else if(f){const E=W(f);y.paddingRight=E,w.value>=+a&&(y.marginTop=E)}return y}),s=ee(()=>{const{square:x,gutter:f}=h.props;if(x&&f){const a=W(f);return{right:a,bottom:a,height:"auto"}}}),n=()=>{if(v.icon)return e($e,le({dot:d.dot,content:d.badge},d.badgeProps),{default:v.icon});if(d.icon)return e(X,{dot:d.dot,name:d.icon,size:h.props.iconSize,badge:d.badge,class:H("icon"),color:d.iconColor,badgeProps:d.badgeProps,classPrefix:d.iconPrefix},null)},o=()=>{if(v.text)return v.text();if(d.text)return e("span",{class:H("text")},[d.text])},c=()=>v.default?v.default():[n(),o()];return()=>{const{center:x,border:f,square:a,gutter:k,reverse:y,direction:E,clickable:$}=h.props,i=[H("content",[E,{center:x,square:a,reverse:y,clickable:$,surround:f&&k}]),{[Pe]:f}];return e("div",{class:[H({square:a})],style:l.value},[e("div",{role:$?"button":void 0,class:i,style:s.value,tabindex:$?0:void 0,onClick:m},[c()])])}}});const We=Q(Ke),Ze={class:"play-box",style:{height:"100%"}},Je={class:"play-top absolute"},Ye={class:"play-right absolute"},Qe={class:"interactive"},Xe={class:"count"},et={class:"count"},tt={class:"count"},ot={class:"play-content"},at=["id"],it={class:"details"},st={class:"desc-txt title"},lt={key:0,class:"desc-txt actor"},nt={class:"wrapper"},rt={xmlns:"http://www.w3.org/2000/svg",class:"svg-icon",style:{width:"1em","margin-right":"6px",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",version:"1.1"},dt=V({__name:"VerticalPlayer",props:{video:{},active:{type:Boolean},isSeries:{type:Boolean},hdlCmtPopup:{type:Function}},emits:["update:video","goNext"],setup(d,{emit:v}){const h=ne(),w=re(),m=window.Telegram?.WebApp,l=new AbortController,s=b(null),n=b(null);let o=null;const c=b(!1),x=b(null),f=b(null),a=d,k=v,y=()=>{l.abort(),I(),w.replace({name:"discovery"})},E=()=>{const t=x.value;t&&(t.style.setProperty("--full-height",`${t.scrollHeight}px`),c.value=!c.value)},$=()=>{w.replace(`/series/${a.video.seriesShortId}`)},i=async t=>{if(!f.value){console.log("播放器加载失败");return}const u={el:f.value,playsinline:!0,plugins:t.includes(".m3u8")?[xe]:[],ignores:["volume","play","time","fullscreen","cssfullscreen"],playbackRate:!1,"x5-video-player-type":"h5","x5-video-player-fullscreen":"false","x5-video-orientation":"portraint",width:"100%",height:"101%",videoInit:!0,preload:"metadata",url:t,closeVideoDblclick:!0,closePauseVideoFocus:!1,closePlayVideoFocus:!1,controls:{autoHide:!1,mode:"bottom"},commonStyle:{playedColor:"rgba(150, 150, 150, 0.3)",progressColor:"rgba(95, 95, 95, 0.3)",sliderBtnStyle:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#fff",border:"none",boxShadow:"none"}},mobile:{gradient:"none",disableGesture:!0},start:{isShowPause:!0,disableAnimate:!0}};o=new be(u),o.on("click",()=>{o?.paused?o.play():o?.pause()}),o.once("ready",()=>{a.isSeries&&o?.root?.querySelector(".xg-left-grid")?.appendChild(n.value)}),!a.isSeries&&a.active&&o.play().catch(()=>{}),o.on("ended",()=>{a.isSeries?o?.play():k("goNext")})};de(()=>{o?.pause()}),ce(()=>{m?.initData&&(a.isSeries||(window.TelegramWebviewProxy.postEvent("web_app_request_fullscreen",null),m.BackButton.show(),m.BackButton.onClick(()=>{window.history.length>1?(y(),window.TelegramWebviewProxy.postEvent("web_app_exit_fullscreen",null),m.BackButton.hide()):m.close()}))),o&&a.active&&o.play().catch(()=>{})});const r=async()=>{try{const t=await G.post("/api/video/url/query",{type:"episode",accessKey:a.video.episodeAccessKey},{signal:l.signal}),u=t.data.urls||t.data.data?.urls;if(u&&u.length>0)return u[0].cdnUrl||u[0].ossUrl;throw new Error("无法获取播放地址")}catch(t){throw console.error("获取播放地址失败:",t),t}};Z(async()=>{if(await ue(),a.video.playUrl)i(a.video.playUrl);else{const t=await r();k("update:video",{...a.video,playUrl:t}),i(t)}}),pe(()=>{l.abort(),I()});const I=()=>{o&&(o.destroy(),o=null)};ve(()=>a.active,t=>{o&&(t?o.play().catch(()=>{}):o.pause())});const _=b(a.video.userInteraction?.liked||!1),B=b(a.video.userInteraction?.favorited||!1),R=async()=>{let t=0,u="";if(_.value)try{await G.post("/api/video/episode/reaction/remove",{shortId:a.video.shortId}),t=-1,u="已取消点赞",_.value=!_.value}catch(C){console.error("取消点赞失败",C),u="取消点赞失败"}else try{await G.post("/api/video/episode/activity",{shortId:a.video.shortId,type:"like"}),t=1,u="已点赞",_.value=!_.value}catch(C){console.error("点赞失败",C),u="点赞失败"}t!==0&&k("update:video",{...a.video,likeCount:a.video.likeCount+t,userInteraction:{...a.video.userInteraction,liked:_.value}}),L({message:u,duration:200,forbidClick:!0})},F=async()=>{let t=0,u="";if(B.value)try{await G.post("/api/user/favorites/remove",{shortId:a.video.shortId}),t=-1,u="已取消收藏",B.value=!B.value}catch(C){console.error("取消收藏失败",C),u="取消收藏失败"}else try{await G.post("/api/video/episode/activity",{shortId:a.video.shortId,type:"favorite"}),t=1,u="已收藏",B.value=!B.value}catch(C){console.error("收藏失败",C),u="收藏失败"}t!==0&&k("update:video",{...a.video,favoriteCount:a.video.favoriteCount+t,userInteraction:{...a.video.userInteraction,favorited:B.value}}),L({message:u,duration:200,forbidClick:!0})},P=async t=>{t==="like"?await R():t==="star"&&await F()};return(t,u)=>{const C=X,se=we;return g(),S("div",{class:N(["slider-video",{epsnav:t.isSeries}]),style:{height:"100%",width:"100vw"}},[p("div",Ze,[p("div",Je,[!O(m)?.initData&&O(h).path.includes("/series/")?(g(),M(C,{key:0,name:"arrow-left",onClick:y})):T("",!0)]),p("div",Ye,[p("div",Qe,[p("div",{class:"i-col",onClick:u[0]||(u[0]=U=>P("like"))},[e(C,{name:"like",size:"31",style:{"padding-bottom":"10px"},class:N({active:_.value})},null,8,["class"]),p("span",Xe,z(t.video.likeCount),1)]),p("div",{class:"i-col",onClick:u[1]||(u[1]=U=>t.hdlCmtPopup(t.video.shortId,t.video.commentCount||0))},[e(C,{name:"comment",size:"31",style:{"padding-bottom":"10px"}}),p("span",et,z(t.video.commentCount||0),1)]),p("div",{class:"i-col",onClick:u[2]||(u[2]=U=>P("star"))},[e(C,{name:"star",size:"31",style:{"padding-bottom":"10px"},class:N({active:B.value})},null,8,["class"]),p("span",tt,z(t.video.favoriteCount),1)])])]),p("div",ot,[p("div",{id:t.video.shortId,ref_key:"refxg",ref:f},null,8,at),p("div",{class:"play-bottom absolute",ref_key:"playBottom",ref:s,style:me({bottom:t.isSeries?"45px":"8px"})},[p("div",it,[p("div",st,z(t.video.seriesTitle),1),t.video.seriesInfo?.starring||t.video.starring?(g(),S("div",lt,[(g(!0),S(A,null,j((t.video.seriesInfo?.starring||t.video.starring||"").split(",").slice(0,2),U=>(g(),S("span",{key:U}," 演员•"+z(U),1))),128))])):T("",!0),p("div",nt,[p("div",{ref_key:"textRef",ref:x,class:N(["text",{expanded:c.value}]),onClick:E},z(t.isSeries?t.video.seriesDescription:`${t.video.title}集 |
                                ${t.video.seriesInfo.description}`),3),p("div",{class:"toggle",onClick:E},z(c.value?"收起":"展开"),1)])]),t.isSeries?(g(),S("div",{key:0,class:"eps-btn",ref_key:"epsBtn",ref:n,style:{width:"100% !important","padding-left":"5px"},onClick:$},[e(se,{background:"rgba(77, 77, 77, 0)",color:"white",style:{width:"100%"},text:"剧集 • 全集",mode:"link"},{"left-icon":D(()=>[(g(),S("svg",rt,u[3]||(u[3]=[p("path",{d:"M802.133333 85.333333h-580.266666C98.986667 85.333333 0 184.32 0 307.2v409.6c0 122.88 98.986667 221.866667 221.866667 221.866667h580.266666c122.88 0 221.866667-98.986667 221.866667-221.866667V307.2c0-122.88-98.986667-221.866667-221.866667-221.866667z m-92.16 440.32l-307.2 204.8c-3.413333 3.413333-6.826667 3.413333-10.24 3.413334-3.413333 0-6.826667 0-6.826666-3.413334-6.826667 0-10.24-6.826667-10.24-13.653333V307.2c0-6.826667 3.413333-13.653333 10.24-13.653333s13.653333-3.413333 17.066666 0l307.2 204.8c3.413333 3.413333 6.826667 6.826667 6.826667 13.653333s-3.413333 10.24-6.826667 13.653333z",fill:""},null,-1)])))]),_:1})],512)):T("",!0)],4)])])],2)}}}),ct=J(dt,[["__scopeId","data-v-bdd3995a"]]),ut={class:"cmt-content"},pt=V({__name:"CmmtComp",props:{cmtCount:{}},emits:["update:cmtCount"],setup(d,{emit:v}){const h=b(!1),w=b(!1),m=b([]),l=d,s=async()=>{w.value||(h.value=!0,await G.get("/api/video/comments",{params:{shortId:"x1v6y1y",page:Math.floor(m.value.length/10)+1,size:10}}),setTimeout(()=>{const n=[];for(let o=0;o<10;o++){const c=m.value.length+o+1;n.push({id:c,content:"这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容",appearSecond:Math.floor(Math.random()*300),replyCount:Math.floor(Math.random()*10),createdAt:"2023-10-10",username:`user${c}`,nickname:`用户${c}`,photoUrl:"https://img.yzcdn.cn/vant/cat.jpeg",recentReplies:[]})}m.value.push(...n),h.value=!1,m.value.length>=l.cmtCount&&(w.value=!0)},1e3))};return Z(()=>{s()}),(n,o)=>{const c=ke,x=Te,f=X,a=oe,k=ze;return g(),S("div",ut,[h.value&&m.value.length===0?(g(),M(c,{key:0,class:"loading-center"})):!h.value&&m.value.length===0?(g(),M(x,{key:1,description:"暂无评论，快来抢沙发~"})):(g(),M(k,{key:2,loading:h.value,"onUpdate:loading":o[0]||(o[0]=y=>h.value=y),finished:w.value,"finished-text":"没有更多了"},{default:D(()=>[(g(!0),S(A,null,j(m.value,y=>(g(),M(a,{key:y.id,title:"评论用户昵称","title-style":"color: #5f5858;"},{icon:D(()=>o[1]||(o[1]=[p("img",{src:"https://img.yzcdn.cn/vant/cat.jpeg",alt:"",style:{width:"32px",height:"32px","border-radius":"50%","margin-right":"8px"}},null,-1)])),label:D(()=>o[2]||(o[2]=[p("span",{style:{color:"black"}},"这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容这是评论内容",-1),p("span",{class:"reply"},"回复",-1)])),"right-text":D(()=>o[3]||(o[3]=[he("2023-10-10")])),"right-icon":D(()=>[e(f,{name:"like",size:"20"}),o[4]||(o[4]=p("span",{style:{"margin-left":"4px"}},"123",-1))]),_:2},1024))),128))]),_:1},8,["loading","finished"]))])}}}),vt=J(pt,[["__scopeId","data-v-8848599e"]]),mt={class:"player-container"},ht={class:"cmt-popup"},ft={key:0,class:"bottom-box"},gt=V({__name:"VertLayoutComp",props:{isSeries:{type:Boolean},seriesId:{}},setup(d){const v=d,h=b(1),w=b(!1),m=b(!1),l=b(!1),s=b(0),n=b(0),o=b(null),c=fe([]),x=(i,r)=>{s.value=r,m.value=!m.value},f=async i=>{n.value=i.activeIndex;const r=c.length-n.value-1;v.isSeries&&!w.value&&r<=2&&(h.value++,await y(h.value))},a=i=>{o.value=i},k=async i=>{const r=await G.get("/api/video/episodes",{params:{seriesShortId:i,page:1,size:200}}),I=r.data.data||r.data,{list:_,...B}=I;c.push(..._.map(R=>({...R,...B})))},y=async i=>{w.value=!0;try{const r=await G.get("/api/video/recommend",{params:{page:i,size:10}}),_=(r.data.data||r.data).list||[];if(_.length===0){L("暂无推荐内容");return}c.push(..._)}catch(r){console.error("加载推荐视频失败:",r),L(r.response?.data?.message||"加载失败，请重试")}w.value=!1};Z(async()=>{try{v.isSeries?await y(h.value):v.seriesId&&await k(v.seriesId)}catch(i){console.error("初始化加载失败:",i),L("初始化失败，请刷新重试")}});const E=()=>{o.value?.slideNext()},$=i=>{i!==-1&&(n.value=i),o.value?.slideTo(i),l.value=!1};return(i,r)=>{const I=_e,_=oe,B=We,R=He;return g(),S(A,null,[p("div",mt,[e(O(ge),{direction:"vertical","slides-per-view":1,onSlideChange:f,speed:400,onSwiper:a,touchRatio:1,longSwipesRatio:.12,longSwipesMs:50,followFinger:!0,class:"player-swiper"},{default:D(()=>[(g(!0),S(A,null,j(c,(F,P)=>(g(),M(O(ye),{key:F.shortId},{default:D(()=>[Math.abs(n.value-P)<=1?(g(),M(ct,{key:0,video:c[P],"onUpdate:video":t=>c[P]=t,active:n.value===P,isSeries:i.isSeries,hdlCmtPopup:x,onGoNext:E},null,8,["video","onUpdate:video","active","isSeries"])):T("",!0)]),_:2},1024))),128))]),_:1}),e(I,{show:m.value,"onUpdate:show":r[1]||(r[1]=F=>m.value=F),closeable:"","close-icon-position":"top-left","close-icon":"arrow-down",round:"",position:"bottom",style:{height:"60%"},"overlay-style":{background:"none"},"teleport-to":"body"},{default:D(()=>[p("div",null,[p("div",ht,z(s.value)+"条评论",1),e(vt,{"cmt-count":s.value,"onUpdate:cmtCount":r[0]||(r[0]=F=>s.value=F)},null,8,["cmt-count"])])]),_:1},8,["show"])]),i.isSeries?T("",!0):(g(),S("div",ft,[e(I,{show:l.value,"onUpdate:show":r[2]||(r[2]=F=>l.value=F),closeable:"","close-icon":"arrow-down",round:"",position:"bottom",style:{height:"60%"},"overlay-style":{background:"none"},"teleport-to":"body"},{default:D(()=>[e(_,{title:"选集",label:`共${c.length}集`,"title-style":"font-weight: bold; font-size: 18px;"},null,8,["label"]),e(R,{"column-num":5,square:"",gutter:10,clickable:"",style:{"margin-top":"10px"}},{default:D(()=>[(g(!0),S(A,null,j(c,(F,P)=>(g(),M(B,{key:F.shortId,text:F.episodeTitle,onClick:t=>$(P),class:N(["episode-item",{epsActive:n.value===P}]),bordered:!1},null,8,["text","onClick","class"]))),128))]),_:1})]),_:1},8,["show"]),e(_,{class:"eps-list",title:c[0]?.seriesInfo.updateStatus=="已完结"?`合集 • 全${c.length}集`:`合集 · 更新至${c.length}集`,icon:"bars","is-link":"","arrow-direction":"up",onClick:r[3]||(r[3]=F=>l.value=!l.value)},null,8,["title"])]))],64)}}}),Et=J(gt,[["__scopeId","data-v-c64e0d63"]]);export{Et as V};
