import{d as H,r as o,n as L,p as P,b as c,f as s,j as U,x as C,I as j,h as N,J as z,v as J,w as n,c as i,s as V,F as E,e as S,i as Z,o as r,t as d,_ as K}from"./index-VJJ6XrVB.js";import{S as q,a as W}from"./index-DiEwUxtr.js";import{P as $}from"./index-BOFbMo8I.js";import{L as ss}from"./index-CUxhZJU3.js";import{T as es,a as ts}from"./index-eRE_PPL9.js";import{s as as}from"./request-DYQEwhhF.js";import"./index-BEP1TWU2.js";import"./use-id-CYO2FsV8.js";import"./use-route-CbfQQ3_s.js";const os="/static/img/no_data.png",ls={class:"serach-page flex_direction-column h_100_vh"},ns={class:"top van-hairline--bottom"},is={class:"nav-bar relative"},rs={class:"center flex_auto"},cs={class:"search-bar"},ds={class:"input-box notranslate"},us={class:"handler absolute flex align_item-center"},vs={class:"main flex_auto"},As={key:0,class:"result"},_s={class:"load-box"},ps={key:0,class:"empty"},fs={class:"main-text"},ms={class:"scroll-box"},gs={class:"video"},hs={class:"video-info"},ws={class:"left"},bs={class:"preview"},ys={class:"my-image"},xs={class:"van-image"},Rs=["src"],ks={class:"video-info"},Bs={class:"info-b"},Cs={class:"update flex_auto"},Es={class:"right flex_direction-column"},Ss={class:"right-t"},Os={class:"van-ellipsis"},Is={class:"date"},Ds={class:"star van-ellipsis"},Ns={class:"introduce_info"},Fs={class:"right-b flex align_item-center justify_content-sb"},Qs=H({__name:"SearchView",setup(Xs){const O=V(),h=P(),a=o(""),v=o(!1),A=o(!1),y=o(!1),x=o(!1);let _=1;const p=o([]),I=o(0),R=o(!1),F=()=>{a.value=""},w=async(k=1,e=20)=>{if(v.value=!0,a.value)try{const u=await as.get("/api/list/fuzzysearch",{params:{keyword:a.value,page:k,size:e}}),B=u.data.data.list.filter(g=>g.title===a.value),m=u.data.data.list.filter(g=>g.title!==a.value),b=[...B,...m];p.value.push(...b),b.length<e&&(A.value=!0)}catch(u){console.error("SearchView.vue searchBtn error",u),x.value=!0,_--}else A.value=!0;y.value=!0,v.value=!1},D=async()=>{p.value=[],_=1,A.value=!1,await w(1)},Q=async()=>{},X=async()=>{p.value=[],_=1,A.value=!1,await w(1),R.value=!1},Y=async()=>{_++,await w(_),v.value=!1},G=()=>{window.history.state?.back?O.back():O.push("/")},f=o("");return L(async()=>{if(/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?f.value="seriesPlay":f.value="play",h.params.id){const e=Array.isArray(h.params.id)?h.params.id[0]:h.params.id;a.value=e,w(1)}}),(k,e)=>{const u=ts,B=es,m=Z("RouterLink"),b=ss,g=$,M=W,T=q;return r(),c("div",ls,[s("div",ns,[s("div",is,[s("div",{class:"left",onClick:G},e[5]||(e[5]=[s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),s("div",rs,[s("form",{onSubmit:j(D,["prevent"])},[s("div",cs,[s("div",ds,[N(s("input",{placeholder:"",type:"text",maxlength:"100",autofocus:"true","onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l)},null,512),[[z,a.value]]),s("div",us,[N(s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAwRJREFUaEPtmEuojVEUx39/hDwzEKUMFHlk4jERpcw8Jh5JlBEjE5IRI0YSEyNGiqSLicdMKTLxmOgitwyUIgN53ZBrOeu2z23fr+985/vOd+697Tp7dOqsvb/1W+u/1n6IxIcS958ewERnsJeBXgZqRqAnoWYAzWwqsBRYAiwE5gHTwv+/gS/AR+AdMCDpT83gD0+vnQEzc0c3AqsBhygz3PmXwGNJDtbx6BjAzCYDm4ENgP/uZAwBTxrrPJTkvyuPjgDMbCawF1hc+Yv5E94DNyT9rLpeZQAzmw8cAObmfOw78AZ4C3wCBoPNDGABsAxYDszOmfsVuCrpcxWISgAh8odznP/hMgBeSPpX5ICZTQLWBPnNytg6xKUqmSgNEDR/MEc2A40CviXpV5XImdn0RiHvCp0rnupyulK2JqoAbAE2ZZx8BtxvF/VWYCEbW4F1GZtHkh6UCUgpgNAqj2S6jUf+eqfON50LEPsymfCOdLFMiy0LsANYG0XENe8fGJFNkNhOoF/Sq7zomdlKYBVwO5ZIkJMHKK6J55LutMtCW4Cwwx7PbFJ3Jbl8hkdwfnejFa4AvIhvZiGC827jRfw62Iz0fjNzGW2PHPbN7ly7HbsMgEdsT7Swt8oLsXTMzP93u+YYBZFxvmnjmerLSOlopsX2SeovykIZgKx8nkq6Fy/awsFhiGDXjHwuYASxDVgfrd1WRmUADgGLokWvSfICHjUKINzOZVPofJCiHwb3R7YfJF2um4ETgO+kzXFe0re8RVtAxKa59RFlYA5wLJowKOlsXYBTmfZ5RtLfVosWQBQ6HzIwBTgZrT0k6fR4A3gn8qKOZeM+OIAXpXeg3GFmYwKQvISSL+I6bbTZ57OSarXZjUkb7XQjG9H7RG9kfs9N9ygR2lu6h7kA4C8P6R6nA0S6F5oA4E8n6V4pA4Q/p6R5qY8OXOk+q0QQ6T5sRRDpPi3GR8lkH3ez5+Fkn9eLLhvj8V/bO/F4OFHnGz2AOtHrxtxeBroRxTpr9DJQJ3rdmPsf4S66QDoGjn0AAAAASUVORK5CYII=",alt:"",class:"close",onClick:F},null,512),[[J,a.value.length]])])]),s("div",{class:"button",onClick:D},"搜索")])],32)]),e[6]||(e[6]=s("div",{class:"right"},null,-1))]),y.value?(r(),U(B,{key:0,active:I.value,"onUpdate:active":e[1]||(e[1]=l=>I.value=l),onChange:Q,role:""},{default:n(()=>[(r(),c(E,null,S(["视频"],l=>i(u,{key:l,title:l},null,8,["title"])),64))]),_:1},8,["active"])):C("",!0)]),s("div",vs,[y.value?(r(),c("div",As,[i(T,{loop:!1,duration:200,class:"my-swipe","show-indicators":!1,"lazy-render":!1},{default:n(()=>[(r(),c(E,null,S(["视频"],l=>i(M,{key:l},{default:n(()=>[s("div",_s,[p.value?.length==0?(r(),c("div",ps,[e[7]||(e[7]=s("img",{src:os,alt:""},null,-1)),s("h4",fs,'未找到包含"'+d(a.value)+'"的视频',1)])):C("",!0),s("div",ms,[i(g,{modelValue:R.value,"onUpdate:modelValue":e[4]||(e[4]=t=>R.value=t),onRefresh:X,"success-text":"刷新成功"},{default:n(()=>[i(b,{loading:v.value,"onUpdate:loading":e[2]||(e[2]=t=>v.value=t),finished:A.value,"finished-text":"没有更多了",onLoad:Y,error:x.value,"onUpdate:error":e[3]||(e[3]=t=>x.value=t),"error-text":"请求失败，点击重新加载"},{default:n(()=>[s("div",gs,[(r(!0),c(E,null,S(p.value,t=>(r(),c("div",{class:"series",key:t.id},[s("div",hs,[s("div",ws,[s("div",bs,[s("div",ys,[s("div",xs,[i(m,{to:{name:f.value,params:{id:t.shortId}}},{default:n(()=>[s("img",{class:"van-image__img",src:t.coverUrl,lazy:"loaded",style:{"object-fit":"fill"}},null,8,Rs)]),_:2},1032,["to"])])]),s("div",ks,[e[8]||(e[8]=s("div",{class:"score"},null,-1)),s("div",Bs,[s("div",Cs,d(t.upStatus),1)])])])]),s("div",Es,[i(m,{to:{name:f.value,params:{id:t.shortId}}},{default:n(()=>[s("div",Ss,[s("h3",Os,d(t.title),1),s("div",Is,[s("span",null,d(t.createdAt.split("-")[0]),1),s("i",null,d(t.type),1)]),s("p",Ds," 主演："+d(t.author),1),s("div",Ns,d(t.description.slice(0,50))+" ... ",1)])]),_:2},1032,["to"]),s("div",Fs,[i(m,{to:{name:f.value,params:{id:t.shortId}}},{default:n(()=>e[9]||(e[9]=[s("button",{class:"flex_none"}," 立即播放 ",-1)])),_:2,__:[9]},1032,["to"])])])])]))),128))])]),_:1},8,["loading","finished","error"])]),_:1},8,["modelValue"])])])]),_:2},1024)),64))]),_:1})])):C("",!0)])])}}}),zs=K(Qs,[["__scopeId","data-v-f5ecaab7"]]);export{zs as default};
