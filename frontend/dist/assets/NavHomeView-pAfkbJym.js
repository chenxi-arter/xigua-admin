import{d as w,r as u,n as L,b as y,c as i,w as d,F as k,e as H,f as s,i as S,o as _,j as V,t as R,z as B,_ as h,l as U,q as A}from"./index-l2XX-SN-.js";import{P as E}from"./index-BjK2SVrq.js";import{S as N,a as $}from"./index-CZdldIn3.js";import{I as q}from"./index-0uK84Rev.js";import{L as x}from"./index-CE6LGRPZ.js";import{R as M,C as T}from"./index-CnQSIfRp.js";import{C as j}from"./CoverComp-CjIr0Xv9.js";import{s as b}from"./request-CTo9qToq.js";import"./index-C1umENPv.js";import"./index-Bi9xYn04.js";const z={class:"swipe-container"},D={class:"my-image"},F={class:"describe"},P={class:"custom-indicator"},O=["onClick"],G=w({__name:"SwineComp",props:{HomeBanners:{default:()=>[]}},setup(r){const p=u(0),t=u(),n=m=>{p.value=m,t.value?.swipeTo(m)},c=u("");return L(()=>{/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?c.value="seriesPlay":c.value="play"}),(m,f)=>{const g=q,I=S("RouterLink"),l=$,a=N;return _(),y("div",z,[i(a,{ref_key:"swipeRef",ref:t,active:p.value,"onUpdate:active":f[0]||(f[0]=o=>p.value=o),class:"image-carousel",autoplay:5e3,"indicator-color":"white","lazy-render":!1},{indicator:d(({active:o,total:e})=>[s("ul",P,[(_(!0),y(k,null,H(e,(C,v)=>(_(),y("li",{key:v,class:B({"is-active":v===o}),onClick:ae=>n(v)},f[1]||(f[1]=[s("div",{class:"indicator-line"},null,-1)]),10,O))),128))])]),default:d(()=>[(_(!0),y(k,null,H(m.HomeBanners,(o,e)=>(_(),V(l,{key:o.id},{default:d(()=>[i(I,{to:o.shortId?{name:c.value,params:{id:o.shortId}}:"",onClick:C=>n(e)},{default:d(()=>[s("div",D,[i(g,{src:o.showURL,fit:"cover","show-error":"","show-loading":""},null,8,["src"])]),s("div",F,[s("p",null,R(o.title),1)])]),_:2},1032,["to","onClick"])]),_:2},1024))),128))]),_:1},8,["active"])])}}}),J=h(G,[["__scopeId","data-v-086b953c"]]),K="/static/img/%E5%85%A8%E9%83%A8.png",Q="/static/img/%E6%96%B0%E5%89%A7.png",W="/static/img/%E7%83%AD%E5%BA%A6.png",X="/static/img/%E8%AF%84%E5%88%86.png",Y={class:"screen-bar"},Z=w({__name:"ScreenComp",props:{catInfo:Object},setup(r){return(p,t)=>{const n=S("RouterLink");return _(),y("ul",Y,[i(n,{to:{name:"list",params:{id:r.catInfo?.categoryId},query:{channeid:r.catInfo?.id,ids:"0,0,0,0,0,0,0"}}},{default:d(()=>t[0]||(t[0]=[s("div",null,[s("img",{src:K,alt:""})],-1),s("p",null,"发现",-1)])),_:1,__:[0]},8,["to"]),i(n,{to:{name:"list",params:{id:r.catInfo?.categoryId},query:{channeid:r.catInfo?.id,ids:"0,0,0,0,0,0,0"}}},{default:d(()=>t[1]||(t[1]=[s("div",null,[s("img",{src:Q,alt:""})],-1),s("p",null,"新剧",-1)])),_:1,__:[1]},8,["to"]),i(n,{to:{name:"list",params:{id:r.catInfo?.categoryId},query:{channeid:r.catInfo?.id,ids:"1,0,0,0,0.0.0"}}},{default:d(()=>t[2]||(t[2]=[s("div",null,[s("img",{src:W,alt:""})],-1),s("p",null,"人气",-1)])),_:1,__:[2]},8,["to"]),i(n,{to:{name:"list",params:{id:r.catInfo?.categoryId},query:{channeid:r.catInfo?.id,ids:"2,0,0,0,0,0,0"}}},{default:d(()=>t[3]||(t[3]=[s("div",null,[s("img",{src:X,alt:""})],-1),s("p",null,"评分",-1)])),_:1,__:[3]},8,["to"])])}}}),ee=h(Z,[["__scopeId","data-v-a8cfd006"]]),oe=w({__name:"ListComp",props:{HomeVideos:{default:()=>[]},vtype:{default:1}},emits:["update:HomeVideos"],setup(r,{emit:p}){const t=u(!1);let n=1;const c=r,m=p,f=u(!1),g=u(!1),I=async()=>{try{n++;const a=(await b.get("/api/home/gethomemodules",{params:{channeid:c.vtype,page:n}}))?.data?.data?.list?.[0]?.list||[];a.length||(g.value=!0),m("update:HomeVideos",[...c.HomeVideos,...a])}catch(l){console.error("ListComp error: ",l),t.value=!0,n--}finally{f.value=!1}};return(l,a)=>{const o=T,e=M,C=x;return _(),V(C,{loading:f.value,"onUpdate:loading":a[0]||(a[0]=v=>f.value=v),"immediate-check":!1,finished:g.value,"finished-text":"没有更多了",onLoad:I,error:t.value,"onUpdate:error":a[1]||(a[1]=v=>t.value=v),"error-text":"请求失败，点击重新加载",class:"list",role:""},{default:d(()=>[i(e,{gutter:"10"},{default:d(()=>[(_(!0),y(k,null,H(l.HomeVideos,v=>(_(),V(o,{key:v.shortId,span:"12"},{default:d(()=>[i(j,{MvItem:v,islist:l.vtype!=2},null,8,["MvItem","islist"])]),_:2},1024))),128))]),_:1})]),_:1},8,["loading","finished","error"])}}}),te=h(oe,[["__scopeId","data-v-1e1d8b15"]]),se=w({__name:"NavHomeView",props:{catInfo:{}},setup(r){const p=u(!1),t=u(),n=u(),c=u(),m=u(0),f=r,g=async()=>{try{const a=(await b.get("/api/home/gethomemodules?channeid="+f.catInfo.id)).data;for(const o of a.data?.list??[])o.type===0?t.value=o.banners.map(e=>({id:e.id,showURL:e.showURL,title:e.title,url:e.url,shortId:e.shortId})):0<o.type&&o.type<5&&(n.value=o.list.map(e=>({id:e.id,coverUrl:e.coverUrl,score:e.score,playCount:e.playCount,cidMapper:e.cidMapper,shortId:e.shortId,title:e.title,isSerial:e.isSerial,upStatus:e.upStatus,upCount:e.upCount})))}catch(l){console.error("NavHomeView error: ",l)}p.value=!1};L(()=>{g()}),U(()=>{A(()=>{c.value&&(c.value.scrollTop=m.value)})});const I=()=>{c.value&&(m.value=c.value.scrollTop)};return(l,a)=>{const o=E;return _(),y("div",{class:"scroll-box",onScroll:I,ref_key:"listContainer",ref:c},[i(o,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),onRefresh:g,"success-text":"刷新成功"},{default:d(()=>[i(J,{HomeBanners:t.value},null,8,["HomeBanners"]),i(ee,{catInfo:l.catInfo},null,8,["catInfo"]),i(te,{HomeVideos:n.value,"onUpdate:HomeVideos":a[0]||(a[0]=e=>n.value=e),vtype:l.catInfo.id??1},null,8,["HomeVideos","vtype"])]),_:1},8,["modelValue"])],544)}}}),ve=h(se,[["__scopeId","data-v-f0752128"]]);export{ve as default};
