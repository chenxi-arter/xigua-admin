import{d as F,r as i,c as d,m as j,l as q,n as z,p as G,q as J,b as _,F as x,f as V,h as Q,v as W,w as y,s as X,e as E,o as c,j as C,x as Y,t as Z,y as ee,K as ae,k as te,_ as $}from"./index-aGqv8Prk.js";import{T as oe,a as ne}from"./index-CKmKEs6C.js";import{S as se,a as le}from"./index-DtpEP8zk.js";import"./index-MJIGHXjf.js";import{F as re,f as H}from"./index-Du8LCMCm.js";import ce from"./NavHomeView-BkGaXUv2.js";import{s as A}from"./request-D6nR8ZkE.js";import{u as ue}from"./use-id-DjIap-jD.js";import{u as ie}from"./index-DbEQhf4J.js";import{e as K,c as de,p as D,t as pe,f as P,h as me,w as ve}from"./index-BRoPC3eB.js";import"./use-route-DNRM3zJr.js";import"./index-C4jE8klQ.js";import"./index-CFWb3eMm.js";import"./index-BEyaRGWo.js";import"./index-DeyLT_1s.js";import"./CoverComp-BDBT9H7d.js";const[fe,I,he]=de("search"),_e=K({},H,{label:String,shape:P("square"),leftIcon:P("search"),clearable:pe,actionText:String,background:String,showAction:Boolean});var ge=F({name:fe,props:_e,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(s,{emit:n,slots:l,attrs:v}){const r=ue(),f=i(),p=()=>{l.action||(n("update:modelValue",""),n("cancel"))},h=a=>{a.keyCode===13&&(me(a),n("search",s.modelValue))},m=()=>s.id||`${r}-input`,g=()=>{if(l.label||s.label)return d("label",{class:I("label"),for:m(),"data-allow-mismatch":"attribute"},[l.label?l.label():s.label])},k=()=>{if(s.showAction){const a=s.actionText||he("cancel");return d("div",{class:I("action"),role:"button",tabindex:0,onClick:p},[l.action?l.action():a])}},S=()=>{var a;return(a=f.value)==null?void 0:a.blur()},T=()=>{var a;return(a=f.value)==null?void 0:a.focus()},w=a=>n("blur",a),N=a=>n("focus",a),R=a=>n("clear",a),B=a=>n("clickInput",a),L=a=>n("clickLeftIcon",a),e=a=>n("clickRightIcon",a),t=Object.keys(H),u=()=>{const a=K({},v,D(s,t),{id:m()}),b=M=>n("update:modelValue",M);return d(re,j({ref:f,type:"search",class:I("field",{"with-message":a.errorMessage}),border:!1,onBlur:w,onFocus:N,onClear:R,onKeypress:h,onClickInput:B,onClickLeftIcon:L,onClickRightIcon:e,"onUpdate:modelValue":b},a),D(l,["left-icon","right-icon"]))};return ie({focus:T,blur:S}),()=>{var a;return d("div",{class:I({"show-action":s.showAction}),style:{background:s.background}},[(a=l.left)==null?void 0:a.call(l),d("div",{class:I("content",s.shape)},[g(),u()]),k()])}}});const ke=ve(ge),we="/xiguaLogo.png",be={class:"home-search"},ye={style:{flex:"1"}},Ce={class:"placeholder-carousel"},Ie={key:0,class:"load-box"},xe=F({__name:"VanBarComp",setup(s){const n=X(),l=G(),v=i([]),r=i([]);i(!1);const f=i(!1),p=i(0),h=i(),m=i(""),g=i(""),k=i(!0),S=async()=>{try{const e=await A.get("/api/home/categories");r.value=e.data.sort((t,u)=>t.id-u.id).map(t=>({...t,isMounted:!1}))}catch(e){console.error(e)}},T=async(e=6,t=null)=>{try{const u=await A.get("/api/search/hot-keywords",{params:{limit:e,categoryId:t}});v.value=u.data.data||u.data,g.value=v.value[0]}catch(u){console.error(u)}};function w(e){r.value[e].isMounted=!0,e>0&&(r.value[e-1].isMounted=!0),e<r.value.length-1&&(r.value[e+1].isMounted=!0)}q(()=>{h.value?.swipeTo(0)}),z(async()=>{await T(),await S();let e=r.value.findIndex(t=>t.categoryId===l.name);e==-1&&(e=0),w(e),p.value=e,h.value?.swipeTo(e),J(()=>{setTimeout(()=>{f.value=!0},500)})});function N(e){w(e),p.value=e,h.value?.swipeTo(e);const t=r.value[e].routeName;n.push({name:t})}const R=e=>{w(e),p.value=e;const t=r.value[e].routeName;n.push({name:t})},B=e=>{g.value=v.value[e||0]},L=()=>{n.push({name:"search",params:{id:m.value||g.value}})};return(e,t)=>{const u=ke,a=le,b=se,M=ne,O=oe;return c(),_(x,null,[V("div",be,[V("div",ye,[d(u,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o),background:"rgba(255, 255, 255, 0)",onSearch:L,onFocus:t[1]||(t[1]=o=>k.value=!1),onBlur:t[2]||(t[2]=o=>k.value=!0),style:{"font-size":"4.2vw"},class:"search"},null,8,["modelValue"]),Q(V("div",Ce,[d(b,{"show-indicators":!1,autoplay:k.value?6e3:0,style:{height:"9.333333vw"},vertical:"",onChange:B},{default:y(()=>[(c(!0),_(x,null,E(v.value,o=>(c(),C(a,{key:o,class:"placeholder"},{default:y(()=>[Y(Z(o),1)]),_:2},1024))),128))]),_:1},8,["autoplay"])],512),[[W,!m.value]])]),t[4]||(t[4]=V("img",{src:we,alt:"Logo",class:"icon"},null,-1))]),d(O,{shrink:"",active:p.value,"onUpdate:active":t[3]||(t[3]=o=>p.value=o),background:"transparent",onChange:N,ellipsis:!1,animated:!1},{default:y(()=>[(c(!0),_(x,null,E(r.value,(o,U)=>(c(),C(M,{key:o.name,title:o.name,name:U},null,8,["title","name"]))),128))]),_:1},8,["active"]),d(b,{loop:!1,duration:f.value?200:0,ref_key:"swipeRef",ref:h,class:"home-outer-swipe flex_auto","show-indicators":!1,onChange:R,"lazy-render":!1},{default:y(()=>[(c(!0),_(x,null,E(r.value,o=>(c(),C(a,{key:o.name},{default:y(()=>[o.isMounted?(c(),_("div",Ie,[(c(),C(ae,null,[(c(),C(te(ce),{key:o.name,catInfo:o},null,8,["catInfo"]))],1024))])):ee("",!0)]),_:2},1024))),128))]),_:1},8,["duration"])],64)}}}),Ve=$(xe,[["__scopeId","data-v-f8d54dfa"]]),Se={class:"home flex_direction-column relative"},Te=F({__name:"HomeLayout",setup(s){return(n,l)=>(c(),_("div",Se,[d(Ve)]))}}),qe=$(Te,[["__scopeId","data-v-03e15f6c"]]);export{qe as default};
