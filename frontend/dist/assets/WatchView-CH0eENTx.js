import{d as M,r as t,n as V,l as N,b,o as d,c as o,w as s,F as k,e as L,j as T,f as z,t as I,A as H,q as P,x as O}from"./index-Cww4tW-9.js";import{T as j,a as q}from"./index-DKjtwpor.js";import"./index-__0INs8X.js";import{L as E,s as A}from"./request-VfYaw6rx.js";import{P as $}from"./index-BPInk1DG.js";import{L as B}from"./index-D1BXTva8.js";import{R as G,C as J}from"./index-Cahkp85Z.js";import{I as K}from"./index-DxveNFjF.js";import{C as Q}from"./index-Bv8aR3RU.js";import"./index-B9NUlCX-.js";import"./use-id-B04f3oVk.js";import"./index-Vp1kQzfE.js";import"./use-route-KzbCpOCF.js";const X={class:"video-info"},Y={style:{color:"white","font-size":"13px"}},R=M({__name:"ScCatComp",props:{cid:{},type:{}},setup(U){const f=t(!1),p=t(!1),_=t(!1),h=t(!1),c=t(),m=t(0),g=U,i=t([]),l=t("");V(()=>{/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?l.value="seriesPlay":l.value="play"}),N(()=>{P(()=>{c.value&&(c.value.scrollTop=m.value)})});const r=async()=>{i.value=[],await S(),_.value=!1},v=()=>{m.value=c.value.scrollTop},e=async()=>{p.value=!0,await S(),p.value=!1},S=async()=>{try{let a="";g.type==1?a="/api/user/favorites":a="/api/user/liked";const u=await A.get(a,{params:{page:Math.floor(i.value.length/20)+1,size:20,categoryId:g.cid}}),x=u.data.data||u.data,{list:C,total:n}=x;i.value.push(...C),i.value.length>=n&&(f.value=!0)}catch(a){console.error(a),h.value=!0}},w=async a=>{H.push({name:l.value,params:{id:a}})};return(a,u)=>{const x=E,C=K,n=J,F=G,W=B,D=$;return d(),b("div",{class:"watch-scroll-box",ref_key:"watchListContainer",ref:c,onScroll:v},[o(D,{modelValue:_.value,"onUpdate:modelValue":u[2]||(u[2]=y=>_.value=y),onRefresh:r,"success-text":"刷新成功",style:{padding:"12px"}},{default:s(()=>[o(W,{loading:p.value,"onUpdate:loading":u[0]||(u[0]=y=>p.value=y),finished:f.value,error:h.value,"onUpdate:error":u[1]||(u[1]=y=>h.value=y),"error-text":"请求失败，点击重新加载","finished-text":"没有更多了",onLoad:e,class:"watch-list",role:""},{default:s(()=>[o(F,{gutter:[12,12]},{default:s(()=>[(d(!0),b(k,null,L(i.value,y=>(d(),T(n,{key:y.seriesId,span:"8",onClick:se=>w(y.seriesShortId)},{default:s(()=>[z("div",X,[o(C,{fit:"contain",src:y.seriesCoverUrl},{loading:s(()=>[o(x,{type:"spinner",size:"20"})]),_:2},1032,["src"]),z("div",Y,I(y.seriesTitle),1)])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["loading","finished","error"])]),_:1},8,["modelValue"])],544)}}}),Z=["src"],ee={class:"reply"},te=M({__name:"LsCatComp",props:{cid:{}},setup(U){const f=t(!1),p=t(!1),_=t(!1),h=U,c=t([]),m=t(),g=t(0),i=t("");V(()=>{/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?i.value="seriesPlay":i.value="play"}),N(()=>{P(()=>{m.value&&(m.value.scrollTop=g.value)})});const l=async()=>{f.value=!0,await v(),f.value=!1},r=()=>{g.value=m.value.scrollTop},v=async()=>{try{const w=await A.get("/api/video/browse-history",{params:{page:Math.floor(c.value.length/20)+1,size:20,categoryId:h.cid}}),a=w.data.data||w.data,{list:u,total:x}=a;c.value.push(...u),c.value.length>=x&&(p.value=!0)}catch(w){console.error(w),_.value=!0}},e=t(!1),S=async()=>{c.value=[],await v(),e.value=!1};return(w,a)=>{const u=Q,x=B,C=$;return d(),b("div",{class:"watch-scroll-box",ref_key:"historyListContainer",ref:m,onScroll:r},[o(C,{modelValue:e.value,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value=n),onRefresh:S,"success-text":"刷新成功",style:{padding:"12px"}},{default:s(()=>[o(x,{loading:f.value,"onUpdate:loading":a[0]||(a[0]=n=>f.value=n),finished:p.value,error:_.value,"onUpdate:error":a[1]||(a[1]=n=>_.value=n),"error-text":"请求失败，点击重新加载","finished-text":"没有更多了",class:"history-list",onLoad:l,"immediate-check":!1,style:{height:"100%"}},{default:s(()=>[(d(!0),b(k,null,L(c.value,n=>(d(),T(u,{key:n.seriesId,"is-link":"",center:"",border:!1,to:{name:i.value,params:{id:n.seriesShortId}},"title-style":{color:"white"},style:{padding:"10px 4px"}},{title:s(()=>[O(I(n.seriesTitle),1)]),icon:s(()=>[z("img",{src:n.seriesCoverUrl,alt:"",style:{width:"64px",height:"86px",margin:"0 13px 0 0"}},null,8,Z)]),label:s(()=>[a[3]||(a[3]=z("span",{style:{color:"black"}},null,-1)),z("span",ee,I(n.watchStatus),1)]),_:2},1032,["to"]))),128))]),_:1},8,["loading","finished","error"])]),_:1},8,["modelValue"])],544)}}}),ae={class:"watch-contain"},_e=M({__name:"WatchView",setup(U){const f=t(0),p=t([{name:"全部",id:null}]),_=async()=>{try{const l=(await A.get("/api/home/categories")).data.sort((r,v)=>r.id-v.id).map(r=>({...r,isMounted:!1}));p.value.push(...l)}catch(i){console.error(i)}},h=t("");V(()=>{_(),/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?h.value="seriesPlay":h.value="play"});const c=t(0),m=t(0),g=t(0);return(i,l)=>{const r=q,v=j;return d(),b("div",ae,[o(v,{"lazy-render":!1,active:f.value,"onUpdate:active":l[3]||(l[3]=e=>f.value=e),swipeable:"",shrink:"",background:"rgba(101, 102, 102, 0.0)","title-active-color":"white","line-width":"20px"},{default:s(()=>[o(r,{title:"我的收藏","title-style":"font-size: 16px"},{default:s(()=>[o(v,{"lazy-render":!1,active:c.value,"onUpdate:active":l[0]||(l[0]=e=>c.value=e),type:"card",class:"sc-cat-tabs"},{default:s(()=>[(d(!0),b(k,null,L(p.value,e=>(d(),T(r,{title:e.name,key:e.name,class:"tab-item"},{default:s(()=>[o(R,{type:1,cid:e.id},null,8,["cid"])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),_:1}),o(r,{title:"我的点赞","title-style":"font-size: 16px"},{default:s(()=>[o(v,{"lazy-render":!1,active:m.value,"onUpdate:active":l[1]||(l[1]=e=>m.value=e),shrink:"",type:"card",class:"sc-cat-tabs"},{default:s(()=>[(d(!0),b(k,null,L(p.value,e=>(d(),T(r,{title:e.name,key:e.name,class:"tab-item"},{default:s(()=>[o(R,{type:2,cid:e.id},null,8,["cid"])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),_:1}),o(r,{title:"播放历史","title-style":"font-size: 16px"},{default:s(()=>[o(v,{"lazy-render":!1,active:g.value,"onUpdate:active":l[2]||(l[2]=e=>g.value=e),shrink:"",type:"card",class:"sc-cat-tabs"},{default:s(()=>[(d(!0),b(k,null,L(p.value,e=>(d(),T(r,{title:e.name,key:e.name,class:"tab-item"},{default:s(()=>[o(te,{cid:e.id},null,8,["cid"])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),_:1})]),_:1},8,["active"])])}}});export{_e as default};
