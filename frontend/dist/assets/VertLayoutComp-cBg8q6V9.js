import{d as Z,c as e,a as le,m as fe,u as ge,p as ye,r as y,J as we,k as xe,l as de,n as be,L as _e,E as ke,b as S,o as w,y as O,f as r,i as A,x as W,q as R,t as D,z as Fe,F as K,e as X,w as I,_ as ce,D as Se,s as Ce,I as Ee,M as Ie,A as ne}from"./index-BQbrX0z1.js";import{B as De}from"./index-klPqESNT.js";import{L as Be}from"./index-CaOxaCLw.js";import{C as Pe}from"./index-CsXdeD3I.js";import{S as $e,a as ze}from"./swiper-vue-GK20qH4A.js";import{N as Me,H as Ge,P as Ve}from"./index.min-CsDOfjyh.js";import{s as G,a as N,P as Te,L as Ae}from"./request-4vVFd-gk.js";import{v as Re,c as ae,A as Ne,w as se,m as Ue,n as te,t as re,u as Le,k as oe,D as qe,e as He,b as Oe,E as Ke,d as We,I as ue}from"./index-Bg4L8zOy.js";import{u as Ze}from"./use-id-FTPuvNfh.js";import{u as je,r as Je}from"./use-route-YVm2SLx8.js";const[Ye,Y]=ae("empty"),Qe={image:Re("default"),imageSize:[Number,String,Array],description:String};var Xe=Z({name:Ye,props:Qe,setup(c,{slots:p}){const _=()=>{const m=p.description?p.description():c.description;if(m)return e("p",{class:Y("description")},[m])},F=()=>{if(p.default)return e("div",{class:Y("bottom")},[p.default()])},k=Ze(),n=m=>`${k}-${m}`,d=m=>`url(#${n(m)})`,l=(m,E,U)=>e("stop",{"stop-color":m,offset:`${E}%`,"stop-opacity":U},null),i=(m,E)=>[l(m,0),l(E,100)],u=m=>[e("defs",null,[e("radialGradient",{id:n(m),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)","data-allow-mismatch":"attribute"},[l("#EBEDF0",0),l("#F2F3F5",100,.3)])]),e("ellipse",{fill:d(m),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8","data-allow-mismatch":"attribute"},null)],f=()=>[e("defs",null,[e("linearGradient",{id:n("a"),x1:"64%",y1:"100%",x2:"64%","data-allow-mismatch":"attribute"},[l("#FFF",0,.5),l("#F2F3F5",100)])]),e("g",{opacity:".8","data-allow-mismatch":"children"},[e("path",{d:"M36 131V53H16v20H2v58h34z",fill:d("a")},null),e("path",{d:"M123 15h22v14h9v77h-31V15z",fill:d("a")},null)])],v=()=>[e("defs",null,[e("linearGradient",{id:n("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%","data-allow-mismatch":"attribute"},[l("#F2F3F5",0,.3),l("#F2F3F5",100)])]),e("g",{opacity:".8","data-allow-mismatch":"children"},[e("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:d("b")},null),e("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:d("b")},null)])],s=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",{"data-allow-mismatch":"children"},[e("linearGradient",{id:n(1),x1:"64%",y1:"100%",x2:"64%"},[l("#FFF",0,.5),l("#F2F3F5",100)]),e("linearGradient",{id:n(2),x1:"50%",x2:"50%",y2:"84%"},[l("#EBEDF0",0),l("#DCDEE0",100,0)]),e("linearGradient",{id:n(3),x1:"100%",x2:"100%",y2:"100%"},[i("#EAEDF0","#DCDEE0")]),e("radialGradient",{id:n(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[l("#EBEDF0",0),l("#FFF",100,0)])]),e("g",{fill:"none"},[f(),e("path",{fill:d(4),d:"M0 139h160v21H0z","data-allow-mismatch":"attribute"},null),e("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:d(2),"data-allow-mismatch":"attribute"},null),e("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7","data-allow-mismatch":"children"},[e("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:d(3)},null),e("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:d(3)},null),e("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:d(3)},null),e("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:d(3)},null)]),e("g",{transform:"translate(31 105)"},[e("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),e("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),e("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),x=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",{"data-allow-mismatch":"children"},[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(5)},[i("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:n(6)},[i("#EAEDF1","#DCDEE0")]),e("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:n(7)},[i("#EAEDF1","#DCDEE0")])]),f(),v(),e("g",{transform:"translate(36 50)",fill:"none"},[e("g",{transform:"translate(8)"},[e("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),e("rect",{fill:d(5),width:"64",height:"66",rx:"2","data-allow-mismatch":"attribute"},null),e("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),e("g",{transform:"translate(15 17)",fill:d(6),"data-allow-mismatch":"attribute"},[e("rect",{width:"34",height:"6",rx:"1"},null),e("path",{d:"M0 14h34v6H0z"},null),e("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),e("rect",{fill:d(7),y:"61",width:"88",height:"28",rx:"1","data-allow-mismatch":"attribute"},null),e("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),h=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(8),"data-allow-mismatch":"attribute"},[i("#EAEDF1","#DCDEE0")])]),f(),v(),u("c"),e("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:d(8),"data-allow-mismatch":"attribute"},null)]),C=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",{"data-allow-mismatch":"children"},[e("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:n(9)},[i("#EEE","#D8D8D8")]),e("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:n(10)},[i("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(11)},[i("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(12)},[i("#FFF","#F7F8FA")])]),f(),v(),u("d"),e("g",{transform:"rotate(-45 113 -4)",fill:"none","data-allow-mismatch":"children"},[e("rect",{fill:d(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),e("rect",{fill:d(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),e("circle",{stroke:d(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),e("circle",{fill:d(12),cx:"27",cy:"27",r:"16"},null),e("path",{d:"M37 7c-8 0-15 5-16 12",stroke:d(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),B=()=>{var m;if(p.image)return p.image();const E={error:h,search:C,network:s,default:x};return((m=E[c.image])==null?void 0:m.call(E))||e("img",{src:c.image},null)};return()=>e("div",{class:Y()},[e("div",{class:Y("image"),style:Ne(c.imageSize)},[B()]),_(),F()])}});const et=se(Xe),[pe,tt]=ae("grid"),ot={square:Boolean,center:re,border:re,gutter:te,reverse:Boolean,iconSize:te,direction:String,clickable:Boolean,columnNum:Ue(4)},ve=Symbol(pe);var at=Z({name:pe,props:ot,setup(c,{slots:p}){const{linkChildren:_}=Le(ve);return _({props:c}),()=>{var F;return e("div",{style:{paddingLeft:oe(c.gutter)},class:[tt(),{[qe]:c.border&&!c.gutter}]},[(F=p.default)==null?void 0:F.call(p)])}}});const st=se(at),[it,Q]=ae("grid-item"),lt=He({},Je,{dot:Boolean,text:String,icon:String,badge:te,iconColor:String,iconPrefix:String,badgeProps:Object});var nt=Z({name:it,props:lt,setup(c,{slots:p}){const{parent:_,index:F}=Oe(ve),k=je();if(!_)return;const n=le(()=>{const{square:f,gutter:v,columnNum:s}=_.props,x=`${100/+s}%`,h={flexBasis:x};if(f)h.paddingTop=x;else if(v){const C=oe(v);h.paddingRight=C,F.value>=+s&&(h.marginTop=C)}return h}),d=le(()=>{const{square:f,gutter:v}=_.props;if(f&&v){const s=oe(v);return{right:s,bottom:s,height:"auto"}}}),l=()=>{if(p.icon)return e(We,fe({dot:c.dot,content:c.badge},c.badgeProps),{default:p.icon});if(c.icon)return e(ue,{dot:c.dot,name:c.icon,size:_.props.iconSize,badge:c.badge,class:Q("icon"),color:c.iconColor,badgeProps:c.badgeProps,classPrefix:c.iconPrefix},null)},i=()=>{if(p.text)return p.text();if(c.text)return e("span",{class:Q("text")},[c.text])},u=()=>p.default?p.default():[l(),i()];return()=>{const{center:f,border:v,square:s,gutter:x,reverse:h,direction:C,clickable:B}=_.props,m=[Q("content",[C,{center:f,square:s,reverse:h,clickable:B,surround:v&&x}]),{[Ke]:v}];return e("div",{class:[Q({square:s})],style:n.value},[e("div",{role:B?"button":void 0,class:m,style:d.value,tabindex:B?0:void 0,onClick:k},[u()])])}}});const rt=se(nt),dt={class:"play-box",style:{height:"100%"}},ct={class:"play-top absolute"},ut={class:"play-right absolute"},pt={class:"interactive"},vt={class:"count"},mt={class:"count"},ht={class:"count"},ft={class:"play-content"},gt=["id"],yt={class:"details"},wt={class:"desc-txt title"},xt={key:0,class:"desc-txt actor"},bt={class:"wrapper"},_t={xmlns:"http://www.w3.org/2000/svg",class:"svg-icon",style:{width:"1em","margin-right":"6px",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",version:"1.1"},kt=Z({__name:"VerticalPlayer",props:{video:{},active:{type:Boolean},isSeries:{type:Boolean},hdlCmtPopup:{type:Function}},emits:["update:video","goNext"],setup(c,{emit:p}){const _=ge(),F=ye(),k=window.Telegram?.WebApp,n=new AbortController,d=y(null),l=y(null);let i=null;const u=y(!1),f=y(null),v=y(null),s=c,x=p,h=s.isSeries?s.video.seriesDescription:`${s.video.title}集 | ${s.video.seriesInfo.description}`,C=()=>{n.abort(),j(),F.replace({name:"discovery"})},B=()=>{const o=f.value;o&&(o.style.setProperty("--full-height",`${o.scrollHeight}px`),u.value=!u.value)},m=()=>{F.replace(`/series/${s.video.seriesShortId}`)},E=async o=>{if(!v.value){console.log("播放器加载失败");return}const t={el:v.value,playsinline:!0,plugins:o.includes(".m3u8")?[Ge]:[],ignores:["volume","play","time","fullscreen","cssfullscreen"],playbackRate:!1,"x5-video-player-type":"h5","x5-video-player-fullscreen":"false","x5-video-orientation":"portraint",width:"100%",height:"100%",videoInit:!0,preload:"metadata",url:o,closeVideoDblclick:!0,closePauseVideoFocus:!1,closePlayVideoFocus:!1,controls:{autoHide:!1,mode:"bottom"},commonStyle:{playedColor:"rgba(150, 150, 150, 0.3)",progressColor:"rgba(95, 95, 95, 0.3)",sliderBtnStyle:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#fff",border:"none",boxShadow:"none"}},mobile:{gradient:"none",disableGesture:!0},start:{isShowPause:!0,disableAnimate:!0}};i=new Ve(t),i.on("click",()=>{i?.paused?i.play():i?.pause()}),i.once("ready",()=>{s.isSeries&&i?.root?.querySelector(".xg-left-grid")?.appendChild(l.value)}),!s.isSeries&&s.active&&i.play().catch(()=>{}),i.on("ended",()=>{s.isSeries?i?.play():x("goNext")})};we(()=>{i?.pause()}),xe(()=>{k?.initData&&(s.isSeries||(window.TelegramWebviewProxy.postEvent("web_app_request_fullscreen",null),k.BackButton.show(),k.BackButton.onClick(()=>{window.history.length>1?(C(),window.TelegramWebviewProxy.postEvent("web_app_exit_fullscreen",null),k.BackButton.hide()):k.close()}))),i&&s.active&&i.play().catch(()=>{})});const U=async()=>{try{const o=await G.post("/api/video/url/query",{type:"episode",accessKey:s.video.episodeAccessKey},{signal:n.signal}),t=o.data.urls||o.data.data?.urls;if(t&&t.length>0)return t[0].cdnUrl||t[0].ossUrl;throw new Error("无法获取播放地址")}catch(o){throw console.error("获取播放地址失败:",o),o}};de(async()=>{if(await be(),s.video.playUrl)E(s.video.playUrl);else{const o=await U();x("update:video",{...s.video,playUrl:o}),E(o)}}),_e(()=>{n.abort(),j()});const j=()=>{i&&(i.destroy(),i=null)};ke(()=>s.active,o=>{i&&(o?i.play().catch(()=>{}):i.pause())});const $=y(s.video.userInteraction?.liked||!1),z=y(s.video.userInteraction?.favorited||!1),L=async()=>{let o=0,t="";if($.value)try{await G.post("/api/video/episode/reaction/remove",{shortId:s.video.shortId}),o=-1,t="已取消点赞",$.value=!$.value}catch(a){console.error("取消点赞失败",a),t="取消点赞失败"}else try{await G.post("/api/video/episode/activity",{shortId:s.video.shortId,type:"like"}),o=1,t="已点赞",$.value=!$.value}catch(a){console.error("点赞失败",a),t="点赞失败"}o!==0&&x("update:video",{...s.video,likeCount:s.video.likeCount+o,userInteraction:{...s.video.userInteraction,liked:$.value}}),N({message:t,duration:200,forbidClick:!0})},ee=async()=>{let o=0,t="";if(z.value)try{await G.post("/api/user/favorites/remove",{shortId:s.video.shortId}),o=-1,t="已取消收藏",z.value=!z.value}catch(a){console.error("取消收藏失败",a),t="取消收藏失败"}else try{await G.post("/api/video/episode/activity",{shortId:s.video.shortId,type:"favorite"}),o=1,t="已收藏",z.value=!z.value}catch(a){console.error("收藏失败",a),t="收藏失败"}o!==0&&x("update:video",{...s.video,favoriteCount:s.video.favoriteCount+o,userInteraction:{...s.video.userInteraction,favorited:z.value}}),N({message:t,duration:200,forbidClick:!0})},J=async o=>{o==="like"?await L():o==="star"&&await ee()};return(o,t)=>{const a=ue,P=Me;return w(),S("div",{class:O(["slider-video",{epsnav:o.isSeries}]),style:{height:"100%",width:"100vw"}},[r("div",dt,[r("div",ct,[!R(k)?.initData&&R(_).path.includes("/series/")?(w(),A(a,{key:0,name:"arrow-left",onClick:C})):W("",!0)]),r("div",ut,[r("div",pt,[r("div",{class:"i-col",onClick:t[0]||(t[0]=b=>J("like"))},[e(a,{name:"like",size:"31",style:{"padding-bottom":"10px"},class:O({active:$.value})},null,8,["class"]),r("span",vt,D(o.video.likeCount),1)]),r("div",{class:"i-col",onClick:t[1]||(t[1]=b=>o.hdlCmtPopup(o.video.shortId,o.video.commentCount||0))},[e(a,{name:"comment",size:"31",style:{"padding-bottom":"10px"}}),r("span",mt,D(o.video.commentCount||0),1)]),r("div",{class:"i-col",onClick:t[2]||(t[2]=b=>J("star"))},[e(a,{name:"star",size:"31",style:{"padding-bottom":"10px"},class:O({active:z.value})},null,8,["class"]),r("span",ht,D(o.video.favoriteCount),1)])])]),r("div",ft,[r("div",{id:o.video.shortId,ref_key:"refxg",ref:v},null,8,gt),r("div",{class:"play-bottom absolute",ref_key:"playBottom",ref:d,style:Fe({bottom:o.isSeries?"45px":"8px"})},[r("div",yt,[r("div",wt,D(o.video.seriesTitle),1),o.video.seriesInfo?.starring||o.video.seriesActor?(w(),S("div",xt,[(w(!0),S(K,null,X((o.video.seriesInfo?.starring||o.video.seriesActor||"").split(",").slice(0,2),b=>(w(),S("span",{key:b}," 演员•"+D(b),1))),128))])):W("",!0),r("div",bt,[r("div",{ref_key:"textRef",ref:f,class:O(["text",{expanded:u.value}]),onClick:B},D(R(h).length>160?R(h).slice(0,160)+"…":R(h)),3),r("div",{class:"toggle",onClick:B},D(u.value?"收起":"展开"),1)])]),o.isSeries?(w(),S("div",{key:0,class:"eps-btn",ref_key:"epsBtn",ref:l,style:{width:"100% !important","padding-left":"5px"},onClick:m},[e(P,{background:"rgba(77, 77, 77, 0)",color:"white",style:{width:"100%"},text:`剧集 · ${o.video.updateStatus}`,mode:"link"},{"left-icon":I(()=>[(w(),S("svg",_t,t[3]||(t[3]=[r("path",{d:"M802.133333 85.333333h-580.266666C98.986667 85.333333 0 184.32 0 307.2v409.6c0 122.88 98.986667 221.866667 221.866667 221.866667h580.266666c122.88 0 221.866667-98.986667 221.866667-221.866667V307.2c0-122.88-98.986667-221.866667-221.866667-221.866667z m-92.16 440.32l-307.2 204.8c-3.413333 3.413333-6.826667 3.413333-10.24 3.413334-3.413333 0-6.826667 0-6.826666-3.413334-6.826667 0-10.24-6.826667-10.24-13.653333V307.2c0-6.826667 3.413333-13.653333 10.24-13.653333s13.653333-3.413333 17.066666 0l307.2 204.8c3.413333 3.413333 6.826667 6.826667 6.826667 13.653333s-3.413333 10.24-6.826667 13.653333z",fill:""},null,-1)])))]),_:1},8,["text"])],512)):W("",!0)],4)])])],2)}}}),Ft=ce(kt,[["__scopeId","data-v-c513473c"]]),St={class:"player-container"},Ct={class:"cmt-popup"},Et={class:"cmt-content"},It={key:0,class:"loading-center"},Dt={style:{"font-size":"12px","margin-left":"3px"}},Bt={style:{color:"black"}},Pt={class:"comment-input"},$t=["disabled"],zt={key:0,class:"bottom-box"},Mt=Z({__name:"VertLayoutComp",props:{isSeries:{type:Boolean},seriesId:{}},setup(c){const p=c,_=y(1),F=y(!1),k=y(!1),n=y(!1),d=y(0),l=y(0),i=y(null),u=Se([]),f=y(""),v=y(!1),s=y(!1),x=y(!1),h=y([]),C=(t,a)=>{d.value=a,k.value=!k.value},B=async t=>{x.value=!1,h.value=[],l.value=t.activeIndex;const a=u.length-l.value-1;p.isSeries&&!F.value&&a<=2&&(_.value++,await U(_.value))},m=t=>{i.value=t},E=async t=>{const a=await G.get("/api/video/episodes",{params:{seriesShortId:t,page:1,size:200}}),P=a.data.data||a.data,{list:b,...M}=P;u.push(...b.map(V=>({...V,...M})))},U=async t=>{F.value=!0;try{const a=await G.get("/api/video/recommend",{params:{page:t,size:10}}),b=(a.data.data||a.data).list||[];if(b.length===0){N("暂无推荐内容");return}u.push(...b)}catch(a){console.error("加载推荐视频失败:",a),N(a.response?.data?.message||"加载失败，请重试")}F.value=!1};de(async()=>{try{p.isSeries?await U(_.value):p.seriesId&&await E(p.seriesId)}catch(t){console.error("初始化加载失败:",t),N("初始化失败，请刷新重试")}});const j=()=>{i.value?.slideNext()},$=t=>{t!==-1&&(l.value=t),i.value?.slideTo(t),n.value=!1},z=()=>{L(u[l.value].shortId)},L=async t=>{if(x.value)return;s.value=!0;const a=await G.get("/api/video/comments",{params:{episodeShortId:t,page:Math.floor(h.value.length/10)+1,size:10}}),P=a.data.data||a.data,{comments:b,total:M}=P;h.value.push(...b),s.value=!1,h.value.length>=M&&(x.value=!0)},ee=()=>{L(u[l.value].shortId)},J=t=>{const a=new Date(t),b=new Date().getTime()-a.getTime(),M=Math.floor(b/1e3),V=Math.floor(M/60),q=Math.floor(V/60),H=Math.floor(q/24);return H>0?`${H}天前`:q>0?`${q}小时前`:V>0?`${V}分钟前`:"刚刚"},o=async()=>{if(!v.value&&f.value.trim()){v.value=!0;try{await G.post("/api/video/episode/comment",{shortId:u[l.value].shortId,content:f.value.trim()}),N("评论成功"),f.value="",x.value=!1,h.value=[],await L(u[l.value].shortId)}catch(t){console.error("评论失败:",t),N(t.response?.data?.message||"评论失败")}finally{v.value=!1}}};return(t,a)=>{const P=Ae,b=et,M=Pe,V=Be,q=De,H=Te,me=rt,he=st;return w(),S(K,null,[r("div",St,[e(R($e),{direction:"vertical","slides-per-view":1,onSlideChange:B,speed:400,onSwiper:m,touchRatio:1,longSwipesRatio:.12,longSwipesMs:50,followFinger:!0,class:"player-swiper"},{default:I(()=>[(w(!0),S(K,null,X(u,(g,T)=>(w(),A(R(ze),{key:g.shortId},{default:I(()=>[Math.abs(l.value-T)<=1?(w(),A(Ft,{key:0,video:u[T],"onUpdate:video":ie=>u[T]=ie,active:l.value===T,isSeries:t.isSeries,hdlCmtPopup:C,onGoNext:j},null,8,["video","onUpdate:video","active","isSeries"])):W("",!0)]),_:2},1024))),128))]),_:1}),e(H,{show:k.value,"onUpdate:show":a[2]||(a[2]=g=>k.value=g),closeable:"","close-icon-position":"top-left","close-icon":"arrow-down",round:"",position:"bottom",style:{height:"60%"},"overlay-style":{background:"none"},"teleport-to":"body",onOpen:z,duration:"0.05"},{default:I(()=>[r("div",null,[r("div",Ct,D(d.value)+"条评论",1),r("div",Et,[s.value&&h.value.length===0?(w(),S("div",It,[e(P)])):!s.value&&h.value.length===0?(w(),A(b,{key:1,description:"暂无评论，快来抢沙发~"})):(w(),A(V,{key:2,loading:s.value,"onUpdate:loading":a[0]||(a[0]=g=>s.value=g),finished:x.value,"finished-text":"没有更多了",onLoad:ee},{default:I(()=>[(w(!0),S(K,null,X(h.value,g=>(w(),A(M,{key:g.id,"title-style":"color: #5f5858;"},{title:I(()=>[ne(D(g.nickname||g.username||"匿名用户")+" ",1),r("span",Dt,D(J(g.createdAt)),1)]),icon:I(()=>a[5]||(a[5]=[r("img",{src:"https://img.yzcdn.cn/vant/cat.jpeg",alt:"",style:{width:"32px",height:"32px","border-radius":"50%",margin:"7px 13px 0 0"}},null,-1)])),label:I(()=>[r("span",Bt,D(g.content),1)]),_:2},1024))),128))]),_:1},8,["loading","finished"]))]),r("div",Pt,[Ce(r("input",{"onUpdate:modelValue":a[1]||(a[1]=g=>f.value=g),type:"text",placeholder:"说点什么...",onKeyup:Ie(o,["enter"]),disabled:v.value},null,40,$t),[[Ee,f.value]]),e(q,{type:"primary",size:"small",loading:v.value,disabled:!f.value.trim()||v.value,onClick:o},{default:I(()=>a[6]||(a[6]=[ne(" 发送 ")])),_:1,__:[6]},8,["loading","disabled"])])])]),_:1},8,["show"])]),t.isSeries?W("",!0):(w(),S("div",zt,[e(H,{show:n.value,"onUpdate:show":a[3]||(a[3]=g=>n.value=g),closeable:"","close-icon":"arrow-down",round:"",position:"bottom",style:{height:"60%"},"overlay-style":{background:"none"},"teleport-to":"body",duration:"0.05"},{default:I(()=>[e(M,{title:"选集",label:`共${u.length}集`,"title-style":"font-weight: bold; font-size: 18px;"},null,8,["label"]),e(he,{"column-num":5,square:"",gutter:10,clickable:"",style:{"margin-top":"10px"}},{default:I(()=>[(w(!0),S(K,null,X(u,(g,T)=>(w(),A(me,{key:g.shortId,text:g.episodeTitle,onClick:ie=>$(T),class:O(["episode-item",{epsActive:l.value===T}]),bordered:!1},null,8,["text","onClick","class"]))),128))]),_:1})]),_:1},8,["show"]),e(M,{class:"eps-list",title:u[0]?.seriesInfo.updateStatus=="已完结"?`剧集 • 全${u.length}集`:`剧集 · 更新至${u.length}集`,icon:"bars","is-link":"","arrow-direction":"up",onClick:a[4]||(a[4]=g=>n.value=!n.value)},null,8,["title"])]))],64)}}}),Ot=ce(Mt,[["__scopeId","data-v-0bb3bef0"]]);export{Ot as V};
