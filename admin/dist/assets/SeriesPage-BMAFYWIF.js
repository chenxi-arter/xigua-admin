import{j as e}from"./index-D5f2_Mxj.js";import{j as xt,r as l}from"./react-vendor-BZ8KDC-J.js";import{F as d,s as r,d as Ue,T as gt,a as k,B as u,b as R,e as yt,f as x,I as A,g as De,h as mt,i as p,j as Y,k as Re,U as jt,R as G,C as w,l as ft,m as At,n as wt}from"./antd-vendor-aNvYRewR.js";import{C as vt,F as Ct,S as bt,a as v,E as St}from"./admin--tzWvWSE.js";import{f as q}from"./format-0Cj3JWJt.js";import{R as It}from"./EyeOutlined-C1Jj2g_r.js";import{R as kt}from"./CopyOutlined-DS5jgXfz.js";import{R as Et}from"./DownloadOutlined-CUhkP7FE.js";import"./client-BbHh6MVO.js";import"./utils-vendor-NIGUFBhG.js";function zt(){const H=t=>!!t&&/^(https?:)?\/\//i.test(t),O=xt(),[Le,de]=l.useState(!1),[Oe,V]=l.useState([]),[Be,N]=l.useState(0),[B,K]=l.useState(1),[E,$]=l.useState(10),[Me,C]=l.useState(!1),[i,ce]=l.useState(null),[Fe,J]=l.useState(!1),[M,W]=l.useState(null),[Qe,X]=l.useState(!1),[F,Z]=l.useState(null),[b]=d.useForm(),[ze,_]=l.useState(!1),[j,Pe]=l.useState(null),[T,Ye]=l.useState("active"),[ee,pe]=l.useState(!1),[te,se]=l.useState(0),[Ge,he]=l.useState(!1),[Q,ue]=l.useState(""),[xe,f]=l.useState(null),[qe,z]=l.useState(!1),[ge,ye]=l.useState(null),[me,je]=l.useState(0),[He,fe]=l.useState(!1),[le,Ve]=l.useState(null),[Ne,Ae]=l.useState(!1),[Ke,$e]=l.useState([]),[Je,We]=l.useState(0),[ae,Xe]=l.useState(1),[L,Ze]=l.useState(10),[U,_e]=l.useState(""),[D,et]=l.useState(void 0),ne=l.useRef(void 0),[we,tt]=l.useState({}),[ve,st]=l.useState([]),[S,lt]=l.useState(null),Ce=l.useCallback(async()=>{try{const t=await vt.list(1,200),s=(t.items||[]).map(n=>({value:n.id,label:n.name||String(n.categoryId||n.id)}));st(s);const o={};(t.items||[]).forEach(n=>{const a=n.name||String(n.categoryId||n.id);o[String(n.id)]=a,n.categoryId!==void 0&&n.categoryId!==null&&(o[String(n.categoryId)]=a)}),tt(o)}catch{}},[]),be=l.useCallback(async()=>{try{const t=await Ct.getByTypes("region,language,status,year");lt(t)}catch(t){console.error("è·å–ç­›é€‰é€‰é¡¹å¤±è´¥:",t),r.error("è·å–ç­›é€‰é€‰é¡¹å¤±è´¥ï¼Œè¯·è”ç³»åç«¯å®ç° GET /api/admin/options æ¥å£")}},[]),c=l.useCallback(async(t=B,s=E,o=U,n=D)=>{de(!0);try{if(o&&o.trim()){const a={keyword:o.trim(),page:t,size:s};n!==void 0&&(a.categoryId=n);const y=await bt.fuzzy(a),m=typeof y=="object"&&y&&"data"in y?y.data:y,P=m?.list||m?.items||[];V(P),N(m?.total||P.length),K(m?.page||t),$(m?.size||s)}else{const a={};if(n!==void 0&&(a.categoryId=n),T==="deleted"){const g=await v.listDeleted(t,s);V(g.items||[]),N(g.total||0),K(g.page||t),$(g.size||s)}else{const g=await v.list(t,s,a);V(g.items),N(g.total),K(g.page),$(g.size)}}}finally{de(!1)}},[U,T,D]);l.useEffect(()=>{c(1,E,U,D)},[c,U,T,D]),l.useEffect(()=>{Ce()},[Ce]),l.useEffect(()=>{be()},[be]);const ie=l.useCallback(async(t,s=ae,o=L)=>{Ae(!0);try{const n=await St.list(s,o,{seriesId:t}),a=n.items||[];$e(a),We(n.total),Xe(n.page),Ze(n.size)}finally{Ae(!1)}},[ae,L]),at=()=>{ce(null),b.resetFields(),f(null),C(!0)},Se=l.useCallback(t=>{Ve(t),fe(!0),ie(t.id,1,L)},[ie,L]),Ie=l.useCallback(t=>{O(`/episodes?seriesId=${t.id}`)},[O]),ke=l.useCallback(t=>{ce(t);const s={...t};s.releaseDate&&typeof s.releaseDate=="string"&&(s.releaseDate=Ue(s.releaseDate)),b.setFieldsValue(s),t.coverUrl&&H(t.coverUrl)&&f(t.coverUrl),C(!0)},[b]),Ee=l.useCallback(t=>{W(t),J(!0)},[]),nt=l.useCallback(async()=>{if(M)try{await v.remove(M.id),r.success("å·²åˆ é™¤"),c()}catch{r.error("åˆ é™¤å¤±è´¥")}finally{J(!1),W(null)}},[M,c]),it=l.useCallback(()=>{J(!1),W(null)},[]),rt=l.useCallback(async()=>{if(!(!i||!F))try{await v.update(i.id,F),r.success("å·²æ›´æ–°"),C(!1),f(null),c()}catch{r.error("ä¿®æ”¹å¤±è´¥")}finally{X(!1),Z(null)}},[i,F,c]),ot=l.useCallback(()=>{X(!1),Z(null)},[]),re=l.useCallback(t=>{t.coverUrl?(Pe({url:t.coverUrl,title:t.title}),_(!0)):r.warning("è¯¥ç³»åˆ—æš‚æ— å°é¢")},[]),dt=l.useCallback(async(t,s)=>{try{r.loading("æ­£åœ¨ä¸‹è½½å°é¢...",0);const o=s.replace(/[<>:"/\\|?*]/g,"_");try{const n=await fetch(t,{mode:"cors",credentials:"omit"});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const a=await n.blob();if(a.size===0)throw new Error("ä¸‹è½½çš„æ–‡ä»¶ä¸ºç©º");const g=window.URL.createObjectURL(a),y=document.createElement("a");y.href=g,y.download=o,y.style.display="none",document.body.appendChild(y),y.click(),setTimeout(()=>{document.body.removeChild(y),window.URL.revokeObjectURL(g)},100),r.destroy(),r.success(`å°é¢å·²ä¿å­˜ä¸º: ${o}`);return}catch(n){console.warn("Fetchæ–¹æ³•å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ³•:",n);const a=document.createElement("a");a.href=t,a.download=o,a.target="_blank",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),r.destroy(),r.success("å·²æ‰“å¼€ä¸‹è½½é“¾æ¥ï¼Œè¯·æ‰‹åŠ¨ä¿å­˜")}}catch(o){r.destroy(),console.error("ä¸‹è½½å°é¢å¤±è´¥:",o),r.error(`ä¿å­˜å¤±è´¥: ${o instanceof Error?o.message:"æœªçŸ¥é”™è¯¯"}`)}},[]),ct=async t=>{const{file:s,onSuccess:o,onError:n}=t;if(!i){r.warning("æ–°å»ºç³»åˆ—æ—¶è¯·ç›´æ¥å¡«å†™å°é¢URLï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹å°é¢"),n?.(new Error("æ–°å»ºæ¨¡å¼ä¸æ”¯æŒæ–‡ä»¶ä¸Šä¼ "));return}try{pe(!0),se(0);const a=s;if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(a.type))throw new Error("ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œè¯·ä¸Šä¼  JPEGã€PNGã€WebP æˆ– GIF å›¾ç‰‡");const y=10*1024*1024;if(a.size>y)throw new Error("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 10MB");console.log("[ä¸Šä¼ ] å¼€å§‹è·å–é¢„ç­¾å URL",{seriesId:i.id,filename:a.name,contentType:a.type,fileSize:a.size});const m=await v.getPresignedUploadUrl(i.id,{filename:a.name,contentType:a.type||"image/jpeg"});console.log("[ä¸Šä¼ ] è·å–é¢„ç­¾å URL æˆåŠŸ",m),await new Promise((P,oe)=>{const h=new XMLHttpRequest;h.upload.addEventListener("progress",I=>{if(I.lengthComputable){const Te=Math.round(I.loaded/I.total*100);se(Te),console.log("[ä¸Šä¼ ] è¿›åº¦:",Te+"%")}}),h.addEventListener("load",()=>{if(console.log("[ä¸Šä¼ ] è¯·æ±‚å®Œæˆ",{status:h.status,statusText:h.statusText,responseText:h.responseText}),h.status===200||h.status===204)console.log("[ä¸Šä¼ ] ä¸Šä¼ åˆ° R2 æˆåŠŸ"),P();else{const I=`ä¸Šä¼ å¤±è´¥ (çŠ¶æ€ç : ${h.status})${h.responseText?": "+h.responseText:""}`;console.error("[ä¸Šä¼ ] å¤±è´¥:",I),oe(new Error(I))}}),h.addEventListener("error",I=>{console.error("[ä¸Šä¼ ] ç½‘ç»œé”™è¯¯:",I),console.error("[ä¸Šä¼ ] å¯èƒ½çš„åŸå› : CORS é…ç½®é—®é¢˜ã€ç½‘ç»œä¸­æ–­ã€æˆ– R2 è®¿é—®æƒé™é—®é¢˜"),oe(new Error("ä¸Šä¼ å¤±è´¥ï¼šç½‘ç»œé”™è¯¯æˆ– CORS é…ç½®é—®é¢˜"))}),h.addEventListener("abort",()=>{console.warn("[ä¸Šä¼ ] ä¸Šä¼ å·²å–æ¶ˆ"),oe(new Error("ä¸Šä¼ å·²å–æ¶ˆ"))}),console.log("[ä¸Šä¼ ] å¼€å§‹ä¸Šä¼ åˆ° R2",{url:m.uploadUrl.substring(0,100)+"...",contentType:a.type||"image/jpeg"}),h.open("PUT",m.uploadUrl),h.setRequestHeader("Content-Type",a.type||"image/jpeg"),h.send(a)}),await v.notifyUploadComplete(i.id,{fileKey:m.fileKey,publicUrl:m.publicUrl,fileSize:a.size}),b.setFieldsValue({coverUrl:m.publicUrl}),f(m.publicUrl),r.success("å°é¢å·²ä¸Šä¼ åˆ° R2 å­˜å‚¨"),c(B,E),o?.({})}catch(a){n?.(a instanceof Error?a:new Error(String(a))),r.error(`å°é¢ä¸Šä¼ å¤±è´¥: ${a instanceof Error?a.message:String(a)}`)}finally{pe(!1),se(0)}},pt=async()=>{if(!i){r.warning("æ–°å»ºç³»åˆ—æ—¶è¯·ç›´æ¥å¡«å†™å°é¢URLï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹å°é¢");return}if(!Q||!/^https?:\/\//i.test(Q)){r.warning("è¯·è¾“å…¥æœ‰æ•ˆçš„å°é¢ URL");return}try{he(!0),await v.coverFromUrl(i.id,Q.trim());const t=await v.get(i.id);b.setFieldsValue({coverUrl:t.coverUrl}),f(t.coverUrl),r.success("å·²é€šè¿‡ URL æ›´æ–°å°é¢"),ue(""),c(B,E)}catch{r.error("é€šè¿‡ URL ä¸Šä¼ å°é¢å¤±è´¥")}finally{he(!1)}},ht=l.useMemo(()=>[{title:"ID",dataIndex:"id",width:80},{title:"æ ‡é¢˜",dataIndex:"title",width:200},{title:"æè¿°",dataIndex:"description",width:300,ellipsis:{showTitle:!1},render:t=>e.jsx(gt,{placement:"topLeft",title:t||"æ— æè¿°",children:e.jsx("span",{style:{cursor:"pointer"},children:t||e.jsx("span",{style:{color:"#ccc"},children:"æ— æè¿°"})})})},{title:"å°é¢",dataIndex:"coverUrl",width:100,render:(t,s)=>t?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:t,alt:"cover",style:{width:56,height:56,objectFit:"cover",borderRadius:6,cursor:"pointer",transition:"opacity 0.2s"},onClick:()=>re(s),onMouseEnter:o=>{o.currentTarget.style.opacity="0.8"},onMouseLeave:o=>{o.currentTarget.style.opacity="1"}}),e.jsx("div",{style:{position:"absolute",top:2,right:2,background:"rgba(0,0,0,0.6)",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>re(s),children:e.jsx(It,{style:{color:"white",fontSize:10}})})]}):"-"},{title:"åˆ†ç±»",dataIndex:"categoryId",width:120,render:(t,s)=>s.category?.name?s.category.name:t==null?e.jsx("span",{style:{color:"#999"},children:"æœªåˆ†ç±»"}):we[String(t)]||`ID:${t}`},{title:"åœ°åŒº",dataIndex:"regionOption",width:100,render:t=>t?.name||e.jsx("span",{style:{color:"#999"},children:"-"})},{title:"è¯­è¨€",dataIndex:"languageOption",width:100,render:t=>t?.name||e.jsx("span",{style:{color:"#999"},children:"-"})},{title:"çŠ¶æ€",dataIndex:"statusOption",width:100,render:t=>t?.name||e.jsx("span",{style:{color:"#999"},children:"-"})},{title:"å¹´ä»½",dataIndex:"yearOption",width:100,render:t=>t?.name||e.jsx("span",{style:{color:"#999"},children:"-"})},{title:"åˆ›å»ºæ—¶é—´",dataIndex:"createdAt",width:150,render:t=>q(t)},{title:"æ›´æ–°æ—¶é—´",dataIndex:"updatedAt",width:150,render:t=>q(t)},{title:"æ“ä½œ",width:420,render:(t,s)=>e.jsx(k,{children:T==="deleted"?e.jsx(u,{type:"link",onClick:async()=>{try{await v.restore(s.id),r.success("å·²æ¢å¤"),c()}catch{r.error("æ¢å¤å¤±è´¥")}},children:"æ¢å¤"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{onClick:()=>ke(s),type:"link",children:"ç¼–è¾‘"}),e.jsx(u,{onClick:()=>Ee(s),danger:!0,type:"link",children:"åˆ é™¤"}),e.jsx(u,{type:"link",onClick:()=>Se(s),children:"æŸ¥çœ‹å‰§é›†"}),e.jsx(u,{type:"link",onClick:()=>Ie(s),children:"ç®¡ç†å‰§é›†"})]})})}],[Ee,ke,Ie,Se,re,T,c,we]),ut=l.useCallback(async()=>{try{const t=await b.validateFields();if(t.releaseDate&&Ue.isDayjs(t.releaseDate)&&(t.releaseDate=t.releaseDate.format("YYYY-MM-DD")),i)Z(t),X(!0);else{const s=await v.create(t);r.success("ç³»åˆ—åˆ›å»ºæˆåŠŸï¼"),R.confirm({title:"åˆ›å»ºæˆåŠŸ",content:"æ˜¯å¦ç°åœ¨æ‰¹é‡ä¸Šä¼ å‰§é›†ï¼Ÿ",okText:"æ‰¹é‡ä¸Šä¼ ",cancelText:"ç¨åä¸Šä¼ ",onOk:()=>{ye(s.id||s.data?.id),z(!0),je(0)},onCancel:()=>{C(!1),f(null),c()}})}}catch(t){console.error("Form validation failed:",t),r.error("æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥è¡¨å•")}},[i,b,c]);return e.jsxs("div",{className:"page",children:[e.jsxs(k,{className:"page-toolbar",wrap:!0,children:[e.jsx(u,{type:"primary",onClick:at,children:"æ–°å»ºç³»åˆ—"}),e.jsx(yt,{options:[{label:"æ­£å¸¸",value:"active"},{label:"å›æ”¶ç«™",value:"deleted"}],value:T,onChange:t=>Ye(t)}),e.jsx(x,{placeholder:"é€‰æ‹©ç±»å‹",style:{width:150},allowClear:!0,value:D,onChange:t=>{et(t),c(1,E,U,t)},options:ve}),e.jsx(A,{placeholder:"æœç´¢ç³»åˆ—ï¼ˆæ ‡é¢˜å…³é”®å­—ï¼‰",style:{width:280},allowClear:!0,onChange:t=>{const s=t.target.value||"";_e(s),ne.current&&window.clearTimeout(ne.current),ne.current=window.setTimeout(()=>{c(1,E,s,D)},300)}}),e.jsx(u,{onClick:()=>c(),children:"åˆ·æ–°"})]}),e.jsx(De,{rowKey:"id",loading:Le,dataSource:Oe,columns:ht,scroll:{x:1400},pagination:{current:B,pageSize:E,total:Be,position:["bottomCenter"],onChange:(t,s)=>c(t,s,U)}}),e.jsx(mt,{title:le?`ç³»åˆ—ã€Œ${le.title}ã€çš„å‰§é›†`:"å‰§é›†",open:He,onClose:()=>fe(!1),width:720,children:e.jsx(De,{rowKey:"id",loading:Ne,dataSource:Ke,columns:[{title:"ID",dataIndex:"id",width:100},{title:"é›†æ•°",dataIndex:"episodeNumber",width:80},{title:"æ ‡é¢˜",dataIndex:"title"},{title:"æ—¶é•¿(ç§’)",dataIndex:"duration",width:100},{title:"çŠ¶æ€",dataIndex:"status",width:100}],pagination:{current:ae,pageSize:L,total:Je,position:["bottomCenter"],onChange:(t,s)=>{ie(le.id,t,s)}}})}),e.jsx(R,{title:i?"ç¼–è¾‘ç³»åˆ—":"æ–°å»ºç³»åˆ—",open:Me,onCancel:()=>C(!1),onOk:ut,okText:"ä¿å­˜",cancelText:"å–æ¶ˆ",width:900,style:{top:20},children:e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",paddingRight:8},children:[i&&e.jsxs("div",{style:{background:"#f5f5f5",padding:"16px",borderRadius:"8px",marginBottom:"20px"},children:[e.jsx(p.Title,{level:5,style:{marginTop:0,marginBottom:12},children:"ğŸ“Š åªè¯»ä¿¡æ¯"}),e.jsxs(k,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p.Text,{type:"secondary",children:"ID:"}),e.jsx(p.Text,{strong:!0,children:i.id})]}),i.shortId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p.Text,{type:"secondary",children:"Short ID:"}),e.jsxs(k,{children:[e.jsx(p.Text,{code:!0,children:i.shortId}),e.jsx(u,{size:"small",icon:e.jsx(kt,{}),onClick:()=>{navigator.clipboard.writeText(i.shortId||""),r.success("Short ID å·²å¤åˆ¶")}})]})]}),i.externalId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p.Text,{type:"secondary",children:"External ID:"}),e.jsx(p.Text,{code:!0,children:i.externalId})]}),i.playCount!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p.Text,{type:"secondary",children:"æ’­æ”¾æ¬¡æ•°:"}),e.jsx(p.Text,{strong:!0,children:i.playCount.toLocaleString()})]}),i.totalEpisodes!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p.Text,{type:"secondary",children:"æ€»é›†æ•°:"}),e.jsx(p.Text,{strong:!0,children:i.totalEpisodes})]}),i.createdAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p.Text,{type:"secondary",children:"åˆ›å»ºæ—¶é—´:"}),e.jsx(p.Text,{children:q(i.createdAt)})]}),i.updatedAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p.Text,{type:"secondary",children:"æ›´æ–°æ—¶é—´:"}),e.jsx(p.Text,{children:q(i.updatedAt)})]})]})]}),e.jsxs(d,{form:b,layout:"vertical",children:[e.jsx(Y,{orientation:"left",children:"ğŸ“„ åŸºæœ¬ä¿¡æ¯"}),e.jsx(d.Item,{name:"title",label:"æ ‡é¢˜",rules:[{required:!0,message:"è¯·è¾“å…¥æ ‡é¢˜"}],children:e.jsx(A,{placeholder:"è¯·è¾“å…¥ç³»åˆ—æ ‡é¢˜"})}),e.jsx(d.Item,{name:"description",label:"æè¿°",children:e.jsx(A.TextArea,{rows:3,placeholder:"è¯·è¾“å…¥ç³»åˆ—æè¿°"})}),e.jsx(d.Item,{name:"coverUrl",label:"å°é¢åœ°å€",children:e.jsx(A,{placeholder:"å¯ç›´æ¥å¡«å†™å°é¢ URLï¼Œæˆ–åœ¨ä¸‹æ–¹é€‰æ‹©å›¾ç‰‡æ–‡ä»¶",onChange:t=>{const s=t.target.value;s&&H(s)?f(s):s||f(null)}})}),(xe||i?.coverUrl&&H(i.coverUrl))&&e.jsxs("div",{style:{marginBottom:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:14,color:"#666",marginBottom:8},children:"å°é¢é¢„è§ˆï¼š"}),e.jsx(Re,{src:xe||i?.coverUrl,alt:"cover preview",style:{maxWidth:"100%",maxHeight:200,objectFit:"contain"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN"})]}),i&&e.jsx("div",{style:{marginBottom:16},children:e.jsxs(k,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(k,{align:"start",style:{width:"100%",justifyContent:"space-between"},children:[e.jsx(jt,{accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",showUploadList:!1,customRequest:ct,disabled:ee,children:e.jsx(u,{loading:ee,children:"ä¸Šä¼ å°é¢æ–‡ä»¶"})}),e.jsxs(k,{children:[e.jsx(A,{placeholder:"é€šè¿‡å°é¢ URL æ›´æ–°",style:{width:320},value:Q,onChange:t=>ue(t.target.value)}),e.jsx(u,{loading:Ge,onClick:pt,children:"æ›´æ–°å°é¢"})]})]}),ee&&te>0&&e.jsx("div",{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:8,background:"#f0f0f0",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",background:"#1890ff",width:`${te}%`,transition:"width 0.3s ease"}})}),e.jsxs("span",{style:{fontSize:12,color:"#666",minWidth:40},children:[te,"%"]})]})})]})}),!i&&e.jsx("div",{style:{marginBottom:16,padding:"12px 16px",background:"#f6f8fa",borderRadius:6,border:"1px solid #e1e4e8"},children:e.jsx("div",{style:{fontSize:14,color:"#586069",marginBottom:8},children:"ğŸ’¡ æç¤ºï¼šæ–°å»ºç³»åˆ—æ—¶è¯·ç›´æ¥å¡«å†™å°é¢URLï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹å°é¢"})}),e.jsx(Y,{orientation:"left",children:"ğŸ‘¥ äººå‘˜ä¿¡æ¯"}),e.jsx(d.Item,{name:"starring",label:"ä¸»æ¼”",tooltip:"å¤šä¸ªä¸»æ¼”ç”¨é€—å·åˆ†éš”",children:e.jsx(A,{placeholder:"å¦‚ï¼šå¼ ä¸‰,æå››,ç‹äº”"})}),e.jsx(d.Item,{name:"actor",label:"æ¼”å‘˜",tooltip:"å¤šä¸ªæ¼”å‘˜ç”¨é€—å·åˆ†éš”",children:e.jsx(A,{placeholder:"å¦‚ï¼šå¼ ä¸‰,æå››,ç‹äº”,èµµå…­"})}),e.jsx(d.Item,{name:"director",label:"å¯¼æ¼”",tooltip:"å¤šä¸ªå¯¼æ¼”ç”¨é€—å·åˆ†éš”",children:e.jsx(A,{placeholder:"å¦‚ï¼šé™ˆå¯¼,åˆ˜å¯¼"})}),e.jsx(Y,{orientation:"left",children:"ğŸ·ï¸ åˆ†ç±»ä¿¡æ¯"}),e.jsx(d.Item,{name:"categoryId",label:"åˆ†ç±»",children:e.jsx(x,{placeholder:"è¯·é€‰æ‹©åˆ†ç±»",allowClear:!0,options:ve,showSearch:!0,filterOption:(t,s)=>(s?.label??"").toLowerCase().includes(t.toLowerCase())})}),e.jsxs(G,{gutter:16,children:[e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"regionOptionId",label:"åœ°åŒº",children:e.jsx(x,{placeholder:"è¯·é€‰æ‹©åœ°åŒº",allowClear:!0,loading:!S,options:S?.region.map(t=>({value:t.id,label:t.name})),showSearch:!0,filterOption:(t,s)=>(s?.label??"").toLowerCase().includes(t.toLowerCase())})})}),e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"languageOptionId",label:"è¯­è¨€",children:e.jsx(x,{placeholder:"è¯·é€‰æ‹©è¯­è¨€",allowClear:!0,loading:!S,options:S?.language.map(t=>({value:t.id,label:t.name})),showSearch:!0,filterOption:(t,s)=>(s?.label??"").toLowerCase().includes(t.toLowerCase())})})})]}),e.jsxs(G,{gutter:16,children:[e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"statusOptionId",label:"çŠ¶æ€",children:e.jsx(x,{placeholder:"è¯·é€‰æ‹©çŠ¶æ€",allowClear:!0,loading:!S,options:S?.status.map(t=>({value:t.id,label:t.name})),showSearch:!0,filterOption:(t,s)=>(s?.label??"").toLowerCase().includes(t.toLowerCase())})})}),e.jsx(w,{span:12,children:e.jsx(d.Item,{name:"yearOptionId",label:"å¹´ä»½",children:e.jsx(x,{placeholder:"è¯·é€‰æ‹©å¹´ä»½",allowClear:!0,loading:!S,options:S?.year.map(t=>({value:t.id,label:t.name})),showSearch:!0,filterOption:(t,s)=>(s?.label??"").toLowerCase().includes(t.toLowerCase())})})})]}),e.jsx(Y,{orientation:"left",children:"ğŸ“… çŠ¶æ€ä¿¡æ¯"}),e.jsxs(G,{gutter:16,children:[e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"score",label:"è¯„åˆ†",tooltip:"0-10åˆ†",children:e.jsx(A,{type:"number",step:"0.1",min:0,max:10,placeholder:"å¦‚ï¼š8.5"})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"upStatus",label:"æ›´æ–°çŠ¶æ€",children:e.jsxs(x,{placeholder:"è¯·é€‰æ‹©",allowClear:!0,children:[e.jsx(x.Option,{value:"æ›´æ–°ä¸­",children:"æ›´æ–°ä¸­"}),e.jsx(x.Option,{value:"å·²å®Œç»“",children:"å·²å®Œç»“"})]})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"upCount",label:"æ›´æ–°æ¬¡æ•°",children:e.jsx(A,{type:"number",min:0,placeholder:"æ›´æ–°æ¬¡æ•°"})})})]}),e.jsxs(G,{gutter:16,children:[e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"releaseDate",label:"å‘å¸ƒæ—¥æœŸ",children:e.jsx(ft,{style:{width:"100%"},placeholder:"é€‰æ‹©å‘å¸ƒæ—¥æœŸ",format:"YYYY-MM-DD"})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"isCompleted",label:"æ˜¯å¦å®Œç»“",children:e.jsxs(x,{placeholder:"è¯·é€‰æ‹©",allowClear:!0,children:[e.jsx(x.Option,{value:!0,children:"æ˜¯"}),e.jsx(x.Option,{value:!1,children:"å¦"})]})})}),e.jsx(w,{span:8,children:e.jsx(d.Item,{name:"isActive",label:"æ˜¯å¦æ´»è·ƒ",children:e.jsxs(x,{placeholder:"è¯·é€‰æ‹©",allowClear:!0,children:[e.jsx(x.Option,{value:1,children:"æ­£å¸¸"}),e.jsx(x.Option,{value:0,children:"å·²åˆ é™¤"})]})})})]})]})]})}),e.jsx(R,{title:"ç¡®è®¤åˆ é™¤",open:Fe,onOk:nt,onCancel:it,okText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",okType:"danger",children:e.jsxs("p",{children:["ç¡®å®šè¦åˆ é™¤ç³»åˆ—ã€Œ",M?.title,"ã€å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"]})}),e.jsx(R,{title:"ç¡®è®¤ä¿®æ”¹",open:Qe,onOk:rt,onCancel:ot,okText:"ç¡®è®¤ä¿®æ”¹",cancelText:"å–æ¶ˆ",children:e.jsxs("p",{children:["ç¡®å®šè¦ä¿®æ”¹ç³»åˆ—ã€Œ",F?.title,"ã€å—ï¼Ÿ"]})}),e.jsx(R,{title:`å°é¢é¢„è§ˆ - ${j?.title}`,open:ze,onCancel:()=>_(!1),footer:[e.jsx(u,{onClick:()=>_(!1),children:"å…³é—­"},"close"),e.jsx(u,{onClick:()=>{j&&navigator.clipboard.writeText(j.url).then(()=>{r.success("å°é¢åœ°å€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(()=>{r.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")})},children:"å¤åˆ¶åœ°å€"},"copy"),e.jsx(u,{type:"primary",icon:e.jsx(Et,{}),onClick:()=>{if(j){const t=j.url.split("."),s=t.length>1?t[t.length-1].split("?")[0]:"jpg",n=`${j.title.replace(/[<>:"/\\|?*]/g,"_")}_cover.${s}`;dt(j.url,n)}},children:"ä¿å­˜å°é¢"},"download")],width:600,centered:!0,children:j&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Re,{src:j.url,alt:j.title,style:{maxWidth:"100%",maxHeight:"400px"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN"}),e.jsxs("div",{style:{marginTop:16,fontSize:14,color:"#666"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ç³»åˆ—æ ‡é¢˜ï¼š"}),j.title]}),e.jsx("p",{children:e.jsx("strong",{children:"å°é¢åœ°å€ï¼š"})}),e.jsx("div",{style:{background:"#f5f5f5",padding:"8px 12px",borderRadius:4,wordBreak:"break-all",fontSize:12,fontFamily:"Monaco, Menlo, monospace"},children:j.url})]})]})}),e.jsx(R,{title:"æ‰¹é‡ä¸Šä¼ å‰§é›†",open:qe,onCancel:()=>{z(!1),ye(null),je(0),C(!1),f(null),c()},footer:null,width:800,children:e.jsxs(At,{children:[e.jsx(wt,{current:me,items:[{title:"é€‰æ‹©æ–¹å¼",description:"é€‰æ‹©ä¸Šä¼ æ–¹å¼"},{title:"ä¸Šä¼ å‰§é›†",description:"æ‰¹é‡ä¸Šä¼ å‰§é›†ä¿¡æ¯"},{title:"å®Œæˆ",description:"ä¸Šä¼ å®Œæˆ"}],style:{marginBottom:24}}),me===0&&e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px"},children:[e.jsx(p.Title,{level:4,children:"é€‰æ‹©å‰§é›†ä¸Šä¼ æ–¹å¼"}),e.jsxs(k,{direction:"vertical",size:"large",style:{marginTop:32},children:[e.jsx(u,{type:"primary",size:"large",onClick:()=>{r.info("è·³è½¬åˆ°å‰§é›†ç®¡ç†é¡µé¢"),O(`/episodes?seriesId=${ge}`),z(!1),C(!1),f(null)},style:{width:300,height:60},children:"å‰å¾€å‰§é›†ç®¡ç†é¡µé¢é€ä¸ªæ·»åŠ "}),e.jsx(u,{size:"large",onClick:()=>{r.info("æ‰¹é‡å¯¼å…¥åŠŸèƒ½å¼€å‘ä¸­ï¼Œè¯·ä½¿ç”¨å‰§é›†ç®¡ç†é¡µé¢"),O(`/episodes?seriesId=${ge}`),z(!1),C(!1),f(null)},style:{width:300,height:60},children:"æ‰¹é‡å¯¼å…¥ï¼ˆå¼€å‘ä¸­ï¼‰"})]}),e.jsx("div",{style:{marginTop:32,padding:16,background:"#f6f8fa",borderRadius:8},children:e.jsx(p.Text,{type:"secondary",children:"ğŸ’¡ æç¤ºï¼šåˆ›å»ºç³»åˆ—åï¼Œæ‚¨å¯ä»¥åœ¨å‰§é›†ç®¡ç†é¡µé¢æ·»åŠ å’Œç®¡ç†è¯¥ç³»åˆ—çš„æ‰€æœ‰å‰§é›†"})})]})]})})]})}export{zt as default};
