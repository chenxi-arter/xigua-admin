import{d as C,t as h,c as D,r as O,u as Y,a,w as N,e as E,h as q,i as F,H as J,Y as Z,Z as Q,$ as I,l as V,J as X,a0 as tt,a1 as et,a2 as nt,b as ot,a3 as at,L as st,a4 as lt,n as it,a5 as rt,a6 as ct,a7 as ut,a8 as dt,a9 as mt,aa as ft,ab as gt,P as _t,o as pt,p as vt,q as z,y as t,z as R,x as m,D as Bt,T as yt,s as g,S as bt,ac as _,ad as wt,k as ht,U as Ct,ae as Et,_ as kt}from"./index-_5rAYpry.js";import{B as T}from"./index-DEO0VS8-.js";import{u as xt}from"./use-placeholder-Bk9d9jTs.js";import{u as At,r as St}from"./use-route-CLu1Ug9Z.js";const[$,U]=D("action-bar"),K=Symbol($),Tt={placeholder:Boolean,safeAreaInsetBottom:h};var Pt=C({name:$,props:Tt,setup(e,{slots:l}){const s=O(),i=xt(s,U),{linkChildren:r}=Y(K);r();const d=()=>{var n;return a("div",{ref:s,class:[U(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(n=l.default)==null?void 0:n.call(l)])};return()=>e.placeholder?i(d):d()}});const Dt=N(Pt),[Ot,Nt]=D("action-bar-button"),Ft=E({},St,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var It=C({name:Ot,props:Ft,setup(e,{slots:l}){const s=At(),{parent:i,index:r}=q(K),d=F(()=>{if(i){const c=i.children[r.value-1];return!(c&&"isButton"in c)}}),n=F(()=>{if(i){const c=i.children[r.value+1];return!(c&&"isButton"in c)}});return J({isButton:!0}),()=>{const{type:c,icon:B,text:y,color:k,loading:x,disabled:A}=e;return a(T,{class:Nt([c,{last:n.value,first:d.value}]),size:"large",type:c,icon:B,color:k,loading:x,disabled:A,onClick:s},{default:()=>[l.default?l.default():y]})}}});const H=N(It),[zt,f,w]=D("dialog"),Rt=E({},at,{title:String,theme:String,width:it,message:[String,Function],callback:Function,allowHtml:Boolean,className:lt,transition:st("van-dialog-bounce"),messageAlign:String,closeOnPopstate:h,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:h,closeOnClickOverlay:Boolean,keyboardEnabled:h,destroyOnClose:Boolean}),Ut=[...tt,"transition","closeOnPopstate","destroyOnClose"];var L=C({name:zt,props:Rt,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:s}){const i=O(),r=Z({confirm:!1,cancel:!1}),d=o=>l("update:show",o),n=o=>{var u;d(!1),(u=e.callback)==null||u.call(e,o)},c=o=>()=>{e.show&&(l(o),e.beforeClose?(r[o]=!0,ot(e.beforeClose,{args:[o],done(){n(o),r[o]=!1},canceled(){r[o]=!1}})):n(o))},B=c("cancel"),y=c("confirm"),k=Q(o=>{var u,p;if(!e.keyboardEnabled||o.target!==((p=(u=i.value)==null?void 0:u.popupRef)==null?void 0:p.value))return;({Enter:e.showConfirmButton?y:I,Escape:e.showCancelButton?B:I})[o.key](),l("keydown",o)},["enter","esc"]),x=()=>{const o=s.title?s.title():e.title;if(o)return a("div",{class:f("header",{isolated:!e.message&&!s.default})},[o])},A=o=>{const{message:u,allowHtml:p,messageAlign:v}=e,b=f("message",{"has-title":o,[v]:v}),S=rt(u)?u():u;return p&&typeof S=="string"?a("div",{class:b,innerHTML:S},null):a("div",{class:b},[S])},j=()=>{if(s.default)return a("div",{class:f("content")},[s.default()]);const{title:o,message:u,allowHtml:p}=e;if(u){const v=!!(o||s.title);return a("div",{key:p?1:0,class:f("content",{isolated:!v})},[A(v)])}},G=()=>a("div",{class:[ut,f("footer")]},[e.showCancelButton&&a(T,{size:"large",text:e.cancelButtonText||w("cancel"),class:f("cancel"),style:{color:e.cancelButtonColor},loading:r.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&a(T,{size:"large",text:e.confirmButtonText||w("confirm"),class:[f("confirm"),{[ct]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:r.confirm,disabled:e.confirmButtonDisabled,onClick:y},null)]),M=()=>a(Dt,{class:f("footer")},{default:()=>[e.showCancelButton&&a(H,{type:"warning",text:e.cancelButtonText||w("cancel"),class:f("cancel"),color:e.cancelButtonColor,loading:r.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&a(H,{type:"danger",text:e.confirmButtonText||w("confirm"),class:f("confirm"),color:e.confirmButtonColor,loading:r.confirm,disabled:e.confirmButtonDisabled,onClick:y},null)]}),W=()=>s.footer?s.footer():e.theme==="round-button"?M():G();return()=>{const{width:o,title:u,theme:p,message:v,className:b}=e;return a(nt,V({ref:i,role:"dialog",class:[f([p]),b],style:{width:et(o)},tabindex:0,"aria-labelledby":u||v,onKeydown:k,"onUpdate:show":d},X(e,Ut)),{default:()=>[x(),j(),W()]})}}});let P;const Ht={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let Vt=E({},Ht);function $t(){({instance:P}=mt({setup(){const{state:l,toggle:s}=ft();return()=>a(L,V(l,{"onUpdate:show":s}),null)}}))}function Kt(e){return dt?new Promise((l,s)=>{P||$t(),P.open(E({},Vt,e,{callback:i=>{(i==="confirm"?l:s)(i)}}))}):Promise.resolve(void 0)}N(L);const Lt="/static/img/xg_banner.png",jt="/static/img/%E6%94%B6%E8%97%8F.png",Gt="/static/img/%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95.png",Mt="/static/img/%E7%82%B9%E8%B5%9E.png",Wt="/static/img/%E6%B6%88%E6%81%AF.png",Yt="/static/img/%E6%B1%82%E7%89%87.png",qt="/static/img/%E8%AE%BE%E7%BD%AE.png",Jt="/static/img/%E5%B8%AE%E5%8A%A9.png",Zt="/static/img/%E6%84%8F%E8%A7%81%E5%8F%8D%E9%A6%88.png",Qt="/static/img/%E5%85%B3%E4%BA%8E%E6%88%91%E4%BB%AC.png",Xt={class:"personal_center relative"},te={class:"top-box"},ee={class:"avatar_box flex notranslate"},ne={class:"avatar"},oe={class:"my-image"},ae={class:"van-image van-image--round"},se=["src"],le={style:{flex:"1"}},ie={style:{"font-weight":"bold","font-size":"0.46rem","margin-bottom":"0.28rem"}},re={style:{color:"gray"}},ce={class:"login notranslate"},ue={class:"body"},de={class:"func flex"},me={class:"relative notranslate"},fe={class:"personal_service"},ge=C({__name:"UserInfoView",setup(e){const l=O({email:"",nickname:"",username:"",firstName:"",lastName:"",hasTelegram:!1,isActive:!1,createdAt:"",photoUrl:""}),s=gt();_t(async()=>{try{const d=await Ct.get("/api/user/me");l.value=d.data}catch(d){console.error(d)}});const i=pt(),r=()=>{Kt({title:"邮箱",message:"xzzd112@proton.me",confirmButtonText:"复制邮箱",cancelButtonText:"关闭",showCancelButton:!0,messageAlign:"center"}).then(()=>{navigator.clipboard.writeText("xzzd112@proton.me"),Et("已复制")})};return(d,n)=>{const c=ht;return z(),vt("div",Xt,[t("div",te,[t("div",ee,[t("div",ne,[t("div",oe,[t("div",ae,[t("img",{class:"van-image__img",src:l.value.photoUrl||"https://static.656932.com/defaultavatar/5.png",lazy:"loaded",style:{"object-fit":"fill"}},null,8,se)])]),n[0]||(n[0]=t("span",{class:"no_login_mask"},null,-1))]),t("div",le,[t("p",ie,R(l.value.nickname),1),t("p",re,R(m(s).isGuest?"登录后同步数据":"欢迎回来"),1)]),t("div",ce,[m(s).isGuest?(z(),Bt(m(_),{key:0,to:{name:"login"},class:"login-btn"},{default:g(()=>n[1]||(n[1]=[bt("立即登录")])),_:1,__:[1]})):yt("",!0)])])]),t("div",ue,[n[14]||(n[14]=wt('<div class="info" data-v-df2f5fe5><div class="page_inner_padding" data-v-df2f5fe5><ul class="data_box flex" data-v-df2f5fe5></ul><div href="/vip" class="no_vip flex justify_content-center align_item-center notranslate" data-v-df2f5fe5><img src="'+Lt+'" width="100%" data-v-df2f5fe5></div></div></div>',1)),t("ul",de,[a(m(_),{to:{name:"watch"},style:{position:"relative"}},{default:g(()=>n[2]||(n[2]=[t("div",{class:"relative notranslate"},[t("img",{src:jt,alt:""})],-1),t("p",null,"我的收藏",-1),t("span",{class:"no_login_mask"},null,-1)])),_:1,__:[2]}),a(m(_),{to:{name:"watch"},style:{position:"relative"}},{default:g(()=>n[3]||(n[3]=[t("img",{src:Gt,alt:""},null,-1),t("p",null,"历史记录",-1),t("span",{class:"no_login_mask"},null,-1)])),_:1,__:[3]}),a(m(_),{to:{name:"watch"},style:{position:"relative"}},{default:g(()=>n[4]||(n[4]=[t("div",{class:"relative notranslate"},[t("img",{src:Mt,alt:""})],-1),t("p",null,"我的点赞",-1),t("span",{class:"no_login_mask"},null,-1)])),_:1,__:[4]}),a(m(_),{to:{name:"message"},style:{position:"relative"}},{default:g(()=>[t("div",me,[a(c,{dot:m(i).total>0},{default:g(()=>n[5]||(n[5]=[t("img",{src:Wt,alt:""},null,-1)])),_:1,__:[5]},8,["dot"])]),n[6]||(n[6]=t("p",null,"我的消息",-1)),n[7]||(n[7]=t("span",{class:"no_login_mask"},null,-1))]),_:1,__:[6,7]})]),n[15]||(n[15]=t("ul",{class:"client_fun flex justify_content-sb page_inner_padding"},null,-1)),t("div",fe,[n[13]||(n[13]=t("h2",null,"个人服务",-1)),t("ul",null,[n[12]||(n[12]=t("a",{href:"https://t.me/xgduanju",target:"_blank",rel:"noopener noreferrer",style:{position:"relative"}},[t("img",{src:Yt,alt:""}),t("p",null,"求片"),t("span",{class:"no_login_mask"})],-1)),a(m(_),{to:{name:"settings"},style:{position:"relative"}},{default:g(()=>n[8]||(n[8]=[t("img",{src:qt,alt:""},null,-1),t("p",null,"设置",-1),t("span",{class:"no_login_mask"},null,-1)])),_:1,__:[8]}),a(m(_),{to:"",style:{position:"relative"}},{default:g(()=>n[9]||(n[9]=[t("img",{src:Jt,alt:""},null,-1),t("p",null,"帮助中心",-1)])),_:1,__:[9]}),a(m(_),{to:"",style:{position:"relative"},onClick:r},{default:g(()=>n[10]||(n[10]=[t("img",{src:Zt,alt:""},null,-1),t("p",null,"联系我们",-1),t("span",{class:"no_login_mask"},null,-1)])),_:1,__:[10]}),a(m(_),{to:"",style:{position:"relative"}},{default:g(()=>n[11]||(n[11]=[t("img",{src:Qt,alt:""},null,-1),t("p",null,"关于我们",-1),t("span",{class:"no_login_mask"},null,-1)])),_:1,__:[11]})])])])])}}}),ye=kt(ge,[["__scopeId","data-v-df2f5fe5"]]);export{ye as default};
