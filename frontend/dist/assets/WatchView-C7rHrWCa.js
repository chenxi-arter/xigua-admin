import{d as A,r as t,Q as R,P as $,p as x,q as s,a as v,s as o,D as f,F as T,v as U,U as N,y as S,W as q,z as M,X as Q,R as W,S as X,T as I}from"./index-D0fLk7TU.js";import{a as j,T as G}from"./index-CBqgYOtW.js";import"./index-B_YYYCET.js";import{P as B}from"./index-BbrKdwDw.js";import{L as D}from"./index-2p63nMPj.js";import{R as J,C as K}from"./index-D3G9NZLm.js";import{I as Y}from"./index-C3PKOCt8.js";import{E as F}from"./index-BzZJZYfC.js";import{C as Z}from"./index-CWF5sIrW.js";import"./use-id-B6ilqiAe.js";import"./use-route-rPu6zWof.js";const ee={class:"video-info"},te={style:{color:"white","font-size":"13px"}},P=A({__name:"ScCatComp",props:{cid:{},type:{}},setup(V){const r=t(!1),u=t(!1),g=t(!1),b=t(!1),n=t(),m=t(0),w=V,i=t([]),l=t("");R(()=>{/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?l.value="seriesPlay":l.value="play"}),$(()=>{W(()=>{n.value&&(n.value.scrollTop=m.value)})});const c=async()=>{i.value=[],await _(),g.value=!1},y=()=>{m.value=n.value.scrollTop},e=async()=>{u.value=!0,await _(),u.value=!1},_=async()=>{try{let a="";w.type==1?a="/api/user/favorites":a="/api/user/liked";const d=await N.get(a,{params:{page:Math.floor(i.value.length/20)+1,size:20,categoryId:w.cid}}),C=d.data.data||d.data,{list:L,total:z}=C;i.value.push(...L),i.value.length>=z&&(r.value=!0)}catch(a){console.error(a),b.value=!0}},k=async a=>{Q.push({name:l.value,params:{id:a}})};return(a,d)=>{const C=F,L=q,z=Y,p=K,E=J,H=D,O=B;return s(),x("div",{class:"watch-scroll-box",ref_key:"watchListContainer",ref:n,onScroll:y},[v(O,{modelValue:g.value,"onUpdate:modelValue":d[2]||(d[2]=h=>g.value=h),onRefresh:c,"success-text":"刷新成功",style:{padding:"12px"}},{default:o(()=>[r.value&&i.value.length==0?(s(),f(C,{key:0,"image-size":"100",description:"暂无内容"})):(s(),f(H,{key:1,loading:u.value,"onUpdate:loading":d[0]||(d[0]=h=>u.value=h),finished:r.value,error:b.value,"onUpdate:error":d[1]||(d[1]=h=>b.value=h),"error-text":"请求失败，点击重新加载","finished-text":"没有更多了",onLoad:e,class:"watch-list"},{default:o(()=>[v(E,{gutter:[12,12]},{default:o(()=>[(s(!0),x(T,null,U(i.value,h=>(s(),f(p,{key:h.seriesId,span:"8",onClick:ne=>k(h.seriesShortId)},{default:o(()=>[S("div",ee,[v(z,{fit:"contain",src:h.seriesCoverUrl},{loading:o(()=>[v(L,{type:"spinner",size:"20"})]),_:2},1032,["src"]),S("div",te,M(h.seriesTitle),1)])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["loading","finished","error"]))]),_:1},8,["modelValue"])],544)}}}),ae=["src"],se={class:"reply"},oe=A({__name:"LsCatComp",props:{cid:{}},setup(V){const r=t(!1),u=t(!1),g=t(!1),b=V,n=t([]),m=t(),w=t(0),i=t("");R(()=>{/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?i.value="seriesPlay":i.value="play"}),$(()=>{W(()=>{m.value&&(m.value.scrollTop=w.value)})});const l=async()=>{r.value=!0,await y(),r.value=!1},c=()=>{w.value=m.value.scrollTop},y=async()=>{try{const k=await N.get("/api/video/browse-history",{params:{page:Math.floor(n.value.length/20)+1,size:20,categoryId:b.cid}}),a=k.data.data||k.data,{list:d,total:C}=a;n.value.push(...d),n.value.length>=C&&(u.value=!0)}catch(k){console.error(k),g.value=!0}},e=t(!1),_=async()=>{n.value=[],await y(),e.value=!1};return(k,a)=>{const d=F,C=Z,L=D,z=B;return s(),x("div",{class:"watch-scroll-box",ref_key:"historyListContainer",ref:m,onScroll:c},[v(z,{modelValue:e.value,"onUpdate:modelValue":a[2]||(a[2]=p=>e.value=p),onRefresh:_,"success-text":"刷新成功",style:{padding:"12px"}},{default:o(()=>[u.value&&n.value.length==0?(s(),f(d,{key:0,"image-size":"100",description:"暂无内容"})):(s(),f(L,{key:1,loading:r.value,"onUpdate:loading":a[0]||(a[0]=p=>r.value=p),finished:u.value,error:g.value,"onUpdate:error":a[1]||(a[1]=p=>g.value=p),"error-text":"请求失败，点击重新加载","finished-text":"没有更多了",class:"history-list",onLoad:l},{default:o(()=>[(s(!0),x(T,null,U(n.value,p=>(s(),f(C,{key:p.seriesId,"is-link":"",center:"",border:!1,to:{name:i.value,params:{id:p.seriesShortId}},"title-style":{color:"white"},style:{padding:"10px 4px"}},{title:o(()=>[X(M(p.seriesTitle),1)]),icon:o(()=>[S("img",{src:p.seriesCoverUrl,alt:"",style:{width:"64px",height:"86px",margin:"0 13px 0 0"}},null,8,ae)]),label:o(()=>[a[3]||(a[3]=S("span",{style:{color:"black"}},null,-1)),S("span",se,M(p.watchStatus),1)]),_:2},1032,["to"]))),128))]),_:1},8,["loading","finished","error"]))]),_:1},8,["modelValue"])],544)}}}),le={class:"watch-contain"},he=A({__name:"WatchView",setup(V){const r=t(0),u=t([{name:"全部",id:null}]),g=async()=>{try{const l=(await N.get("/api/home/categories")).data.sort((c,y)=>c.id-y.id).map(c=>({...c,isMounted:!1}));u.value.push(...l)}catch(i){console.error(i)}},b=t("");R(()=>{g(),/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?b.value="seriesPlay":b.value="play"});const n=t(0),m=t(0),w=t(0);return(i,l)=>{const c=j,y=G;return s(),x("div",le,[v(y,{"lazy-render":!1,active:r.value,"onUpdate:active":l[3]||(l[3]=e=>r.value=e),swipeable:"",shrink:"",background:"rgba(101, 102, 102, 0.0)","title-active-color":"white","line-width":"20px"},{default:o(()=>[v(c,{title:"我的收藏","title-style":"font-size: 16px"},{default:o(()=>[v(y,{"lazy-render":!1,active:n.value,"onUpdate:active":l[0]||(l[0]=e=>n.value=e),type:"card",class:"sc-cat-tabs"},{default:o(()=>[(s(!0),x(T,null,U(u.value,(e,_)=>(s(),f(c,{title:e.name,key:e.name,class:"tab-item"},{default:o(()=>[r.value===0&&n.value===_?(s(),f(P,{key:0,type:1,cid:e.id},null,8,["cid"])):I("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),_:1}),v(c,{title:"我的点赞","title-style":"font-size: 16px"},{default:o(()=>[v(y,{"lazy-render":!1,active:m.value,"onUpdate:active":l[1]||(l[1]=e=>m.value=e),shrink:"",type:"card",class:"sc-cat-tabs"},{default:o(()=>[(s(!0),x(T,null,U(u.value,(e,_)=>(s(),f(c,{title:e.name,key:e.name,class:"tab-item"},{default:o(()=>[r.value===1&&m.value===_?(s(),f(P,{key:0,type:2,cid:e.id},null,8,["cid"])):I("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),_:1}),v(c,{title:"播放历史","title-style":"font-size: 16px"},{default:o(()=>[v(y,{"lazy-render":!1,active:w.value,"onUpdate:active":l[2]||(l[2]=e=>w.value=e),shrink:"",type:"card",class:"sc-cat-tabs"},{default:o(()=>[(s(!0),x(T,null,U(u.value,(e,_)=>(s(),f(c,{title:e.name,key:e.name,class:"tab-item"},{default:o(()=>[r.value===2&&w.value===_?(s(),f(oe,{key:0,cid:e.id},null,8,["cid"])):I("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),_:1})]),_:1},8,["active"])])}}});export{he as default};
