import{d as w,r as u,Q as L,A as R,p as y,q as _,a as i,s as d,F as k,v as V,y as s,D as H,z as b,V as B,_ as h,U as S,P as U,R as A}from"./index-_5rAYpry.js";import{P as E}from"./index-Bv1SBgqZ.js";import{S as N,a as $}from"./index-CUC-pq4R.js";import{I as q}from"./index-D-ujv1ja.js";import{L as x}from"./index-BtVd-r-S.js";import{R as M,C as T}from"./index-ISyXPFqi.js";import{C as D}from"./CoverComp-ClmD5Eda.js";const P={class:"swipe-container"},z={class:"my-image"},F={class:"describe"},j={class:"custom-indicator"},O=["onClick"],Q=w({__name:"SwineComp",props:{HomeBanners:{default:()=>[]}},setup(l){const p=u(0),t=u(),n=m=>{p.value=m,t.value?.swipeTo(m)},c=u("");return L(()=>{/iphone|ipod|android|blackberry|windows phone/i.test(navigator.userAgent.toLowerCase())?c.value="seriesPlay":c.value="play"}),(m,f)=>{const g=q,I=R("RouterLink"),r=$,a=N;return _(),y("div",P,[i(a,{ref_key:"swipeRef",ref:t,active:p.value,"onUpdate:active":f[0]||(f[0]=o=>p.value=o),class:"image-carousel",autoplay:5e3,"indicator-color":"white","lazy-render":!1},{indicator:d(({active:o,total:e})=>[s("ul",j,[(_(!0),y(k,null,V(e,(C,v)=>(_(),y("li",{key:v,class:B({"is-active":v===o}),onClick:ae=>n(v)},f[1]||(f[1]=[s("div",{class:"indicator-line"},null,-1)]),10,O))),128))])]),default:d(()=>[(_(!0),y(k,null,V(m.HomeBanners,(o,e)=>(_(),H(r,{key:o.id},{default:d(()=>[i(I,{to:o.shortId?{name:c.value,params:{id:o.shortId}}:"",onClick:C=>n(e)},{default:d(()=>[s("div",z,[i(g,{src:o.showURL,fit:"cover","show-error":"","show-loading":""},null,8,["src"])]),s("div",F,[s("p",null,b(o.title),1)])]),_:2},1032,["to","onClick"])]),_:2},1024))),128))]),_:1},8,["active"])])}}}),G=h(Q,[["__scopeId","data-v-8f6ed973"]]),J="/static/img/%E5%85%A8%E9%83%A8.png",K="/static/img/%E6%96%B0%E5%89%A7.png",W="/static/img/%E7%83%AD%E5%BA%A6.png",X="/static/img/%E8%AF%84%E5%88%86.png",Y={class:"screen-bar"},Z=w({__name:"ScreenComp",props:{catInfo:Object},setup(l){return(p,t)=>{const n=R("RouterLink");return _(),y("ul",Y,[i(n,{to:{name:"list",params:{id:l.catInfo?.categoryId},query:{channeid:l.catInfo?.id,ids:"0,0,0,0,0,0,0"}}},{default:d(()=>t[0]||(t[0]=[s("div",null,[s("img",{src:J,alt:""})],-1),s("p",null,"发现",-1)])),_:1,__:[0]},8,["to"]),i(n,{to:{name:"list",params:{id:l.catInfo?.categoryId},query:{channeid:l.catInfo?.id,ids:"0,0,0,0,0,0,0"}}},{default:d(()=>t[1]||(t[1]=[s("div",null,[s("img",{src:K,alt:""})],-1),s("p",null,"新剧",-1)])),_:1,__:[1]},8,["to"]),i(n,{to:{name:"list",params:{id:l.catInfo?.categoryId},query:{channeid:l.catInfo?.id,ids:"1,0,0,0,0.0.0"}}},{default:d(()=>t[2]||(t[2]=[s("div",null,[s("img",{src:W,alt:""})],-1),s("p",null,"人气",-1)])),_:1,__:[2]},8,["to"]),i(n,{to:{name:"list",params:{id:l.catInfo?.categoryId},query:{channeid:l.catInfo?.id,ids:"2,0,0,0,0,0,0"}}},{default:d(()=>t[3]||(t[3]=[s("div",null,[s("img",{src:X,alt:""})],-1),s("p",null,"评分",-1)])),_:1,__:[3]},8,["to"])])}}}),ee=h(Z,[["__scopeId","data-v-77f2d083"]]),oe=w({__name:"ListComp",props:{HomeVideos:{default:()=>[]},vtype:{default:1}},emits:["update:HomeVideos"],setup(l,{emit:p}){const t=u(!1);let n=1;const c=l,m=p,f=u(!1),g=u(!1),I=async()=>{try{n++;const a=(await S.get("/api/home/gethomemodules",{params:{channeid:c.vtype,page:n}}))?.data?.data?.list?.[0]?.list||[];a.length||(g.value=!0),m("update:HomeVideos",[...c.HomeVideos,...a])}catch(r){console.error("ListComp error: ",r),t.value=!0,n--}finally{f.value=!1}};return(r,a)=>{const o=T,e=M,C=x;return _(),H(C,{loading:f.value,"onUpdate:loading":a[0]||(a[0]=v=>f.value=v),"immediate-check":!1,finished:g.value,"finished-text":"没有更多了",onLoad:I,error:t.value,"onUpdate:error":a[1]||(a[1]=v=>t.value=v),"error-text":"请求失败，点击重新加载",class:"list",role:""},{default:d(()=>[i(e,{gutter:"10"},{default:d(()=>[(_(!0),y(k,null,V(r.HomeVideos,v=>(_(),H(o,{key:v.shortId,span:"12"},{default:d(()=>[i(D,{MvItem:v,islist:r.vtype!=2},null,8,["MvItem","islist"])]),_:2},1024))),128))]),_:1})]),_:1},8,["loading","finished","error"])}}}),te=h(oe,[["__scopeId","data-v-a6130eb4"]]),se=w({__name:"NavHomeView",props:{catInfo:{}},setup(l){const p=u(!1),t=u(),n=u(),c=u(),m=u(0),f=l,g=async()=>{try{const a=(await S.get("/api/home/gethomemodules?channeid="+f.catInfo.id)).data;for(const o of a.data?.list??[])o.type===0?t.value=o.banners.map(e=>({id:e.id,showURL:e.showURL,title:e.title,url:e.url,shortId:e.shortId})):0<o.type&&o.type<5&&(n.value=o.list.map(e=>({id:e.id,coverUrl:e.coverUrl,score:e.score,playCount:e.playCount,cidMapper:e.cidMapper,shortId:e.shortId,title:e.title,isSerial:e.isSerial,upStatus:e.upStatus,upCount:e.upCount})))}catch(r){console.error("NavHomeView error: ",r)}p.value=!1};L(()=>{g()}),U(()=>{A(()=>{c.value&&(c.value.scrollTop=m.value)})});const I=()=>{c.value&&(m.value=c.value.scrollTop)};return(r,a)=>{const o=E;return _(),y("div",{class:"scroll-box",onScroll:I,ref_key:"listContainer",ref:c},[i(o,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),onRefresh:g,"success-text":"刷新成功"},{default:d(()=>[i(G,{HomeBanners:t.value},null,8,["HomeBanners"]),i(ee,{catInfo:r.catInfo},null,8,["catInfo"]),i(te,{HomeVideos:n.value,"onUpdate:HomeVideos":a[0]||(a[0]=e=>n.value=e),vtype:r.catInfo.id??1},null,8,["HomeVideos","vtype"])]),_:1},8,["modelValue"])],544)}}}),pe=h(se,[["__scopeId","data-v-9e203647"]]);export{pe as default};
