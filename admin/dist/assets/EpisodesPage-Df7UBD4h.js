import{I as Re,j as e}from"./index-Cn3Y4oV4.js";import{r as s,k as Je}from"./react-vendor-BZ8KDC-J.js";import{E as z,S as et,a as Ie}from"./admin-Ch7isWHw.js";import{f as K}from"./format-0Cj3JWJt.js";import{o as tt,F as C,s as h,T as st,a as T,B as b,j as M,m as N,d as nt,f as _,g as a,h as ke,I as it,U as lt}from"./antd-vendor-CqSdqTZY.js";import{R as ze}from"./CopyOutlined-CXfI4JI2.js";import{R as ot}from"./DownloadOutlined-DnzfYxfs.js";import"./utils-vendor-NIGUFBhG.js";function re(){return re=Object.assign?Object.assign.bind():function(x){for(var u=1;u<arguments.length;u++){var j=arguments[u];for(var m in j)Object.prototype.hasOwnProperty.call(j,m)&&(x[m]=j[m])}return x},re.apply(this,arguments)}const rt=(x,u)=>s.createElement(Re,re({},x,{ref:u,icon:tt})),at=s.forwardRef(rt);var dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function ae(){return ae=Object.assign?Object.assign.bind():function(x){for(var u=1;u<arguments.length;u++){var j=arguments[u];for(var m in j)Object.prototype.hasOwnProperty.call(j,m)&&(x[m]=j[m])}return x},ae.apply(this,arguments)}const ct=(x,u)=>s.createElement(Re,ae({},x,{ref:u,icon:dt})),ut=s.forwardRef(ct),{Paragraph:W,Text:w}=a,pt=x=>{const u=Math.floor(x/3600),j=Math.floor(x%3600/60),m=x%60;return u>0?`${u}æ—¶${j}åˆ†${m}ç§’`:j>0?`${j}åˆ†${m}ç§’`:`${m}ç§’`};function wt(){const[x]=Je(),u=Number(x.get("seriesId")||"")||void 0,[j,m]=s.useState(!1),[Ue,Ee]=s.useState([]),[Me,Oe]=s.useState(0),[Q,De]=s.useState(1),[Y,$e]=s.useState(10),de=s.useRef(1),G=s.useRef(10);s.useEffect(()=>{de.current=Q},[Q]),s.useEffect(()=>{G.current=Y},[Y]);const[Be,O]=s.useState(!1),[l,ce]=s.useState(null),[D]=C.useForm(),[Pe,X]=s.useState(!1),[P,Z]=s.useState(null),[Le,J]=s.useState(!1),[L,ee]=s.useState(null),[A,Ae]=s.useState(u),[I,te]=s.useState([]),ue=s.useRef([]);s.useEffect(()=>{ue.current=I},[I]);const[R,pe]=s.useState(!1),[he,xe]=s.useState(1),[fe,ye]=s.useState(!0),U=s.useRef(void 0),se=s.useRef(""),ne=s.useRef(1),[qe,q]=s.useState(!1),[f,Ve]=s.useState(null),[He,me]=s.useState(!1),[V,ge]=s.useState(void 0),[H,je]=s.useState(void 0),[ie,ve]=s.useState(!1),[le,oe]=s.useState(0),[$,Fe]=s.useState("720p"),Ke=async t=>{const n=Array.from(new Set(t.filter(i=>typeof i=="number")));if(n.length===0)return;const o=new Set(ue.current.map(i=>i.value)),y=n.filter(i=>!o.has(i));if(y.length!==0)try{const i=await Promise.all(y.map(async r=>{try{const d=await Ie.get(r),g=`#${r}${d?.title?` ${d.title}`:""}`;return{value:r,label:g}}catch{return{value:r,label:`#${r}`}}}));i.length>0&&te(r=>Array.from(new Map([...r,...i].map(d=>[d.value,d])).values()))}catch{}},S=s.useCallback(async(t,n)=>{const o=t??de.current,y=n??G.current;m(!0);try{const i={};A&&(i.seriesId=A),V!==void 0&&(i.minDuration=V),H!==void 0&&(i.maxDuration=H);const r=await z.list(o,y,i),d=(r.items||[]).slice().sort((g,v)=>g.seriesId!==v.seriesId?g.seriesId-v.seriesId:g.episodeNumber-v.episodeNumber);Ee(d),Oe(r.total),De(r.page),$e(r.size),Ke(d.map(g=>g.seriesId))}finally{m(!1)}},[A,V,H]);s.useEffect(()=>{S(1,G.current)},[S]);const F=50,k=s.useCallback(async t=>{const n=t?.keyword!==void 0?t.keyword:se.current,o=t?.reset?1:t?.page||ne.current;pe(!0);try{if(n&&n.trim()){const i=await et.fuzzy({keyword:n.trim(),page:o,size:F}),r=i?.data||i,g=(r?.list||r?.items||[]).map(B=>({value:B.id,label:`#${B.id} ${B.title||""}`}));te(B=>t?.reset?g:Array.from(new Map([...B,...g].map(Te=>[Te.value,Te])).values()));const v=r?.page||o;xe(v),ne.current=v;const c=r?.total??0,p=r?.size??F;ye(v*p<c||r?.hasMore===!0)}else{const i=await Ie.list(o,F),r=(i.items||[]).map(p=>({value:p.id,label:`#${p.id} ${p.title||""}`}));te(p=>t?.reset?r:Array.from(new Map([...p,...r].map(E=>[E.value,E])).values()));const d=i.page||o;xe(d),ne.current=d;const g=i.total??0,v=i.size??F;ye(d*v<g)}const y=t?.keyword!==void 0?t.keyword:se.current;se.current=y||""}catch{}finally{pe(!1)}},[]);s.useEffect(()=>{k({reset:!0})},[k]);const we=s.useCallback(t=>{ce(t),D.setFieldsValue(t),O(!0)},[D]),be=s.useCallback(t=>{Z(t),X(!0)},[]),Ne=s.useCallback(async()=>{if(P)try{await z.remove(P.id),h.success("å·²åˆ é™¤"),S()}catch{h.error("åˆ é™¤å¤±è´¥")}finally{X(!1),Z(null)}},[P,S]),_e=s.useCallback(()=>{X(!1),Z(null)},[]),We=s.useCallback(async()=>{if(!(!l||!L))try{await z.update(l.id,L),h.success("å·²æ›´æ–°"),O(!1),S()}catch{h.error("ä¿®æ”¹å¤±è´¥")}finally{J(!1),ee(null)}},[l,L,S]),Qe=s.useCallback(()=>{J(!1),ee(null)},[]),Se=s.useCallback(async t=>{me(!0),q(!0);try{const n=await z.getDownloadUrls(t.id);Ve(n)}catch{h.error("è·å–ä¸‹è½½åœ°å€å¤±è´¥"),q(!1)}finally{me(!1)}},[]),Ce=s.useCallback((t,n)=>{const o=document.createElement("a");o.href=t,o.download=n,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)},[]),Ye=s.useCallback(async t=>{const{file:n,onSuccess:o,onError:y}=t;if(!l){h.warning("è¯·å…ˆåˆ›å»ºå‰§é›†ï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¸Šä¼ è§†é¢‘"),y?.(new Error("æ–°å»ºæ¨¡å¼ä¸æ”¯æŒæ–‡ä»¶ä¸Šä¼ "));return}try{ve(!0),oe(0);const i=n;if(!["video/mp4","video/mpeg","video/quicktime","video/x-msvideo","video/webm"].includes(i.type))throw new Error("ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œè¯·ä¸Šä¼  MP4ã€MOVã€AVI æˆ– WebM è§†é¢‘");console.log("[è§†é¢‘ä¸Šä¼ ] å¼€å§‹è·å–é¢„ç­¾å URL",{episodeId:l.id,filename:i.name,contentType:i.type,quality:$,fileSize:i.size});const d=await z.getPresignedUploadUrl(l.id,{filename:i.name,contentType:i.type||"video/mp4",quality:$});console.log("[è§†é¢‘ä¸Šä¼ ] è·å–é¢„ç­¾å URL æˆåŠŸ",d),await new Promise((g,v)=>{const c=new XMLHttpRequest;c.upload.addEventListener("progress",p=>{if(p.lengthComputable){const E=Math.round(p.loaded/p.total*100);oe(E),console.log("[è§†é¢‘ä¸Šä¼ ] è¿›åº¦:",E+"%")}}),c.addEventListener("load",()=>{if(console.log("[è§†é¢‘ä¸Šä¼ ] è¯·æ±‚å®Œæˆ",{status:c.status,statusText:c.statusText,responseText:c.responseText}),c.status===200||c.status===204)console.log("[è§†é¢‘ä¸Šä¼ ] ä¸Šä¼ åˆ° R2 æˆåŠŸ"),g();else{const p=`ä¸Šä¼ å¤±è´¥ (çŠ¶æ€ç : ${c.status})${c.responseText?": "+c.responseText:""}`;console.error("[è§†é¢‘ä¸Šä¼ ] å¤±è´¥:",p),v(new Error(p))}}),c.addEventListener("error",p=>{console.error("[è§†é¢‘ä¸Šä¼ ] ç½‘ç»œé”™è¯¯:",p),console.error("[è§†é¢‘ä¸Šä¼ ] å¯èƒ½çš„åŸå› : CORS é…ç½®é—®é¢˜ã€ç½‘ç»œä¸­æ–­ã€æˆ– R2 è®¿é—®æƒé™é—®é¢˜"),v(new Error("ä¸Šä¼ å¤±è´¥ï¼šç½‘ç»œé”™è¯¯æˆ– CORS é…ç½®é—®é¢˜"))}),c.addEventListener("abort",()=>{console.warn("[è§†é¢‘ä¸Šä¼ ] ä¸Šä¼ å·²å–æ¶ˆ"),v(new Error("ä¸Šä¼ å·²å–æ¶ˆ"))}),console.log("[è§†é¢‘ä¸Šä¼ ] å¼€å§‹ä¸Šä¼ åˆ° R2",{url:d.uploadUrl.substring(0,100)+"...",contentType:i.type||"video/mp4"}),c.open("PUT",d.uploadUrl),c.setRequestHeader("Content-Type",i.type||"video/mp4"),c.send(i)}),await z.notifyUploadComplete(l.id,{fileKey:d.fileKey,publicUrl:d.publicUrl,quality:$,fileSize:i.size}),h.success("è§†é¢‘å·²ä¸Šä¼ åˆ° R2 å­˜å‚¨"),S(),o?.({})}catch(i){y?.(i instanceof Error?i:new Error(String(i))),h.error(`è§†é¢‘ä¸Šä¼ å¤±è´¥: ${i instanceof Error?i.message:String(i)}`)}finally{ve(!1),oe(0)}},[l,$,S]),Ge=s.useMemo(()=>[{title:"ID",dataIndex:"id",width:80},{title:"ç³»åˆ—",dataIndex:"seriesTitle",width:220,render:(t,n)=>n.seriesTitle||(()=>{const o=I.find(y=>y.value===n.seriesId);return o?o.label:`#${n.seriesId}`})()},{title:"é›†æ•°",dataIndex:"episodeNumber",width:80},{title:"æ ‡é¢˜",dataIndex:"title",width:200,ellipsis:{showTitle:!1},render:t=>e.jsx(st,{placement:"topLeft",title:t,children:e.jsx("span",{children:t})})},{title:"æ—¶é•¿",dataIndex:"duration",width:110,render:t=>e.jsx("span",{title:`${t}ç§’`,children:pt(t)})},{title:"çŠ¶æ€",dataIndex:"status",width:100,render:t=>t==="published"?"å·²å‘å¸ƒ":t==="hidden"?"éšè—":t==="draft"?"è‰ç¨¿":t||"-"},{title:"æ–¹å‘",dataIndex:"isVertical",width:80,render:t=>t?"ç«–å±":"æ¨ªå±"},{title:"åˆ›å»ºæ—¶é—´",dataIndex:"createdAt",width:150,render:t=>K(t)},{title:"æ›´æ–°æ—¶é—´",dataIndex:"updatedAt",width:150,render:t=>K(t)},{title:"æ“ä½œ",width:280,render:(t,n)=>e.jsxs(T,{children:[e.jsx(b,{onClick:()=>we(n),type:"link",children:"ç¼–è¾‘"}),e.jsx(b,{onClick:()=>Se(n),type:"link",children:"ä¸‹è½½"}),e.jsx(b,{onClick:()=>be(n),danger:!0,type:"link",children:"åˆ é™¤"})]})}],[I,we,be,Se]),Xe=()=>{ce(null),D.resetFields(),O(!0)},Ze=async()=>{const t=await D.validateFields();if(l)ee(t),J(!0);else try{await z.create(t),h.success("å·²åˆ›å»º"),O(!1),S()}catch{h.error("åˆ›å»ºå¤±è´¥")}};return e.jsxs("div",{className:"page",children:[e.jsxs(T,{className:"page-toolbar",wrap:!0,children:[e.jsx(b,{type:"primary",onClick:Xe,children:"æ–°å»ºå‰§é›†"}),e.jsx(b,{onClick:()=>S(),children:"åˆ·æ–°"}),e.jsx(M,{showSearch:!0,allowClear:!0,placeholder:"ç­›é€‰ç³»åˆ—",style:{width:280},filterOption:!1,options:I,value:A,loading:R,onDropdownVisibleChange:t=>{t&&I.length===0&&!R&&k({reset:!0})},onPopupScroll:t=>{const n=t.target,o=n&&n.scrollHeight-n.offsetHeight>0,y=n&&n.scrollTop+n.offsetHeight>=n.scrollHeight-20,i=n&&n.scrollTop>0;o&&y&&i&&fe&&!R&&k({page:he+1})},onSearch:t=>{U.current&&window.clearTimeout(U.current),U.current=window.setTimeout(()=>{R||k({reset:!0,keyword:(t||"").trim()})},300)},onChange:t=>Ae(t)}),e.jsx(N,{placeholder:"æœ€å°æ—¶é•¿(ç§’)",style:{width:140},value:V,onChange:t=>ge(t||void 0),min:0}),e.jsx("span",{style:{color:"#999"},children:"~"}),e.jsx(N,{placeholder:"æœ€å¤§æ—¶é•¿(ç§’)",style:{width:140},value:H,onChange:t=>je(t||void 0),min:0}),e.jsx(b,{onClick:()=>{ge(void 0),je(void 0)},children:"æ¸…é™¤æ—¶é•¿ç­›é€‰"})]}),e.jsx(nt,{rowKey:"id",loading:j,dataSource:Ue,columns:Ge,tableLayout:"fixed",scroll:{x:960},pagination:{current:Q,pageSize:Y,total:Me,position:["bottomCenter"],onChange:(t,n)=>S(t,n)}}),e.jsx(_,{title:l?"ç¼–è¾‘å‰§é›†":"æ–°å»ºå‰§é›†",open:Be,onCancel:()=>O(!1),onOk:Ze,okText:"ä¿å­˜",cancelText:"å–æ¶ˆ",width:800,style:{top:20},children:e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",paddingRight:8},children:[l&&e.jsxs("div",{style:{background:"#f5f5f5",padding:"16px",borderRadius:"8px",marginBottom:"20px"},children:[e.jsx(a.Title,{level:5,style:{marginTop:0,marginBottom:12},children:"ğŸ“Š åªè¯»ä¿¡æ¯"}),e.jsxs(T,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(a.Text,{type:"secondary",children:"ID:"}),e.jsx(a.Text,{strong:!0,children:l.id})]}),l.shortId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a.Text,{type:"secondary",children:"Short ID:"}),e.jsxs(T,{children:[e.jsx(a.Text,{code:!0,children:l.shortId}),e.jsx(b,{size:"small",icon:e.jsx(ze,{}),onClick:()=>{navigator.clipboard.writeText(l.shortId||""),h.success("Short ID å·²å¤åˆ¶")}})]})]}),l.accessKey&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a.Text,{type:"secondary",children:"Access Key:"}),e.jsxs(T,{children:[e.jsxs(a.Text,{code:!0,children:[l.accessKey.substring(0,8),"..."]}),e.jsx(b,{size:"small",icon:e.jsx(ze,{}),onClick:()=>{navigator.clipboard.writeText(l.accessKey||""),h.success("Access Key å·²å¤åˆ¶")}})]})]}),l.playCount!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(a.Text,{type:"secondary",children:"æ’­æ”¾æ¬¡æ•°:"}),e.jsx(a.Text,{strong:!0,children:l.playCount.toLocaleString()})]}),l.likeCount!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(a.Text,{type:"secondary",children:"ç‚¹èµæ•°:"}),e.jsx(a.Text,{strong:!0,children:l.likeCount.toLocaleString()})]}),l.dislikeCount!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(a.Text,{type:"secondary",children:"ç‚¹è¸©æ•°:"}),e.jsx(a.Text,{strong:!0,children:l.dislikeCount.toLocaleString()})]}),l.favoriteCount!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(a.Text,{type:"secondary",children:"æ”¶è—æ•°:"}),e.jsx(a.Text,{strong:!0,children:l.favoriteCount.toLocaleString()})]}),l.createdAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(a.Text,{type:"secondary",children:"åˆ›å»ºæ—¶é—´:"}),e.jsx(a.Text,{children:K(l.createdAt)})]}),l.updatedAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(a.Text,{type:"secondary",children:"æ›´æ–°æ—¶é—´:"}),e.jsx(a.Text,{children:K(l.updatedAt)})]})]})]}),e.jsxs(C,{form:D,layout:"vertical",children:[e.jsx(ke,{orientation:"left",children:"ğŸ“„ åŸºæœ¬ä¿¡æ¯"}),e.jsx(C.Item,{name:"seriesId",label:"ç³»åˆ—",rules:[{required:!0,message:"è¯·é€‰æ‹©ç³»åˆ—"}],children:e.jsx(M,{showSearch:!0,allowClear:!0,placeholder:"æœç´¢ç³»åˆ—",filterOption:!1,options:I,loading:R,onDropdownVisibleChange:t=>{t&&I.length===0&&k({reset:!0})},onPopupScroll:t=>{const n=t.target,o=n&&n.scrollHeight-n.offsetHeight>0,y=n&&n.scrollTop+n.offsetHeight>=n.scrollHeight-20,i=n&&n.scrollTop>0;o&&y&&i&&fe&&!R&&k({page:he+1})},onSearch:t=>{U.current&&window.clearTimeout(U.current),U.current=window.setTimeout(()=>{k({reset:!0,keyword:(t||"").trim()})},300)}})}),e.jsxs(T,{style:{width:"100%"},size:"middle",children:[e.jsx(C.Item,{name:"episodeNumber",label:"é›†æ•°",rules:[{required:!0,message:"è¯·è¾“å…¥é›†æ•°"}],style:{marginBottom:0,flex:1},children:e.jsx(N,{style:{width:"100%"},placeholder:"é›†æ•°ç¼–å·",min:1})}),e.jsx(C.Item,{name:"duration",label:"æ—¶é•¿(ç§’)",rules:[{required:!0,message:"è¯·è¾“å…¥æ—¶é•¿"}],style:{marginBottom:0,flex:1},children:e.jsx(N,{style:{width:"100%"},placeholder:"è§†é¢‘æ—¶é•¿ï¼ˆç§’ï¼‰",min:0})})]}),e.jsx(C.Item,{name:"title",label:"æ ‡é¢˜",rules:[{required:!0,message:"è¯·è¾“å…¥æ ‡é¢˜"}],children:e.jsx(it,{placeholder:"å‰§é›†æ ‡é¢˜"})}),e.jsx(ke,{orientation:"left",children:"ğŸ¬ æ’­æ”¾è®¾ç½®"}),e.jsxs(T,{style:{width:"100%"},size:"middle",children:[e.jsx(C.Item,{name:"status",label:"çŠ¶æ€",style:{marginBottom:0,flex:1},children:e.jsx(M,{placeholder:"é€‰æ‹©çŠ¶æ€",allowClear:!0,options:[{value:"published",label:"å·²å‘å¸ƒ"},{value:"hidden",label:"éšè—"},{value:"draft",label:"è‰ç¨¿"}]})}),e.jsx(C.Item,{name:"isVertical",label:"æ’­æ”¾æ–¹å‘",initialValue:!1,style:{marginBottom:0,flex:1},children:e.jsx(M,{placeholder:"é€‰æ‹©æ’­æ”¾æ–¹å‘",options:[{value:!1,label:"æ¨ªå±"},{value:!0,label:"ç«–å±"}]})})]}),e.jsx(C.Item,{name:"hasSequel",label:"æ˜¯å¦æœ‰ç»­é›†",children:e.jsx(M,{placeholder:"è¯·é€‰æ‹©",allowClear:!0,options:[{value:!0,label:"æ˜¯"},{value:!1,label:"å¦"}]})}),l&&e.jsx(C.Item,{label:"è§†é¢‘ä¸Šä¼ ",children:e.jsxs(T,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(T,{children:[e.jsx(M,{value:$,onChange:Fe,style:{width:120},options:[{value:"360p",label:"360p"},{value:"480p",label:"480p"},{value:"720p",label:"720p"},{value:"1080p",label:"1080p"},{value:"1440p",label:"1440p"},{value:"2160p",label:"4K"}]}),e.jsx(lt,{accept:"video/mp4,video/mpeg,video/quicktime,video/x-msvideo,video/webm",showUploadList:!1,customRequest:Ye,disabled:ie,children:e.jsx(b,{type:"primary",icon:e.jsx(ut,{}),loading:ie,children:"ä¸Šä¼ è§†é¢‘æ–‡ä»¶"})})]}),ie&&le>0&&e.jsx("div",{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:8,background:"#f0f0f0",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",background:"#52c41a",width:`${le}%`,transition:"width 0.3s ease"}})}),e.jsxs("span",{style:{fontSize:12,color:"#666",minWidth:40},children:[le,"%"]})]})}),e.jsx("div",{style:{fontSize:12,color:"#999",padding:"8px 12px",background:"#f5f5f5",borderRadius:4},children:"ğŸ’¡ æç¤ºï¼šæ”¯æŒä¸Šä¼  MP4ã€MOVã€AVIã€WebM ç­‰è§†é¢‘æ ¼å¼ï¼Œè§†é¢‘å°†ç›´æ¥ä¸Šä¼ åˆ° R2 å­˜å‚¨ï¼ˆä¸ç»è¿‡åç«¯æœåŠ¡å™¨ï¼‰"})]})}),!l&&e.jsx(C.Item,{label:"è§†é¢‘ä¸Šä¼ ",children:e.jsx("div",{style:{padding:"12px 16px",background:"#f6f8fa",borderRadius:6,border:"1px solid #e1e4e8"},children:e.jsx("div",{style:{fontSize:14,color:"#586069"},children:"ğŸ’¡ æç¤ºï¼šè¯·å…ˆåˆ›å»ºå‰§é›†ï¼Œåˆ›å»ºå®Œæˆåå¯åœ¨ç¼–è¾‘é¡µé¢ä¸Šä¼ è§†é¢‘æ–‡ä»¶"})})})]})]})}),e.jsx(_,{title:"ç¡®è®¤åˆ é™¤",open:Pe,onOk:Ne,onCancel:_e,okText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",okType:"danger",children:e.jsxs("p",{children:["ç¡®å®šè¦åˆ é™¤å‰§é›†ã€Œ",P?.title,"ã€å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"]})}),e.jsx(_,{title:"ç¡®è®¤ä¿®æ”¹",open:Le,onOk:We,onCancel:Qe,okText:"ç¡®è®¤ä¿®æ”¹",cancelText:"å–æ¶ˆ",children:e.jsxs("p",{children:["ç¡®å®šè¦ä¿®æ”¹å‰§é›†ã€Œ",L?.title,"ã€å—ï¼Ÿ"]})}),e.jsx(_,{title:"å‰§é›†ä¸‹è½½åœ°å€",open:qe,onCancel:()=>q(!1),footer:[e.jsx(b,{onClick:()=>q(!1),children:"å…³é—­"},"close")],width:900,children:He?e.jsx("div",{style:{textAlign:"center",padding:"60px 0",fontSize:16,color:"#999"},children:"åŠ è½½ä¸­..."}):f?e.jsxs("div",{children:[e.jsx("div",{style:{background:"#f5f5f5",padding:"16px 20px",borderRadius:8,marginBottom:20},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 24px"},children:[e.jsxs("div",{children:[e.jsx(w,{type:"secondary",style:{fontSize:13},children:"ç³»åˆ—"}),e.jsxs("div",{style:{marginTop:4,fontSize:15},children:[f.seriesTitle," ",e.jsxs(w,{type:"secondary",children:["(#",f.seriesId,")"]})]})]}),e.jsxs("div",{children:[e.jsx(w,{type:"secondary",style:{fontSize:13},children:"é›†æ•°"}),e.jsxs("div",{style:{marginTop:4,fontSize:15},children:["ç¬¬ ",f.episodeNumber," é›†"]})]}),e.jsxs("div",{children:[e.jsx(w,{type:"secondary",style:{fontSize:13},children:"æ ‡é¢˜"}),e.jsx("div",{style:{marginTop:4,fontSize:15},children:f.episodeTitle})]}),e.jsxs("div",{children:[e.jsx(w,{type:"secondary",style:{fontSize:13},children:"æ—¶é•¿"}),e.jsxs("div",{style:{marginTop:4,fontSize:15},children:[Math.floor(f.duration/60)," åˆ† ",f.duration%60," ç§’"]})]})]})}),f.downloadUrls&&f.downloadUrls.length>0?e.jsx("div",{style:{maxHeight:500,overflowY:"auto",paddingRight:8},children:f.downloadUrls.map((t,n)=>e.jsxs("div",{style:{marginBottom:n<f.downloadUrls.length-1?24:0,paddingBottom:n<f.downloadUrls.length-1?24:0,borderBottom:n<f.downloadUrls.length-1?"1px solid #f0f0f0":"none"},children:[e.jsx("div",{style:{background:"#fafafa",padding:"8px 16px",borderRadius:6,marginBottom:12,display:"inline-block"},children:e.jsx(w,{strong:!0,style:{fontSize:16,color:"#1890ff"},children:t.quality})}),e.jsxs("div",{style:{paddingLeft:12},children:[t.cdnUrl&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{marginBottom:6},children:e.jsx(w,{strong:!0,style:{fontSize:14},children:"è§†é¢‘é“¾æ¥"})}),e.jsx(W,{copyable:{text:t.cdnUrl,onCopy:()=>h.success("å·²å¤åˆ¶è§†é¢‘é“¾æ¥")},ellipsis:{rows:2,expandable:!0},style:{marginBottom:8,padding:"8px 12px",background:"#fff",border:"1px solid #e8e8e8",borderRadius:4,fontSize:13,fontFamily:"Monaco, Menlo, monospace"},children:t.cdnUrl}),e.jsx(b,{type:"primary",icon:e.jsx(ot,{}),onClick:()=>Ce(t.cdnUrl,`${f.episodeTitle}_${t.quality}.mp4`),children:"ä¸‹è½½è§†é¢‘"})]}),t.subtitleUrl&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{marginBottom:6},children:e.jsx(w,{strong:!0,style:{fontSize:14},children:"å­—å¹•æ–‡ä»¶"})}),e.jsx(W,{copyable:{text:t.subtitleUrl,onCopy:()=>h.success("å·²å¤åˆ¶å­—å¹•åœ°å€")},ellipsis:{rows:2,expandable:!0},style:{marginBottom:8,padding:"8px 12px",background:"#fff",border:"1px solid #e8e8e8",borderRadius:4,fontSize:13,fontFamily:"Monaco, Menlo, monospace"},children:t.subtitleUrl}),e.jsx(b,{icon:e.jsx(at,{}),onClick:()=>Ce(t.subtitleUrl,`${f.episodeTitle}_${t.quality}.srt`),children:"ä¸‹è½½å­—å¹•"})]}),(t.ossUrl||t.originUrl)&&e.jsxs("div",{style:{marginTop:12,paddingTop:12,borderTop:"1px dashed #e8e8e8"},children:[e.jsx(w,{type:"secondary",style:{fontSize:12,marginBottom:8,display:"block"},children:"åŸå§‹åœ°å€"}),t.ossUrl&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(w,{type:"secondary",style:{fontSize:13},children:"OSS: "}),e.jsx(W,{copyable:{text:t.ossUrl,onCopy:()=>h.success("å·²å¤åˆ¶ OSS åœ°å€")},ellipsis:{rows:1,expandable:!0},style:{display:"inline",marginBottom:0,fontSize:12,fontFamily:"Monaco, Menlo, monospace"},children:t.ossUrl})]}),t.originUrl&&e.jsxs("div",{children:[e.jsx(w,{type:"secondary",style:{fontSize:13},children:"åŸå§‹: "}),e.jsx(W,{copyable:{text:t.originUrl,onCopy:()=>h.success("å·²å¤åˆ¶åŸå§‹åœ°å€")},ellipsis:{rows:1,expandable:!0},style:{display:"inline",marginBottom:0,fontSize:12,fontFamily:"Monaco, Menlo, monospace"},children:t.originUrl})]})]})]})]},t.id))}):e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:e.jsx(w,{type:"secondary",children:"æš‚æ— å¯ç”¨çš„ä¸‹è½½åœ°å€"})})]}):e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:e.jsx(w,{type:"secondary",children:"æ— æ³•åŠ è½½ä¸‹è½½ä¿¡æ¯"})})})]})}export{wt as default};
