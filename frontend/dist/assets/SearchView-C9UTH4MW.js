import{d as H,r as l,c,a as s,j as T,k as g,H as U,f as I,I as j,v as L,x as n,b as i,u as P,F as k,l as B,A as d,C as z,o as r,_ as M}from"./index-B-NUcGvg.js";/* empty css              *//* empty css              */import{L as V}from"./index-DIE1r4Zn.js";/* empty css              */import{c as Z}from"./request-BicgVeyS.js";import{S as J,a as K}from"./index-ClKFl5eT.js";import{a as q,T as W}from"./index-BrrjYSyC.js";import{P as $}from"./index-s1SJ6FBO.js";import"./index-OOe-qU7w.js";import"./use-id-D_qdaRVJ.js";import"./use-route-8j7D0a9D.js";const ss="/static/img/no_data.png",es={class:"serach-page flex_direction-column h_100_vh"},ts={class:"top van-hairline--bottom"},as={class:"nav-bar relative"},os={class:"center flex_auto"},ls={class:"search-bar"},ns={class:"input-box notranslate"},is={class:"handler absolute flex align_item-center"},rs={class:"main flex_auto"},cs={key:2,class:"result"},ds={class:"load-box"},us={key:0,class:"empty"},vs={class:"main-text"},As={class:"scroll-box"},_s={class:"video"},ps={class:"video-info"},fs={class:"left"},ms={class:"preview"},gs={class:"my-image"},hs={class:"van-image"},ws=["src"],bs={class:"video-info"},xs={class:"info-b"},ys={class:"update flex_auto"},Rs={class:"right flex_direction-column"},ks={class:"right-t"},Bs={class:"van-ellipsis"},Cs={class:"date"},Es={class:"star van-ellipsis"},Ss={class:"introduce_info"},Os={class:"right-b flex align_item-center justify_content-sb"},Is=H({__name:"SearchView",setup(Ds){const C=P(),a=l(""),v=l(!1),A=l(!1),w=l(!1),b=l(!1);let _=1;const p=l([]),E=l(0),x=l(!1),D=()=>{a.value=""},y=async(O=1,e=20)=>{if(v.value=!0,a.value)try{const u=await Z.get("/api/list/fuzzysearch",{params:{keyword:a.value,page:O,size:e}}),R=u.data.data.list.filter(m=>m.title===a.value),f=u.data.data.list.filter(m=>m.title!==a.value),h=[...R,...f];p.value.push(...h),h.length<e&&(A.value=!0)}catch(u){console.error("SearchView.vue searchBtn error",u),b.value=!0,_--}else A.value=!0;w.value=!0,v.value=!1},S=async()=>{p.value=[],_=1,A.value=!1,await y(1)},F=async()=>{},N=async()=>{p.value=[],_=1,A.value=!1,await y(1),x.value=!1},Q=async()=>{_++,await y(_),v.value=!1},X=()=>{window.history.state?.back?C.back():C.push("/")};return(O,e)=>{const u=W,R=q,f=z("RouterLink"),h=V,m=$,Y=K,G=J;return r(),c("div",es,[s("div",ts,[s("div",as,[s("div",{class:"left",onClick:X},e[5]||(e[5]=[s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),s("div",os,[s("form",{onSubmit:U(S,["prevent"])},[s("div",ls,[s("div",ns,[I(s("input",{placeholder:"",type:"text",maxlength:"100",autofocus:"true","onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o)},null,512),[[j,a.value]]),s("div",is,[I(s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAwRJREFUaEPtmEuojVEUx39/hDwzEKUMFHlk4jERpcw8Jh5JlBEjE5IRI0YSEyNGiqSLicdMKTLxmOgitwyUIgN53ZBrOeu2z23fr+985/vOd+697Tp7dOqsvb/1W+u/1n6IxIcS958ewERnsJeBXgZqRqAnoWYAzWwqsBRYAiwE5gHTwv+/gS/AR+AdMCDpT83gD0+vnQEzc0c3AqsBhygz3PmXwGNJDtbx6BjAzCYDm4ENgP/uZAwBTxrrPJTkvyuPjgDMbCawF1hc+Yv5E94DNyT9rLpeZQAzmw8cAObmfOw78AZ4C3wCBoPNDGABsAxYDszOmfsVuCrpcxWISgAh8odznP/hMgBeSPpX5ICZTQLWBPnNytg6xKUqmSgNEDR/MEc2A40CviXpV5XImdn0RiHvCp0rnupyulK2JqoAbAE2ZZx8BtxvF/VWYCEbW4F1GZtHkh6UCUgpgNAqj2S6jUf+eqfON50LEPsymfCOdLFMiy0LsANYG0XENe8fGJFNkNhOoF/Sq7zomdlKYBVwO5ZIkJMHKK6J55LutMtCW4Cwwx7PbFJ3Jbl8hkdwfnejFa4AvIhvZiGC827jRfw62Iz0fjNzGW2PHPbN7ly7HbsMgEdsT7Swt8oLsXTMzP93u+YYBZFxvmnjmerLSOlopsX2SeovykIZgKx8nkq6Fy/awsFhiGDXjHwuYASxDVgfrd1WRmUADgGLokWvSfICHjUKINzOZVPofJCiHwb3R7YfJF2um4ETgO+kzXFe0re8RVtAxKa59RFlYA5wLJowKOlsXYBTmfZ5RtLfVosWQBQ6HzIwBTgZrT0k6fR4A3gn8qKOZeM+OIAXpXeg3GFmYwKQvISSL+I6bbTZ57OSarXZjUkb7XQjG9H7RG9kfs9N9ygR2lu6h7kA4C8P6R6nA0S6F5oA4E8n6V4pA4Q/p6R5qY8OXOk+q0QQ6T5sRRDpPi3GR8lkH3ez5+Fkn9eLLhvj8V/bO/F4OFHnGz2AOtHrxtxeBroRxTpr9DJQJ3rdmPsf4S66QDoGjn0AAAAASUVORK5CYII=",alt:"",class:"close",onClick:D},null,512),[[L,a.value.length]])])]),s("div",{class:"button",onClick:S},"搜索")])],32)]),e[6]||(e[6]=s("div",{class:"right"},null,-1))]),w.value?(r(),T(R,{key:0,active:E.value,"onUpdate:active":e[1]||(e[1]=o=>E.value=o),onChange:F,role:""},{default:n(()=>[(r(),c(k,null,B(["视频"],o=>i(u,{key:o,title:o},null,8,["title"])),64))]),_:1},8,["active"])):g("",!0)]),s("div",rs,[g("",!0),g("",!0),w.value?(r(),c("div",cs,[i(G,{loop:!1,duration:200,class:"my-swipe","show-indicators":!1,"lazy-render":!1},{default:n(()=>[(r(),c(k,null,B(["视频"],o=>i(Y,{key:o},{default:n(()=>[s("div",ds,[p.value?.length==0?(r(),c("div",us,[e[7]||(e[7]=s("img",{src:ss,alt:""},null,-1)),s("h4",vs,'未找到包含"'+d(a.value)+'"的视频',1)])):g("",!0),s("div",As,[i(m,{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=t=>x.value=t),onRefresh:N,"success-text":"刷新成功"},{default:n(()=>[i(h,{loading:v.value,"onUpdate:loading":e[2]||(e[2]=t=>v.value=t),finished:A.value,"finished-text":"没有更多了",onLoad:Q,error:b.value,"onUpdate:error":e[3]||(e[3]=t=>b.value=t),"error-text":"请求失败，点击重新加载"},{default:n(()=>[s("div",_s,[(r(!0),c(k,null,B(p.value,t=>(r(),c("div",{class:"series",key:t.id},[s("div",ps,[s("div",fs,[s("div",ms,[s("div",gs,[s("div",hs,[i(f,{to:{name:"play",params:{id:t.shortId}}},{default:n(()=>[s("img",{class:"van-image__img",src:t.coverUrl,lazy:"loaded",style:{"object-fit":"fill"}},null,8,ws)]),_:2},1032,["to"])])]),s("div",bs,[e[8]||(e[8]=s("div",{class:"score"},null,-1)),s("div",xs,[s("div",ys,d(t.upStatus),1)])])])]),s("div",Rs,[i(f,{to:{name:"play",params:{id:t.shortId}}},{default:n(()=>[s("div",ks,[s("h3",Bs,d(t.title),1),s("div",Cs,[s("span",null,d(t.createdAt.split("-")[0]),1),s("i",null,d(t.type),1)]),s("p",Es," 主演："+d(t.author),1),s("div",Ss,d(t.description.slice(0,50))+" ... ",1)])]),_:2},1032,["to"]),s("div",Os,[i(f,{to:{name:"play",params:{id:t.shortId}}},{default:n(()=>e[9]||(e[9]=[s("button",{class:"flex_none"}," 立即播放 ",-1)])),_:2,__:[9]},1032,["to"])])])])]))),128))])]),_:1},8,["loading","finished","error"])]),_:1},8,["modelValue"])])])]),_:2},1024)),64))]),_:1})])):g("",!0)])])}}}),zs=M(Is,[["__scopeId","data-v-ae03ae37"]]);export{zs as default};
