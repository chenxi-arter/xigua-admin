import{d as A,e as H,c as z,r as i,H as q,a as d,J as F,l as j,t as G,L as D,M as J,w as Q,N as W,O as X,P as Y,Q as Z,p as _,F as x,y as V,A as ee,D as ae,q as y,R as P,S as te,s as E,v as r,E as C,T as oe,z as ne,U as se,K as le,G as ce,_ as $}from"./index-CJw7oPn7.js";import{T as re,a as ue}from"./index-D4M6sixS.js";import{S as ie,a as de}from"./index-jXrHYLqk.js";import"./index-BJiToSoD.js";import{F as pe,f as K}from"./index-DsJLl2Ow.js";import ve from"./NavHomeView-BhPdb5Zs.js";import{u as me}from"./use-id-KaU8sCAZ.js";import"./use-route-4sZHMBeN.js";import"./index-Dd9osftK.js";import"./index-CK-Ltrmo.js";import"./index-BIsJui33.js";import"./index-BntOoZXw.js";import"./CoverComp-D2J5IwtI.js";const[fe,I,he]=z("search"),_e=H({},K,{label:String,shape:D("square"),leftIcon:D("search"),clearable:G,actionText:String,background:String,showAction:Boolean});var ge=A({name:fe,props:_e,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(s,{emit:n,slots:l,attrs:m}){const c=me(),f=i(),p=()=>{l.action||(n("update:modelValue",""),n("cancel"))},h=a=>{a.keyCode===13&&(J(a),n("search",s.modelValue))},v=()=>s.id||`${c}-input`,g=()=>{if(l.label||s.label)return d("label",{class:I("label"),for:v(),"data-allow-mismatch":"attribute"},[l.label?l.label():s.label])},k=()=>{if(s.showAction){const a=s.actionText||he("cancel");return d("div",{class:I("action"),role:"button",tabindex:0,onClick:p},[l.action?l.action():a])}},S=()=>{var a;return(a=f.value)==null?void 0:a.blur()},T=()=>{var a;return(a=f.value)==null?void 0:a.focus()},w=a=>n("blur",a),N=a=>n("focus",a),R=a=>n("clear",a),L=a=>n("clickInput",a),B=a=>n("clickLeftIcon",a),e=a=>n("clickRightIcon",a),t=Object.keys(K),u=()=>{const a=H({},m,F(s,t),{id:v()}),b=M=>n("update:modelValue",M);return d(pe,j({ref:f,type:"search",class:I("field",{"with-message":a.errorMessage}),border:!1,onBlur:w,onFocus:N,onClear:R,onKeypress:h,onClickInput:L,onClickLeftIcon:B,onClickRightIcon:e,"onUpdate:modelValue":b},a),F(l,["left-icon","right-icon"]))};return q({focus:T,blur:S}),()=>{var a;return d("div",{class:I({"show-action":s.showAction}),style:{background:s.background}},[(a=l.left)==null?void 0:a.call(l),d("div",{class:I("content",s.shape)},[g(),u()]),k()])}}});const ke=Q(ge),we="/xiguaLogo.png",be={class:"home-search"},ye={style:{flex:"1"}},Ce={class:"placeholder-carousel"},Ie={key:0,class:"load-box"},xe=A({__name:"VanBarComp",setup(s){const n=te(),l=Y(),m=i([]),c=i([]);i(!1);const f=i(!1),p=i(0),h=i(),v=i(""),g=i(""),k=i(!0),S=async()=>{try{const e=await P.get("/api/home/categories");c.value=e.data.sort((t,u)=>t.id-u.id).map(t=>({...t,isMounted:!1}))}catch(e){console.error(e)}},T=async(e=6,t=null)=>{try{const u=await P.get("/api/search/hot-keywords",{params:{limit:e,categoryId:t}});m.value=u.data.data||u.data,g.value=m.value[0]}catch(u){console.error(u)}};function w(e){c.value[e].isMounted=!0,e>0&&(c.value[e-1].isMounted=!0),e<c.value.length-1&&(c.value[e+1].isMounted=!0)}W(()=>{h.value?.swipeTo(0)}),X(async()=>{await T(),await S();let e=c.value.findIndex(t=>t.categoryId===l.name);e==-1&&(e=0),w(e),p.value=e,h.value?.swipeTo(e),Z(()=>{setTimeout(()=>{f.value=!0},500)})});function N(e){w(e),p.value=e,h.value?.swipeTo(e);const t=c.value[e].routeName;n.push({name:t})}const R=e=>{w(e),p.value=e;const t=c.value[e].routeName;n.push({name:t})},L=e=>{g.value=m.value[e||0]},B=()=>{n.push({name:"search",params:{id:v.value||g.value}})};return(e,t)=>{const u=ke,a=de,b=ie,M=ue,O=re;return r(),_(x,null,[V("div",be,[V("div",ye,[d(u,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=o=>v.value=o),background:"rgba(255, 255, 255, 0)",onSearch:B,onFocus:t[1]||(t[1]=o=>k.value=!1),onBlur:t[2]||(t[2]=o=>k.value=!0),style:{"font-size":"4.2vw"},class:"search"},null,8,["modelValue"]),ee(V("div",Ce,[d(b,{"show-indicators":!1,autoplay:k.value?6e3:0,style:{height:"9.333333vw"},vertical:"",onChange:L},{default:y(()=>[(r(!0),_(x,null,E(m.value,o=>(r(),C(a,{key:o,class:"placeholder"},{default:y(()=>[oe(ne(o),1)]),_:2},1024))),128))]),_:1},8,["autoplay"])],512),[[ae,!v.value]])]),t[4]||(t[4]=V("img",{src:we,alt:"Logo",class:"icon"},null,-1))]),d(O,{shrink:"",active:p.value,"onUpdate:active":t[3]||(t[3]=o=>p.value=o),background:"transparent",onChange:N,ellipsis:!1,animated:!1},{default:y(()=>[(r(!0),_(x,null,E(c.value,(o,U)=>(r(),C(M,{key:o.name,title:o.name,name:U},null,8,["title","name"]))),128))]),_:1},8,["active"]),d(b,{loop:!1,duration:f.value?200:0,ref_key:"swipeRef",ref:h,class:"home-outer-swipe flex_auto","show-indicators":!1,onChange:R,"lazy-render":!1},{default:y(()=>[(r(!0),_(x,null,E(c.value,o=>(r(),C(a,{key:o.name},{default:y(()=>[o.isMounted?(r(),_("div",Ie,[(r(),C(le,null,[(r(),C(ce(ve),{key:o.name,catInfo:o},null,8,["catInfo"]))],1024))])):se("",!0)]),_:2},1024))),128))]),_:1},8,["duration"])],64)}}}),Ve=$(xe,[["__scopeId","data-v-f8d54dfa"]]),Se={class:"home flex_direction-column relative"},Te=A({__name:"HomeLayout",setup(s){return(n,l)=>(r(),_("div",Se,[d(Ve)]))}}),Oe=$(Te,[["__scopeId","data-v-03e15f6c"]]);export{Oe as default};
