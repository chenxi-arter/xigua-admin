import{j as e}from"./index-Cn3Y4oV4.js";import{j as et,r as s}from"./react-vendor-BZ8KDC-J.js";import{C as tt,S as st,a as A,E as lt}from"./admin-Ch7isWHw.js";import{f as O}from"./format-0Cj3JWJt.js";import{F as d,s as r,T as nt,a as m,B as x,b as it,I as y,d as je,e as at,f as L,g as h,h as M,i as Ae,U as ot,j as o}from"./antd-vendor-CqSdqTZY.js";import{R as rt}from"./EyeOutlined-BczD9DzJ.js";import{R as ct}from"./CopyOutlined-CXfI4JI2.js";import{R as dt}from"./DownloadOutlined-DnzfYxfs.js";import"./utils-vendor-NIGUFBhG.js";function ft(){const Q=t=>!!t&&/^(https?:)?\/\//i.test(t),se=et(),[fe,le]=s.useState(!1),[we,z]=s.useState([]),[ve,F]=s.useState(0),[T,P]=s.useState(1),[S,Y]=s.useState(10),[be,k]=s.useState(!1),[a,ne]=s.useState(null),[Ce,G]=s.useState(!1),[D,q]=s.useState(null),[Se,H]=s.useState(!1),[B,V]=s.useState(null),[v]=d.useForm(),[Ie,K]=s.useState(!1),[g,ke]=s.useState(null),[I,Ee]=s.useState("active"),[N,ie]=s.useState(!1),[J,$]=s.useState(0),[Ue,ae]=s.useState(!1),[R,oe]=s.useState(""),[re,b]=s.useState(null),[Te,ce]=s.useState(!1),[W,De]=s.useState(null),[Be,de]=s.useState(!1),[Re,Oe]=s.useState([]),[Le,Me]=s.useState(0),[X,Qe]=s.useState(1),[E,ze]=s.useState(10),[U,Fe]=s.useState(""),Z=s.useRef(void 0),[pe,Pe]=s.useState({}),[Ye,Ge]=s.useState([]),he=s.useCallback(async()=>{try{const t=await tt.list(1,200),l=(t.items||[]).map(n=>({value:n.id,label:n.name||String(n.categoryId||n.id)}));Ge(l);const c={};(t.items||[]).forEach(n=>{const i=n.name||String(n.categoryId||n.id);c[String(n.id)]=i,n.categoryId!==void 0&&n.categoryId!==null&&(c[String(n.categoryId)]=i)}),Pe(c)}catch{}},[]),u=s.useCallback(async(t=T,l=S,c=U)=>{le(!0);try{if(c&&c.trim()){const i=await st.fuzzy({keyword:c.trim(),page:t,size:l}),f=typeof i=="object"&&i&&"data"in i?i.data:i,j=f?.list||f?.items||[];z(j),F(f?.total||0),P(f?.page||t),Y(f?.size||l)}else if(I==="deleted"){const n=await A.listDeleted(t,l);z(n.items||[]),F(n.total||0),P(n.page||t),Y(n.size||l)}else{const n=await A.list(t,l);z(n.items),F(n.total),P(n.page),Y(n.size)}}finally{le(!1)}},[U,I]);s.useEffect(()=>{u(1,S,U)},[u,U,I]),s.useEffect(()=>{he()},[he]);const _=s.useCallback(async(t,l=X,c=E)=>{de(!0);try{const n=await lt.list(l,c,{seriesId:t}),i=n.items||[];Oe(i),Me(n.total),Qe(n.page),ze(n.size)}finally{de(!1)}},[X,E]),qe=()=>{ne(null),v.resetFields(),b(null),k(!0)},ue=s.useCallback(t=>{De(t),ce(!0),_(t.id,1,E)},[_,E]),xe=s.useCallback(t=>{se(`/episodes?seriesId=${t.id}`)},[se]),ge=s.useCallback(t=>{ne(t),v.setFieldsValue(t),t.coverUrl&&Q(t.coverUrl)&&b(t.coverUrl),k(!0)},[v]),me=s.useCallback(t=>{q(t),G(!0)},[]),He=s.useCallback(async()=>{if(D)try{await A.remove(D.id),r.success("Â∑≤Âà†Èô§"),u()}catch{r.error("Âà†Èô§Â§±Ë¥•")}finally{G(!1),q(null)}},[D,u]),Ve=s.useCallback(()=>{G(!1),q(null)},[]),Ke=s.useCallback(async()=>{if(!(!a||!B))try{await A.update(a.id,B),r.success("Â∑≤Êõ¥Êñ∞"),k(!1),b(null),u()}catch{r.error("‰øÆÊîπÂ§±Ë¥•")}finally{H(!1),V(null)}},[a,B,u]),Ne=s.useCallback(()=>{H(!1),V(null)},[]),ee=s.useCallback(t=>{t.coverUrl?(ke({url:t.coverUrl,title:t.title}),K(!0)):r.warning("ËØ•Á≥ªÂàóÊöÇÊó†Â∞ÅÈù¢")},[]),Je=s.useCallback(async(t,l)=>{try{r.loading("Ê≠£Âú®‰∏ãËΩΩÂ∞ÅÈù¢...",0);const c=l.replace(/[<>:"/\\|?*]/g,"_");try{const n=await fetch(t,{mode:"cors",credentials:"omit"});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const i=await n.blob();if(i.size===0)throw new Error("‰∏ãËΩΩÁöÑÊñá‰ª∂‰∏∫Á©∫");const f=window.URL.createObjectURL(i),j=document.createElement("a");j.href=f,j.download=c,j.style.display="none",document.body.appendChild(j),j.click(),setTimeout(()=>{document.body.removeChild(j),window.URL.revokeObjectURL(f)},100),r.destroy(),r.success(`Â∞ÅÈù¢Â∑≤‰øùÂ≠ò‰∏∫: ${c}`);return}catch(n){console.warn("FetchÊñπÊ≥ïÂ§±Ë¥•ÔºåÂ∞ùËØïÂ§áÁî®ÊñπÊ≥ï:",n);const i=document.createElement("a");i.href=t,i.download=c,i.target="_blank",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),r.destroy(),r.success("Â∑≤ÊâìÂºÄ‰∏ãËΩΩÈìæÊé•ÔºåËØ∑ÊâãÂä®‰øùÂ≠ò")}}catch(c){r.destroy(),console.error("‰∏ãËΩΩÂ∞ÅÈù¢Â§±Ë¥•:",c),r.error(`‰øùÂ≠òÂ§±Ë¥•: ${c instanceof Error?c.message:"Êú™Áü•ÈîôËØØ"}`)}},[]),$e=async t=>{const{file:l,onSuccess:c,onError:n}=t;if(!a){r.warning("Êñ∞Âª∫Á≥ªÂàóÊó∂ËØ∑Áõ¥Êé•Â°´ÂÜôÂ∞ÅÈù¢URLÔºåÂàõÂª∫ÂÆåÊàêÂêéÂèØÂú®ÁºñËæëÈ°µÈù¢‰øÆÊîπÂ∞ÅÈù¢"),n?.(new Error("Êñ∞Âª∫Ê®°Âºè‰∏çÊîØÊåÅÊñá‰ª∂‰∏ä‰º†"));return}try{ie(!0),$(0);const i=l;if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(i.type))throw new Error("‰∏çÊîØÊåÅÁöÑÊñá‰ª∂Á±ªÂûãÔºåËØ∑‰∏ä‰º† JPEG„ÄÅPNG„ÄÅWebP Êàñ GIF ÂõæÁâá");const j=10*1024*1024;if(i.size>j)throw new Error("Êñá‰ª∂Â§ßÂ∞è‰∏çËÉΩË∂ÖËøá 10MB");console.log("[‰∏ä‰º†] ÂºÄÂßãËé∑ÂèñÈ¢ÑÁ≠æÂêç URL",{seriesId:a.id,filename:i.name,contentType:i.type,fileSize:i.size});const C=await A.getPresignedUploadUrl(a.id,{filename:i.name,contentType:i.type||"image/jpeg"});console.log("[‰∏ä‰º†] Ëé∑ÂèñÈ¢ÑÁ≠æÂêç URL ÊàêÂäü",C),await new Promise((_e,te)=>{const p=new XMLHttpRequest;p.upload.addEventListener("progress",w=>{if(w.lengthComputable){const ye=Math.round(w.loaded/w.total*100);$(ye),console.log("[‰∏ä‰º†] ËøõÂ∫¶:",ye+"%")}}),p.addEventListener("load",()=>{if(console.log("[‰∏ä‰º†] ËØ∑Ê±ÇÂÆåÊàê",{status:p.status,statusText:p.statusText,responseText:p.responseText}),p.status===200||p.status===204)console.log("[‰∏ä‰º†] ‰∏ä‰º†Âà∞ R2 ÊàêÂäü"),_e();else{const w=`‰∏ä‰º†Â§±Ë¥• (Áä∂ÊÄÅÁ†Å: ${p.status})${p.responseText?": "+p.responseText:""}`;console.error("[‰∏ä‰º†] Â§±Ë¥•:",w),te(new Error(w))}}),p.addEventListener("error",w=>{console.error("[‰∏ä‰º†] ÁΩëÁªúÈîôËØØ:",w),console.error("[‰∏ä‰º†] ÂèØËÉΩÁöÑÂéüÂõ†: CORS ÈÖçÁΩÆÈóÆÈ¢ò„ÄÅÁΩëÁªú‰∏≠Êñ≠„ÄÅÊàñ R2 ËÆøÈóÆÊùÉÈôêÈóÆÈ¢ò"),te(new Error("‰∏ä‰º†Â§±Ë¥•ÔºöÁΩëÁªúÈîôËØØÊàñ CORS ÈÖçÁΩÆÈóÆÈ¢ò"))}),p.addEventListener("abort",()=>{console.warn("[‰∏ä‰º†] ‰∏ä‰º†Â∑≤ÂèñÊ∂à"),te(new Error("‰∏ä‰º†Â∑≤ÂèñÊ∂à"))}),console.log("[‰∏ä‰º†] ÂºÄÂßã‰∏ä‰º†Âà∞ R2",{url:C.uploadUrl.substring(0,100)+"...",contentType:i.type||"image/jpeg"}),p.open("PUT",C.uploadUrl),p.setRequestHeader("Content-Type",i.type||"image/jpeg"),p.send(i)}),await A.notifyUploadComplete(a.id,{fileKey:C.fileKey,publicUrl:C.publicUrl,fileSize:i.size}),v.setFieldsValue({coverUrl:C.publicUrl}),b(C.publicUrl),r.success("Â∞ÅÈù¢Â∑≤‰∏ä‰º†Âà∞ R2 Â≠òÂÇ®"),u(T,S),c?.({})}catch(i){n?.(i instanceof Error?i:new Error(String(i))),r.error(`Â∞ÅÈù¢‰∏ä‰º†Â§±Ë¥•: ${i instanceof Error?i.message:String(i)}`)}finally{ie(!1),$(0)}},We=async()=>{if(!a){r.warning("Êñ∞Âª∫Á≥ªÂàóÊó∂ËØ∑Áõ¥Êé•Â°´ÂÜôÂ∞ÅÈù¢URLÔºåÂàõÂª∫ÂÆåÊàêÂêéÂèØÂú®ÁºñËæëÈ°µÈù¢‰øÆÊîπÂ∞ÅÈù¢");return}if(!R||!/^https?:\/\//i.test(R)){r.warning("ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂ∞ÅÈù¢ URL");return}try{ae(!0),await A.coverFromUrl(a.id,R.trim());const t=await A.get(a.id);v.setFieldsValue({coverUrl:t.coverUrl}),b(t.coverUrl),r.success("Â∑≤ÈÄöËøá URL Êõ¥Êñ∞Â∞ÅÈù¢"),oe(""),u(T,S)}catch{r.error("ÈÄöËøá URL ‰∏ä‰º†Â∞ÅÈù¢Â§±Ë¥•")}finally{ae(!1)}},Xe=s.useMemo(()=>[{title:"ID",dataIndex:"id",width:80},{title:"Ê†áÈ¢ò",dataIndex:"title",width:200},{title:"ÊèèËø∞",dataIndex:"description",width:300,ellipsis:{showTitle:!1},render:t=>e.jsx(nt,{placement:"topLeft",title:t||"Êó†ÊèèËø∞",children:e.jsx("span",{style:{cursor:"pointer"},children:t||e.jsx("span",{style:{color:"#ccc"},children:"Êó†ÊèèËø∞"})})})},{title:"Â∞ÅÈù¢",dataIndex:"coverUrl",width:100,render:(t,l)=>t?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:t,alt:"cover",style:{width:56,height:56,objectFit:"cover",borderRadius:6,cursor:"pointer",transition:"opacity 0.2s"},onClick:()=>ee(l),onMouseEnter:c=>{c.currentTarget.style.opacity="0.8"},onMouseLeave:c=>{c.currentTarget.style.opacity="1"}}),e.jsx("div",{style:{position:"absolute",top:2,right:2,background:"rgba(0,0,0,0.6)",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>ee(l),children:e.jsx(rt,{style:{color:"white",fontSize:10}})})]}):"-"},{title:"ÂàÜÁ±ª",dataIndex:"categoryId",width:120,render:t=>t==null?e.jsx("span",{style:{color:"#999"},children:"Êú™ÂàÜÁ±ª"}):pe[String(t)]||`ID:${t}`},{title:"ÂàõÂª∫Êó∂Èó¥",dataIndex:"createdAt",width:150,render:t=>O(t)},{title:"Êõ¥Êñ∞Êó∂Èó¥",dataIndex:"updatedAt",width:150,render:t=>O(t)},{title:"Êìç‰Ωú",width:420,render:(t,l)=>e.jsx(m,{children:I==="deleted"?e.jsx(x,{type:"link",onClick:async()=>{try{await A.restore(l.id),r.success("Â∑≤ÊÅ¢Â§ç"),u()}catch{r.error("ÊÅ¢Â§çÂ§±Ë¥•")}},children:"ÊÅ¢Â§ç"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:()=>ge(l),type:"link",children:"ÁºñËæë"}),e.jsx(x,{onClick:()=>me(l),danger:!0,type:"link",children:"Âà†Èô§"}),e.jsx(x,{type:"link",onClick:()=>ue(l),children:"Êü•ÁúãÂâßÈõÜ"}),e.jsx(x,{type:"link",onClick:()=>xe(l),children:"ÁÆ°ÁêÜÂâßÈõÜ"})]})})}],[me,ge,xe,ue,ee,I,u,pe]),Ze=async()=>{const t=await v.validateFields();if(a)V(t),H(!0);else try{await A.create(t),r.success("Â∑≤ÂàõÂª∫"),k(!1),u()}catch{r.error("ÂàõÂª∫Â§±Ë¥•")}};return e.jsxs("div",{className:"page",children:[e.jsxs(m,{className:"page-toolbar",children:[e.jsx(x,{type:"primary",onClick:qe,children:"Êñ∞Âª∫Á≥ªÂàó"}),e.jsx(it,{options:[{label:"Ê≠£Â∏∏",value:"active"},{label:"ÂõûÊî∂Á´ô",value:"deleted"}],value:I,onChange:t=>Ee(t)}),e.jsx(y,{placeholder:"ÊêúÁ¥¢Á≥ªÂàóÔºàÊ†áÈ¢òÂÖ≥ÈîÆÂ≠óÔºâ",style:{width:280},allowClear:!0,onChange:t=>{const l=t.target.value||"";Fe(l),Z.current&&window.clearTimeout(Z.current),Z.current=window.setTimeout(()=>{u(1,S,l)},300)}}),e.jsx(x,{onClick:()=>u(),children:"Âà∑Êñ∞"})]}),e.jsx(je,{rowKey:"id",loading:fe,dataSource:we,columns:Xe,scroll:{x:1400},pagination:{current:T,pageSize:S,total:ve,position:["bottomCenter"],onChange:(t,l)=>u(t,l,U)}}),e.jsx(at,{title:W?`Á≥ªÂàó„Äå${W.title}„ÄçÁöÑÂâßÈõÜ`:"ÂâßÈõÜ",open:Te,onClose:()=>ce(!1),width:720,children:e.jsx(je,{rowKey:"id",loading:Be,dataSource:Re,columns:[{title:"ID",dataIndex:"id",width:100},{title:"ÈõÜÊï∞",dataIndex:"episodeNumber",width:80},{title:"Ê†áÈ¢ò",dataIndex:"title"},{title:"Êó∂Èïø(Áßí)",dataIndex:"duration",width:100},{title:"Áä∂ÊÄÅ",dataIndex:"status",width:100}],pagination:{current:X,pageSize:E,total:Le,position:["bottomCenter"],onChange:(t,l)=>{_(W.id,t,l)}}})}),e.jsx(L,{title:a?"ÁºñËæëÁ≥ªÂàó":"Êñ∞Âª∫Á≥ªÂàó",open:be,onCancel:()=>k(!1),onOk:Ze,okText:"‰øùÂ≠ò",cancelText:"ÂèñÊ∂à",width:900,style:{top:20},children:e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",paddingRight:8},children:[a&&e.jsxs("div",{style:{background:"#f5f5f5",padding:"16px",borderRadius:"8px",marginBottom:"20px"},children:[e.jsx(h.Title,{level:5,style:{marginTop:0,marginBottom:12},children:"üìä Âè™ËØª‰ø°ÊÅØ"}),e.jsxs(m,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"ID:"}),e.jsx(h.Text,{strong:!0,children:a.id})]}),a.shortId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(h.Text,{type:"secondary",children:"Short ID:"}),e.jsxs(m,{children:[e.jsx(h.Text,{code:!0,children:a.shortId}),e.jsx(x,{size:"small",icon:e.jsx(ct,{}),onClick:()=>{navigator.clipboard.writeText(a.shortId||""),r.success("Short ID Â∑≤Â§çÂà∂")}})]})]}),a.externalId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"External ID:"}),e.jsx(h.Text,{code:!0,children:a.externalId})]}),a.playCount!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"Êí≠ÊîæÊ¨°Êï∞:"}),e.jsx(h.Text,{strong:!0,children:a.playCount.toLocaleString()})]}),a.totalEpisodes!==void 0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"ÊÄªÈõÜÊï∞:"}),e.jsx(h.Text,{strong:!0,children:a.totalEpisodes})]}),a.createdAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"ÂàõÂª∫Êó∂Èó¥:"}),e.jsx(h.Text,{children:O(a.createdAt)})]}),a.updatedAt&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h.Text,{type:"secondary",children:"Êõ¥Êñ∞Êó∂Èó¥:"}),e.jsx(h.Text,{children:O(a.updatedAt)})]})]})]}),e.jsxs(d,{form:v,layout:"vertical",children:[e.jsx(M,{orientation:"left",children:"üìÑ Âü∫Êú¨‰ø°ÊÅØ"}),e.jsx(d.Item,{name:"title",label:"Ê†áÈ¢ò",rules:[{required:!0,message:"ËØ∑ËæìÂÖ•Ê†áÈ¢ò"}],children:e.jsx(y,{placeholder:"ËØ∑ËæìÂÖ•Á≥ªÂàóÊ†áÈ¢ò"})}),e.jsx(d.Item,{name:"description",label:"ÊèèËø∞",children:e.jsx(y.TextArea,{rows:3,placeholder:"ËØ∑ËæìÂÖ•Á≥ªÂàóÊèèËø∞"})}),e.jsx(d.Item,{name:"coverUrl",label:"Â∞ÅÈù¢Âú∞ÂùÄ",children:e.jsx(y,{placeholder:"ÂèØÁõ¥Êé•Â°´ÂÜôÂ∞ÅÈù¢ URLÔºåÊàñÂú®‰∏ãÊñπÈÄâÊã©ÂõæÁâáÊñá‰ª∂",onChange:t=>{const l=t.target.value;l&&Q(l)?b(l):l||b(null)}})}),(re||a?.coverUrl&&Q(a.coverUrl))&&e.jsxs("div",{style:{marginBottom:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:14,color:"#666",marginBottom:8},children:"Â∞ÅÈù¢È¢ÑËßàÔºö"}),e.jsx(Ae,{src:re||a?.coverUrl,alt:"cover preview",style:{maxWidth:"100%",maxHeight:200,objectFit:"contain"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN"})]}),a&&e.jsx("div",{style:{marginBottom:16},children:e.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(m,{align:"start",style:{width:"100%",justifyContent:"space-between"},children:[e.jsx(ot,{accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",showUploadList:!1,customRequest:$e,disabled:N,children:e.jsx(x,{loading:N,children:"‰∏ä‰º†Â∞ÅÈù¢Êñá‰ª∂"})}),e.jsxs(m,{children:[e.jsx(y,{placeholder:"ÈÄöËøáÂ∞ÅÈù¢ URL Êõ¥Êñ∞",style:{width:320},value:R,onChange:t=>oe(t.target.value)}),e.jsx(x,{loading:Ue,onClick:We,children:"Êõ¥Êñ∞Â∞ÅÈù¢"})]})]}),N&&J>0&&e.jsx("div",{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:8,background:"#f0f0f0",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",background:"#1890ff",width:`${J}%`,transition:"width 0.3s ease"}})}),e.jsxs("span",{style:{fontSize:12,color:"#666",minWidth:40},children:[J,"%"]})]})})]})}),!a&&e.jsx("div",{style:{marginBottom:16,padding:"12px 16px",background:"#f6f8fa",borderRadius:6,border:"1px solid #e1e4e8"},children:e.jsx("div",{style:{fontSize:14,color:"#586069",marginBottom:8},children:"üí° ÊèêÁ§∫ÔºöÊñ∞Âª∫Á≥ªÂàóÊó∂ËØ∑Áõ¥Êé•Â°´ÂÜôÂ∞ÅÈù¢URLÔºåÂàõÂª∫ÂÆåÊàêÂêéÂèØÂú®ÁºñËæëÈ°µÈù¢‰øÆÊîπÂ∞ÅÈù¢"})}),e.jsx(M,{orientation:"left",children:"üë• ‰∫∫Âëò‰ø°ÊÅØ"}),e.jsx(d.Item,{name:"starring",label:"‰∏ªÊºî",tooltip:"Â§ö‰∏™‰∏ªÊºîÁî®ÈÄóÂè∑ÂàÜÈöî",children:e.jsx(y,{placeholder:"Â¶ÇÔºöÂº†‰∏â,ÊùéÂõõ,Áéã‰∫î"})}),e.jsx(d.Item,{name:"actor",label:"ÊºîÂëò",tooltip:"Â§ö‰∏™ÊºîÂëòÁî®ÈÄóÂè∑ÂàÜÈöî",children:e.jsx(y,{placeholder:"Â¶ÇÔºöÂº†‰∏â,ÊùéÂõõ,Áéã‰∫î,ËµµÂÖ≠"})}),e.jsx(d.Item,{name:"director",label:"ÂØºÊºî",tooltip:"Â§ö‰∏™ÂØºÊºîÁî®ÈÄóÂè∑ÂàÜÈöî",children:e.jsx(y,{placeholder:"Â¶ÇÔºöÈôàÂØº,ÂàòÂØº"})}),e.jsx(M,{orientation:"left",children:"üè∑Ô∏è ÂàÜÁ±ª‰ø°ÊÅØ"}),e.jsx(d.Item,{name:"categoryId",label:"ÂàÜÁ±ª",children:e.jsx(o,{placeholder:"ËØ∑ÈÄâÊã©ÂàÜÁ±ª",allowClear:!0,options:Ye,showSearch:!0,filterOption:(t,l)=>(l?.label??"").toLowerCase().includes(t.toLowerCase())})}),e.jsxs(m,{style:{width:"100%"},size:"middle",children:[e.jsx(d.Item,{name:"region",label:"Âú∞Âå∫",style:{marginBottom:0,flex:1},children:e.jsxs(o,{placeholder:"ËØ∑ÈÄâÊã©Âú∞Âå∫",allowClear:!0,children:[e.jsx(o.Option,{value:"Â§ßÈôÜ",children:"Â§ßÈôÜ"}),e.jsx(o.Option,{value:"È¶ôÊ∏Ø",children:"È¶ôÊ∏Ø"}),e.jsx(o.Option,{value:"Âè∞Êπæ",children:"Âè∞Êπæ"}),e.jsx(o.Option,{value:"ÁæéÂõΩ",children:"ÁæéÂõΩ"}),e.jsx(o.Option,{value:"Èü©ÂõΩ",children:"Èü©ÂõΩ"}),e.jsx(o.Option,{value:"Êó•Êú¨",children:"Êó•Êú¨"}),e.jsx(o.Option,{value:"Ê≥∞ÂõΩ",children:"Ê≥∞ÂõΩ"}),e.jsx(o.Option,{value:"ÂÖ∂‰ªñ",children:"ÂÖ∂‰ªñ"})]})}),e.jsx(d.Item,{name:"language",label:"ËØ≠Ë®Ä",style:{marginBottom:0,flex:1},children:e.jsxs(o,{placeholder:"ËØ∑ÈÄâÊã©ËØ≠Ë®Ä",allowClear:!0,children:[e.jsx(o.Option,{value:"ÂõΩËØ≠",children:"ÂõΩËØ≠"}),e.jsx(o.Option,{value:"Á≤§ËØ≠",children:"Á≤§ËØ≠"}),e.jsx(o.Option,{value:"Ëã±ËØ≠",children:"Ëã±ËØ≠"}),e.jsx(o.Option,{value:"Èü©ËØ≠",children:"Èü©ËØ≠"}),e.jsx(o.Option,{value:"Êó•ËØ≠",children:"Êó•ËØ≠"}),e.jsx(o.Option,{value:"Ê≥∞ËØ≠",children:"Ê≥∞ËØ≠"})]})})]}),e.jsxs(m,{style:{width:"100%"},size:"middle",children:[e.jsx(d.Item,{name:"status",label:"Áä∂ÊÄÅ",style:{marginBottom:0,flex:1},children:e.jsxs(o,{placeholder:"ËØ∑ÈÄâÊã©Áä∂ÊÄÅ",allowClear:!0,children:[e.jsx(o.Option,{value:"ÂÆåÁªì",children:"ÂÆåÁªì"}),e.jsx(o.Option,{value:"ËøûËΩΩ",children:"ËøûËΩΩ"})]})}),e.jsx(d.Item,{name:"year",label:"Âπ¥‰ªΩ",style:{marginBottom:0,flex:1},children:e.jsx(o,{placeholder:"ËØ∑ÈÄâÊã©Âπ¥‰ªΩ",allowClear:!0,children:Array.from({length:10},(t,l)=>new Date().getFullYear()-l).map(t=>e.jsx(o.Option,{value:String(t),children:t},t))})})]}),e.jsx(M,{orientation:"left",children:"üìÖ Áä∂ÊÄÅ‰ø°ÊÅØ"}),e.jsxs(m,{style:{width:"100%"},size:"middle",children:[e.jsx(d.Item,{name:"score",label:"ËØÑÂàÜ",style:{marginBottom:0,flex:1},tooltip:"0-10ÂàÜ",children:e.jsx(y,{type:"number",step:"0.1",min:0,max:10,placeholder:"Â¶ÇÔºö8.5"})}),e.jsx(d.Item,{name:"upStatus",label:"Êõ¥Êñ∞Áä∂ÊÄÅ",style:{marginBottom:0,flex:1},children:e.jsxs(o,{placeholder:"ËØ∑ÈÄâÊã©",allowClear:!0,children:[e.jsx(o.Option,{value:"Êõ¥Êñ∞‰∏≠",children:"Êõ¥Êñ∞‰∏≠"}),e.jsx(o.Option,{value:"Â∑≤ÂÆåÁªì",children:"Â∑≤ÂÆåÁªì"})]})})]}),e.jsxs(m,{style:{width:"100%"},size:"middle",children:[e.jsx(d.Item,{name:"upCount",label:"Êõ¥Êñ∞Ê¨°Êï∞",style:{marginBottom:0,flex:1},children:e.jsx(y,{type:"number",min:0,placeholder:"Êõ¥Êñ∞Ê¨°Êï∞"})}),e.jsx(d.Item,{name:"releaseDate",label:"ÂèëÂ∏ÉÊó•Êúü",style:{marginBottom:0,flex:1},children:e.jsx(y,{placeholder:"YYYY-MM-DD"})})]}),e.jsxs(m,{style:{width:"100%"},size:"middle",children:[e.jsx(d.Item,{name:"isCompleted",label:"ÊòØÂê¶ÂÆåÁªì",style:{marginBottom:0,flex:1},children:e.jsxs(o,{placeholder:"ËØ∑ÈÄâÊã©",allowClear:!0,children:[e.jsx(o.Option,{value:!0,children:"ÊòØ"}),e.jsx(o.Option,{value:!1,children:"Âê¶"})]})}),e.jsx(d.Item,{name:"isActive",label:"ÊòØÂê¶Ê¥ªË∑É",style:{marginBottom:0,flex:1},children:e.jsxs(o,{placeholder:"ËØ∑ÈÄâÊã©",allowClear:!0,children:[e.jsx(o.Option,{value:1,children:"Ê≠£Â∏∏"}),e.jsx(o.Option,{value:0,children:"Â∑≤Âà†Èô§"})]})})]})]})]})}),e.jsx(L,{title:"Á°ÆËÆ§Âà†Èô§",open:Ce,onOk:He,onCancel:Ve,okText:"Á°ÆËÆ§Âà†Èô§",cancelText:"ÂèñÊ∂à",okType:"danger",children:e.jsxs("p",{children:["Á°ÆÂÆöË¶ÅÂà†Èô§Á≥ªÂàó„Äå",D?.title,"„ÄçÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ"]})}),e.jsx(L,{title:"Á°ÆËÆ§‰øÆÊîπ",open:Se,onOk:Ke,onCancel:Ne,okText:"Á°ÆËÆ§‰øÆÊîπ",cancelText:"ÂèñÊ∂à",children:e.jsxs("p",{children:["Á°ÆÂÆöË¶Å‰øÆÊîπÁ≥ªÂàó„Äå",B?.title,"„ÄçÂêóÔºü"]})}),e.jsx(L,{title:`Â∞ÅÈù¢È¢ÑËßà - ${g?.title}`,open:Ie,onCancel:()=>K(!1),footer:[e.jsx(x,{onClick:()=>K(!1),children:"ÂÖ≥Èó≠"},"close"),e.jsx(x,{onClick:()=>{g&&navigator.clipboard.writeText(g.url).then(()=>{r.success("Â∞ÅÈù¢Âú∞ÂùÄÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø")}).catch(()=>{r.error("Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Â§çÂà∂")})},children:"Â§çÂà∂Âú∞ÂùÄ"},"copy"),e.jsx(x,{type:"primary",icon:e.jsx(dt,{}),onClick:()=>{if(g){const t=g.url.split("."),l=t.length>1?t[t.length-1].split("?")[0]:"jpg",n=`${g.title.replace(/[<>:"/\\|?*]/g,"_")}_cover.${l}`;Je(g.url,n)}},children:"‰øùÂ≠òÂ∞ÅÈù¢"},"download")],width:600,centered:!0,children:g&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Ae,{src:g.url,alt:g.title,style:{maxWidth:"100%",maxHeight:"400px"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN"}),e.jsxs("div",{style:{marginTop:16,fontSize:14,color:"#666"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Á≥ªÂàóÊ†áÈ¢òÔºö"}),g.title]}),e.jsx("p",{children:e.jsx("strong",{children:"Â∞ÅÈù¢Âú∞ÂùÄÔºö"})}),e.jsx("div",{style:{background:"#f5f5f5",padding:"8px 12px",borderRadius:4,wordBreak:"break-all",fontSize:12,fontFamily:"Monaco, Menlo, monospace"},children:g.url})]})]})})]})}export{ft as default};
